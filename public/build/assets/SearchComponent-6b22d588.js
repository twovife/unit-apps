import{q as X,r as c,W as Z,j as o,F as $,a,y as P}from"./app-d4729dac.js";import{u as ee,S as f}from"./SelectComponent-8a2c91cb.js";import{B as Y}from"./button-8811d360.js";import{I as M}from"./input-b0eca814.js";import{M as ae,R as te}from"./react-icons.esm-023a998e.js";import{L as se}from"./Loading-5a3214bc.js";import{d as _}from"./dayjs.min-3ee99205.js";const pe=({urlLink:y=route("home"),localState:B,searchDate:F=!1,searchMonth:R=!1,searchPlanText:W=!1,planTextName:m="search",searchHari:x=!1,searchWilayah:E=!1,searchGroupingBranch:q=!1,searchKelompok:L=!1,children:G,nexOrPrevious:i=null,setNexOrPrevious:K})=>{const{selectedSearchParam:g,optWilayah:w,selectedWilayah:v,setSelectedWilayah:J,filteredBranch:z,selectedBranch_id:le,selectedMonth:ne,selectedDate:oe,selectedKelompok:ie,optKelompok:A,dayOpt:H}=ee(),{server_filter:{hari:N,branch_id:k,month:S,date:b,wilayah:C,kelompok:j}}=X().props,d=c.useRef(null),{data:l,setData:s,get:O,processing:h}=Z({}),[Q,u]=c.useState(!1);console.log(l);const n=e=>{const{name:t,value:r}=e.target;W?t==m?s(p=>{const I={[t]:r};for(const D in p)D!==t&&(I[D]="");return I}):s(p=>({...p,[t]:r,[m]:""})):isNaN(r)?s(t,r):s(t,parseInt(r))},T=e=>{const{value:t}=e.target;J(t),s({branch_id:""})},U=e=>{e.preventDefault(),O(y)},V=e=>{e.preventDefault(),P.visit(y,{onStart:t=>u(!0),onFinish:t=>u(!1)}),localStorage.setItem(B,JSON.stringify({oldFilter:[],oldPage:1}))};return c.useEffect(()=>{const e={};g?e[m]=g:(k&&(e.branch_id=parseInt(k)),b&&(e.date=b),S&&(e.month=S),C&&(e.wilayah=parseInt(C)),j&&(e.kelompok=parseInt(j)),N&&(e.hari=N)),Object.keys(e).length>0&&s(e)},[]),c.useEffect(()=>{u(h)},[h]),c.useEffect(()=>(i&&(i=="next"?(s(e=>({...e,date:_(e.date).add(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{d.current.click()},500)):i=="previous"&&(s(e=>({...e,date:_(e.date).subtract(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{d.current.click()},500))),()=>{i&&K(null)}),[i]),o($,{children:[a(se,{show:h||Q}),o("form",{className:"items-end justify-center w-full grid-cols-2 gap-3 lg:flex lg:justify-end",onSubmit:U,children:[F&&a("div",{className:"w-full",children:a(M,{className:"w-full",type:"date",name:"date",value:l.date,onChange:n,placeholder:"Name of your project"})}),R&&a("div",{className:"w-full",children:a(M,{className:"w-full",type:"month",name:"month",value:l.month,onChange:n,placeholder:"Name of your project"})}),L&&a("div",{className:"w-full",children:a(f,{className:"w-full",value:l.kelompok,options:A,name:"kelompok",onChange:n})}),E&&a("div",{className:"w-full",children:a(f,{className:"w-full",value:l.wilayah,options:w,name:"wilayah",onChange:n})}),x&&a("div",{className:"w-full",children:a(f,{className:"w-full",value:l.hari,options:H,name:"hari",onChange:n})}),q&&o("div",{className:"flex items-center justify-center w-full gap-3",children:[a("div",{className:"flex-1",children:a(f,{valuetype:"number",value:v,options:w,name:"wilayah",required:"true",onChange:T})}),v!==""&&a("div",{className:"flex-1",children:a(f,{value:l.branch_id,options:z,name:"branch_id",required:"true",onChange:n})})]}),o("div",{className:"flex items-center justify-end col-span-2 gap-3",children:[o(Y,{ref:d,variant:"outline",type:"submit",children:[a(ae,{className:"h-3.5 w-3.5"}),a("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Cari"})]}),o(Y,{variant:"outline",type:"button",onClick:V,children:[a(te,{}),a("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Reset"})]}),G]})]})]})};export{pe as S};
