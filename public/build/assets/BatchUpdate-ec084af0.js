import{X as T,r as i,A,j as r,a,S as D,d as I,x as S,f as M}from"./app-d484a7d2.js";import{I as _}from"./InputError-9c72daac.js";import{I as $}from"./InputLabel-f88d45c1.js";import{P as B}from"./PrimaryButton-debee66b.js";import{T as E}from"./TextInput-96fee1a6.js";import{A as L}from"./AuthenticatedLayout-5411a3b6.js";import{N as Y}from"./react-number-format.es-e89b213e.js";import P from"./OldCustomer-0bdceec8.js";import U from"./NewCustomer-48ae61aa.js";import"./Navbar-e52bcf93.js";import"./button-8c0bc7cc.js";import"./index-98ca6607.js";import"./utils-3f044a58.js";import"./createLucideIcon-d000e5d9.js";import"./SweetAlert-732fed95.js";import"./index-5c259ab6.js";import"./index-73a971cd.js";import"./index-285c6289.js";import"./Combination-44a5c864.js";import"./index-d874ae91.js";import"./index-0912e6e8.js";import"./react-icons.esm-9d6503eb.js";import"./Loading-8de321b5.js";import"./transition-34aa8e6f.js";import"./Checkbox-4a6dc653.js";import"./SelectList-5d8ad4a0.js";import"./index.esm-1326f15a.js";function q(N,v,l,o,f,d=null){var w;const{kelompok:e}=T().props,[b,m]=i.useState(!1),[g,c]=i.useState(d?((w=f[0])==null?void 0:w[d])??null:null),p=t=>{c(t)},[h,y]=i.useState({...v}),x=t=>{const{value:C,name:F}=t.target;y({...h,[F]:C})},k=[{id:1,value:"senin",display:"Senin"},{id:2,value:"selasa",display:"Selasa"},{id:3,value:"rabu",display:"Rabu"},{id:4,value:"kamis",display:"Kamis"},{id:5,value:"jumat",display:"Jumat"},{id:6,value:"sabtu",display:"Sabtu"}],s=[];for(let t=1;t<=10;t++)s.push({id:t,value:t,display:`Mantri ${t}`});const n=e==null?void 0:e.map(t=>({id:t,value:t,display:`Mantri ${t}`})),u=l==null?void 0:l.map(t=>{if(d=="wilayah")return{id:t.id,value:t.wilayah,display:`wilayah ${t.wilayah}`};if(d=="unit")return{id:t.id,value:t.unit,display:`${t.unit}`}}),j=o==null?void 0:o.map(t=>({id:t.id,value:t.id,display:`${t.nama_karyawan} - ${t.jabatan} ${t.area!=0?t.area:""}`}));return{serverFilters:h,onServerFilterChange:x,onServerFilterSubmit:t=>{m(!0),A.get(route(N),h)},branchess:u,loading:b,setLoading:m,activeTab:g,setActiveTab:c,handleTabClick:p,transaction_day:k,emps:j,mantriMantri:s,kolompokMantri:n,status_angsuran:[{id:1,value:1,display:"normal"},{id:2,value:2,display:"cm"},{id:3,value:3,display:"mb"},{id:4,value:4,display:"ml"}]}}const Na=({max_date:N,min_date:v,...l})=>{const{emps:o,status_angsuran:f}=q(null,null,null,l.mantri),[d,e]=i.useState(!1),[b,m]=i.useState(),[g,c]=i.useState(),[p,h]=i.useState(),[y,x]=i.useState(),k=s=>{const n=document.getElementById("nik").value;e(!0),m(),c(),x(),M({method:"post",url:route("transaction.getnik"),data:{nik:n}}).then(function({data:u}){c(u.data),h(u.reqistered_customer),x(n),e(!1)}).catch(function({response:u}){m(u.data.message),c(),x(),e(!1)})};return r(L,{auth:l.auth,errors:l.errors,header:"Buku Transaksi",loading:d,children:[a(D,{title:"Batch Upload"}),a("div",{className:"relative",children:r("div",{className:"flex p-4",children:[r("div",{className:"flex-[2]",children:[r("div",{className:"mb-3",children:[a($,{htmlFor:"nik",value:"Input Nik Customer"}),r("div",{className:"flex items-center justify-start gap-3 mt-1",children:[a(E,{id:"nik",type:"text",name:"nik",required:!0,className:"block",autoComplete:"nik"}),a(B,{title:"Cek",as:"button",type:"button",onClick:k})]}),a(_,{message:b,className:"mt-2"})]}),y?p?a(P,{status:f,setLoading:e,max_date:N,min_date:v,emps:o,nik:y,url:route("batchupdate.batch_post"),customer_id:p==null?void 0:p.id}):a(U,{status:f,setLoading:e,max_date:N,min_date:v,emps:o,nik:y,url:route("batchupdate.batch_post")}):"",a("div",{className:"mb-3"})]}),a("div",{className:"flex-[3]",children:r("div",{className:"mb-3",children:[a("div",{className:"text-lg font-semibold",children:"History Pinjaman Customer"}),a("div",{className:"p-4 mb-3 overflow-hidden rounded shadow",children:r("table",{className:"w-full text-sm text-left text-gray-500",children:[a("thead",{className:"sticky top-0 text-xs text-gray-900 uppercase bg-gray-200 whitespace-nowrap",children:r("tr",{children:[a("th",{className:"px-3 py-2",children:"No"}),a("th",{className:"px-3 py-2",children:"Tanggal Drop"}),a("th",{className:"px-3 py-2",children:"Unit"}),a("th",{className:"px-3 py-2",children:"Kelompok"}),a("th",{className:"px-3 py-2",children:"Mantri"}),a("th",{className:"px-3 py-2",children:"Nama Customer"}),a("th",{className:"px-3 py-2",children:"Drop"}),a("th",{className:"px-3 py-2",children:"Lunas"}),a("th",{className:"px-3 py-2",children:"Status"})]})}),a("tbody",{children:g?g.map((s,n)=>r("tr",{children:[a("td",{className:"px-3 py-2",children:n+1}),a("td",{className:"px-3 py-2",children:I(s.tanggal_drop).format("DD-MM-YYYY")}),a("td",{className:"px-3 py-2",children:s.unit}),a("td",{className:"px-3 py-2",children:s.kelompok}),a("td",{className:"px-3 py-2",children:s.mantri_name}),a("td",{className:"px-3 py-2",children:s.customer_name}),a("td",{className:"px-3 py-2",children:a(Y,{value:s.drop,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-2",children:s.lunas}),a("td",{className:"px-3 py-2",children:s.status=="normal"||s.status=="cm"?a(S,{as:"a",href:route("pinjaman.normal.show",s.id),className:"px-5 py-1 font-semibold text-white uppercase bg-green-400 rounded-lg",children:s.status}):s.status=="mb"?a(S,{as:"a",href:route("pinjaman.normal.show",s.id),className:"px-5 py-1 font-semibold text-white uppercase bg-yellow-400 rounded-lg",children:s.status}):a(S,{as:"a",href:route("pinjaman.normal.show",s.id),className:"px-5 py-1 font-semibold text-white uppercase bg-red-400 rounded-lg",children:s.status})})]},n)):a("tr",{children:a("td",{colSpan:3,children:"Data tidak ditemukan"})})})]})})]})})]})})]})};export{Na as default};
