import{r as l,a as e,R as g,j as u,F as ke,l as we}from"./app-714a345e.js";import{D as Re,a as Ie,b as Pe,c as _e,d as Te}from"./dialog-15d9a169.js";import{c as X,b as L,d as Z,a as ee,P as Ee,e as Se}from"./index-33101a57.js";import{c as De,u as Oe}from"./index-537103d5.js";import{u as ae}from"./button-0f5bff30.js";import{P as _}from"./index-dd86b986.js";import{c as je}from"./react-icons.esm-e27378ca.js";import{c as V}from"./utils-36e2ef84.js";import{C as w,a as R,b as I,d as P,c as Me}from"./card-8efb3aaa.js";import{T as He,a as Le,b as Y,c as Q}from"./tabs-4aed5303.js";import Ve from"./RiwayatPengajuan-ec12349b.js";import{u as $e,A as Ue,N as W}from"./Acc-6286a068.js";import Fe from"./ActionTable-83a25adc.js";import Ke from"./RemoveLoan-30bcce54.js";import"./Loading-9691fe94.js";import"./label-ff21b2fd.js";import Ge from"./ChangeDetail-d81e7a01.js";import"./index-7f2271c3.js";import"./FormatNumbering-d7382bf3.js";import"./react-number-format.es-75ab1861.js";import"./index-be006201.js";import"./BadgeStatus-0d544512.js";import"./badge-0b057bb8.js";import"./index.esm-975b2ff6.js";import"./transition-e1e74d15.js";import"./index-40d44946.js";import"./input-7a991c00.js";var $="Collapsible",[qe,ne]=X($),[Je,U]=qe($),te=l.forwardRef((n,o)=>{const{__scopeCollapsible:a,open:t,defaultOpen:i,disabled:r,onOpenChange:c,...d}=n,[p=!1,m]=L({prop:t,defaultProp:i,onChange:c});return e(Je,{scope:a,disabled:r,contentId:Z(),open:p,onOpenToggle:l.useCallback(()=>m(h=>!h),[m]),children:e(_.div,{"data-state":K(p),"data-disabled":r?"":void 0,...d,ref:o})})});te.displayName=$;var oe="CollapsibleTrigger",re=l.forwardRef((n,o)=>{const{__scopeCollapsible:a,...t}=n,i=U(oe,a);return e(_.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":K(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...t,ref:o,onClick:ee(n.onClick,i.onOpenToggle)})});re.displayName=oe;var F="CollapsibleContent",ie=l.forwardRef((n,o)=>{const{forceMount:a,...t}=n,i=U(F,n.__scopeCollapsible);return e(Ee,{present:a||i.open,children:({present:r})=>e(ze,{...t,ref:o,present:r})})});ie.displayName=F;var ze=l.forwardRef((n,o)=>{const{__scopeCollapsible:a,present:t,children:i,...r}=n,c=U(F,a),[d,p]=l.useState(t),m=l.useRef(null),h=ae(o,m),f=l.useRef(0),y=f.current,C=l.useRef(0),k=C.current,A=c.open||d,b=l.useRef(A),N=l.useRef();return l.useEffect(()=>{const s=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(s)},[]),Se(()=>{const s=m.current;if(s){N.current=N.current||{transitionDuration:s.style.transitionDuration,animationName:s.style.animationName},s.style.transitionDuration="0s",s.style.animationName="none";const v=s.getBoundingClientRect();f.current=v.height,C.current=v.width,b.current||(s.style.transitionDuration=N.current.transitionDuration,s.style.animationName=N.current.animationName),p(t)}},[c.open,t]),e(_.div,{"data-state":K(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!A,...r,ref:h,style:{"--radix-collapsible-content-height":y?`${y}px`:void 0,"--radix-collapsible-content-width":k?`${k}px`:void 0,...n.style},children:A&&i})});function K(n){return n?"open":"closed"}var Be=te,Ye=re,Qe=ie,x="Accordion",We=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[G,Xe,Ze]=De(x),[E,Ha]=X(x,[Ze,ne]),q=ne(),se=g.forwardRef((n,o)=>{const{type:a,...t}=n,i=t,r=t;return e(G.Provider,{scope:n.__scopeAccordion,children:a==="multiple"?e(ta,{...r,ref:o}):e(na,{...i,ref:o})})});se.displayName=x;var[ce,ea]=E(x),[le,aa]=E(x,{collapsible:!1}),na=g.forwardRef((n,o)=>{const{value:a,defaultValue:t,onValueChange:i=()=>{},collapsible:r=!1,...c}=n,[d,p]=L({prop:a,defaultProp:t,onChange:i});return e(ce,{scope:n.__scopeAccordion,value:d?[d]:[],onItemOpen:p,onItemClose:g.useCallback(()=>r&&p(""),[r,p]),children:e(le,{scope:n.__scopeAccordion,collapsible:r,children:e(de,{...c,ref:o})})})}),ta=g.forwardRef((n,o)=>{const{value:a,defaultValue:t,onValueChange:i=()=>{},...r}=n,[c=[],d]=L({prop:a,defaultProp:t,onChange:i}),p=g.useCallback(h=>d((f=[])=>[...f,h]),[d]),m=g.useCallback(h=>d((f=[])=>f.filter(y=>y!==h)),[d]);return e(ce,{scope:n.__scopeAccordion,value:c,onItemOpen:p,onItemClose:m,children:e(le,{scope:n.__scopeAccordion,collapsible:!0,children:e(de,{...r,ref:o})})})}),[oa,S]=E(x),de=g.forwardRef((n,o)=>{const{__scopeAccordion:a,disabled:t,dir:i,orientation:r="vertical",...c}=n,d=g.useRef(null),p=ae(d,o),m=Xe(a),f=Oe(i)==="ltr",y=ee(n.onKeyDown,C=>{var z;if(!We.includes(C.key))return;const k=C.target,A=m().filter(M=>{var B;return!((B=M.ref.current)!=null&&B.disabled)}),b=A.findIndex(M=>M.ref.current===k),N=A.length;if(b===-1)return;C.preventDefault();let s=b;const v=0,D=N-1,O=()=>{s=b+1,s>D&&(s=v)},j=()=>{s=b-1,s<v&&(s=D)};switch(C.key){case"Home":s=v;break;case"End":s=D;break;case"ArrowRight":r==="horizontal"&&(f?O():j());break;case"ArrowDown":r==="vertical"&&O();break;case"ArrowLeft":r==="horizontal"&&(f?j():O());break;case"ArrowUp":r==="vertical"&&j();break}const ye=s%N;(z=A[ye].ref.current)==null||z.focus()});return e(oa,{scope:a,disabled:t,direction:i,orientation:r,children:e(G.Slot,{scope:a,children:e(_.div,{...c,"data-orientation":r,ref:p,onKeyDown:t?void 0:y})})})}),T="AccordionItem",[ra,J]=E(T),ue=g.forwardRef((n,o)=>{const{__scopeAccordion:a,value:t,...i}=n,r=S(T,a),c=ea(T,a),d=q(a),p=Z(),m=t&&c.value.includes(t)||!1,h=r.disabled||n.disabled;return e(ra,{scope:a,open:m,disabled:h,triggerId:p,children:e(Be,{"data-orientation":r.orientation,"data-state":ve(m),...d,...i,ref:o,disabled:h,open:m,onOpenChange:f=>{f?c.onItemOpen(t):c.onItemClose(t)}})})});ue.displayName=T;var pe="AccordionHeader",me=g.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,i=S(x,a),r=J(pe,a);return e(_.h3,{"data-orientation":i.orientation,"data-state":ve(r.open),"data-disabled":r.disabled?"":void 0,...t,ref:o})});me.displayName=pe;var H="AccordionTrigger",he=g.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,i=S(x,a),r=J(H,a),c=aa(H,a),d=q(a);return e(G.ItemSlot,{scope:a,children:e(Ye,{"aria-disabled":r.open&&!c.collapsible||void 0,"data-orientation":i.orientation,id:r.triggerId,...d,...t,ref:o})})});he.displayName=H;var fe="AccordionContent",ge=g.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,i=S(x,a),r=J(fe,a),c=q(a);return e(Qe,{role:"region","aria-labelledby":r.triggerId,"data-orientation":i.orientation,...c,...t,ref:o,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});ge.displayName=fe;function ve(n){return n?"open":"closed"}var ia=se,sa=ue,ca=me,be=he,Ce=ge;const la=ia,Ae=l.forwardRef(({className:n,...o},a)=>e(sa,{ref:a,className:V("border-b",n),...o}));Ae.displayName="AccordionItem";const Ne=l.forwardRef(({className:n,children:o,...a},t)=>e(ca,{className:"flex",children:u(be,{ref:t,className:V("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...a,children:[o,e(je,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));Ne.displayName=be.displayName;const xe=l.forwardRef(({className:n,children:o,...a},t)=>e(Ce,{ref:t,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e("div",{className:V("pb-4 pt-0",n),children:o})}));xe.displayName=Ce.displayName;const La=({show:n=!1,onClosed:o,triggeredData:a})=>{const[t,i]=l.useState([]),{isUnit:r,isMantri:c,isPusat:d,isCreator:p}=$e(),[m,h]=l.useState([]),[f,y]=l.useState(),[C,k]=l.useState(!1),[A,b]=l.useState(!1);l.useEffect(()=>{i(a),y(a==null?void 0:a.request)},[a]);const N=async s=>{k(!0),b(),await we({method:"post",url:route("transaction.nasabah_buku_transaksi"),data:{nik:a.nik}}).then(function({data:v}){k(!1),v.data?h(v.data):h([])}).catch(function({response:v}){b(v.data.message),k(!1)})};return l.useEffect(()=>{a!=null&&a.nik&&N()},[a]),e(ke,{children:e(Re,{open:n,onOpenChange:s=>s?"":o(),children:u(Ie,{className:"w-[90vw] h-[90vh] lg:h-auto overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[A&&e("div",{children:"terjadi kesalahan saat memuat data"}),C?e("div",{children:"Data Sedang Dimuat"}):u(Pe,{children:[e(_e,{children:"Check Transaksi Mantri"}),e(Te,{children:u(He,{defaultValue:"account",className:"w-full",children:[u(Le,{className:"grid w-full grid-cols-2",children:[e(Y,{value:"account",children:"Action"}),e(Y,{value:"history",children:"Riwayat"})]}),u(Q,{value:"account",children:[u(w,{children:[e(R,{children:e(I,{children:"Detail Pengajuan"})}),e(P,{className:"space-y-2",children:e("div",{className:"overflow-auto border rounded-lg scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(Fe,{datas:t})})})]}),u("div",{className:"flex flex-col gap-3 mt-3 lg:flex-row",children:[u("div",{className:"w-full",children:[u(w,{className:"mb-3 relative",children:[e(R,{children:e(I,{children:"ACC / DROP"})}),e(P,{className:"space-y-2",children:e("div",{className:"flex items-end justify-center gap-2 mx-auto mb-3",children:e(Ue,{id:t==null?void 0:t.nomor_pengajuan,triggeredData:t,onClosed:o})})})]}),u(w,{className:"relative",children:[!p&&e(W,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(R,{children:e(I,{children:"Admin Edit"})}),e(P,{className:"space-y-2",children:e("div",{children:t&&e(Ge,{onClosed:o,triggeredData:a})})})]})]}),u(w,{className:"w-full relative",children:[!p&&e(W,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(R,{children:e(I,{children:"Remove Loan"})}),u(P,{className:"space-y-2",children:[u("div",{className:"w-full mt-6 mb-3 text-start",children:[e("p",{className:"text-lg font-semibold text-red-500",children:"Hapus Pinjaman"}),e("p",{className:"mb-1 text-xs italic font-light text-red-500",children:"Perhatian !!!, Jika pengajuan berstatus sukses, maka pengajuan sudah masuk dalam daftar angsuran, jika tetap dihapus akan mempengaruhi data pada angsuran, dan angsuran akan ikut terhapus"}),e("div",{className:"text-right",children:e(Ke,{triggeredId:t==null?void 0:t.nomor_pengajuan,onClosed:o})})]}),e(la,{className:"mb-3",type:"single",collapsible:!0,children:u(Ae,{value:"item-1",children:[e(Ne,{children:"Tambahan"}),e(xe,{children:e("div",{className:"text-sm",children:u("ul",{className:"list-disc list-outside",children:[e("li",{children:"1. Jika ada kesalahan pada angsuran baru ( angsuran hari ini ) utamakan menghapus, dan buat angsuran lagi."}),e("li",{children:"2. Jika terjadi kesalahan Status * Tanggal, usahakan untuk ganti tanggal ( tanggal drop / tanggal request ) dan dan reset status setelah itu"}),e("li",{children:"3. Setelah mengganti Detail pada angsuran, dimohon untuk cek ulang, storting & dan transaksi lagi, dikarenakan perubahan pada detail, akan mempengaruhi laporan lainnya"}),e("li",{className:"text-red-500",children:"4. Reset Status Hanya Tersedia jika pinjaman adalah drop lama / pengajuan"})]})})})]})})]})]})]})]}),e(Q,{value:"history",children:u(w,{children:[u(R,{children:[e(I,{children:"Riwayat Pengajuan"}),e(Me,{children:"Riwayat Pengajuan Nasabah dilihat berdasarkan NIK yang tertera dari semua cabang"})]}),e(P,{className:"space-y-2",children:e("div",{className:"h-[50vh] border rounded-lg overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(Ve,{data:m.history_branch})})})]})})]})})]})]})})})};export{La as default};
