import{W as P,r as T,j as n,a as e}from"./app-93985eb7.js";import{C as A}from"./Checkbox-29ab7d00.js";import{I as i}from"./InputError-5aee89ee.js";import{I as d}from"./InputLabel-240f0ec5.js";import{P as _}from"./PrimaryButton-8c126176.js";import{S as N}from"./SelectList-64d62dbc.js";import{T as h}from"./TextInput-4a0cc41c.js";import{d as c}from"./dayjs.min-74ca444b.js";import{C as k}from"./index.esm-f3d90d23.js";const z=({status:v,setLoading:x,max_date:O,min_date:y,emps:C,customer_id:w,nik:$,url:D=route("transaction.store")})=>{const{data:t,setData:m,post:Y,processing:j,errors:r}=P({tanggal_drop:"",customer_id:w,nik:$,mantri:"",pinjaman:"",type_create:"2",danatitipan_1:!1,tanggal_angsuran_1:"",status_angsuran_:""}),[o,p]=T.useState([{id:1}]);console.log();const I=()=>{const a=o[o.length-1].id+1;p([...o,{id:a}]),m({...t,[`tanggal_angsuran_${a}`]:c(t.tanggal_drop).add(a,"week").format("YYYY-MM-DD")})},M=a=>{const s=o.filter(u=>u.id!==a);p(s);const l={...t};delete l[`tanggal_angsuran_${a}`],delete l[`angsuran_${a}`],m(l)},S=a=>{const{name:s,value:l}=a.target,u={...t};Object.keys(u).forEach(f=>{(f.includes("angsuran")||f.includes("danatitipan"))&&delete u[f]}),p([{id:1},{id:2},{id:3}]);const F={...u,[s]:l,tanggal_angsuran_1:c(l).add(1,"week").format("YYYY-MM-DD"),tanggal_angsuran_2:c(l).add(2,"week").format("YYYY-MM-DD"),tanggal_angsuran_3:c(l).add(3,"week").format("YYYY-MM-DD")};m(F)},g=a=>{m(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)},b=(a,s)=>{m(s,a)};return console.log(t),n("form",{className:"flex-1",onSubmit:a=>{a.preventDefault(),Y(D),x(j)},children:[e("div",{className:"text-lg font-semibold",children:"Permintaan Pinjaman Baru (Nasabah Lama)"}),n("div",{className:"p-4",children:[n("div",{className:"mb-1",children:[e(d,{htmlFor:"tanggal_drop",value:"Tanggal Drop"}),e(h,{id:"tanggal_drop",type:"date",name:"tanggal_drop",min:y,value:t.tanggal_drop,className:"mt-1 block w-full",onChange:S}),e(i,{message:r.tanggal_drop,className:"mt-2"})]}),n("div",{className:"flex w-full gap-2 mb-1",children:[n("div",{className:"flex-1",children:[e(d,{htmlFor:"nik",value:"NIK Customer"}),e(h,{id:"nik",type:"text",name:"nik",value:t.nik,className:"mt-1 block w-full",readOnly:!0,onChange:g}),e(i,{message:r.nik,className:"mt-2"})]}),n("div",{className:"flex-1",children:[e(d,{htmlFor:"mantri",value:"Mantri"}),e(N,{id:"mantri",type:"text",name:"mantri",options:C,nullValue:!0,value:t.mantri,className:"mt-1 block w-full",onChange:g}),e(i,{message:r.mantri,className:"mt-2"})]})]}),n("div",{className:"mb-1",children:[e(d,{htmlFor:"pinjaman",value:"Nominal Pinjaman",className:"mb-1"}),e(k,{name:"pinjaman",id:"pinjaman",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full text-sm mt-2",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:b,value:t.pinjaman,placeholder:"Inputkan angka tanpa sparator"}),e(i,{message:r.pinjaman,className:"mt-2"})]}),e("div",{className:"mt-3 mb-3 font-semibold underline",children:"Input Angsuran"}),o.map((a,s)=>n("div",{className:"flex w-full gap-2 mb-1",children:[n("div",{className:"flex-1",children:[e(d,{htmlFor:`tanggal_angsuran_${a.id}`,value:"Tanggal Angsuran"}),e(h,{id:`tanggal_angsuran_${a.id}`,type:"date",name:`tanggal_angsuran_${a.id}`,value:t[`tanggal_angsuran_${a.id}`],className:"mt-1 block w-full",onChange:g}),e(i,{message:r[`tanggal_angsuran_${a.id}`],className:"mt-2"})]}),n("div",{className:"flex-[1.5]",children:[e(d,{htmlFor:`angsuran_${a.id}`,value:"Nominal Angsuran",className:"mb-1"}),n("div",{className:"flex gap-1 justify-center",children:[e(k,{name:`angsuran_${a.id}`,id:`angsuran_${a.id}`,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:b,value:t[`angsuran_${a.id}`],placeholder:"Inputkan angka tanpa sparator"}),e("div",{className:"block mt-4",children:n("label",{className:"flex items-center",children:[e(A,{name:`danatitipan_${a.id}`,value:t[`danatitipan_${a.id}`],onChange:g}),e("span",{className:"ml-2 text-xs text-gray-600",children:"titipan"})]})})]}),e(i,{message:r[`angsuran_${s}`],className:"mt-2"})]}),n("div",{className:"flex-1",children:[e(d,{htmlFor:`status_angsuran_${a.id}`,value:"Status"}),n("div",{className:"flex justify-center items-center gap-2",children:[e(N,{id:`status_angsuran_${a.id}`,type:"date",options:v,nullValue:!0,name:`status_angsuran_${a.id}`,value:t[`status_angsuran_${a.id}`],className:"mt-1 block w-full",onChange:g}),s>=0&&e(_,{color:"red",type:"button",className:"block",onClick:()=>M(a.id),children:"X"})]}),e(i,{message:r[`status_angsuran_${a.id}`],className:"mt-2"})]})]},a.id)),e(_,{type:"button",onClick:I,title:"Add"}),e("div",{className:"block mt-4",children:e(_,{type:"submit",title:"Submit",color:"green"})})]})]})};export{z as default};
