import{G as v,r as p,j as e}from"./app-Dxvm8qLT.js";import{L as _}from"./Loading-BOQv6bKm.js";import{N as j}from"./NoEditOverlay-BVR94FHe.js";import{u as w}from"./useFrontEndPermission-CvlsrWGS.js";import{B as m}from"./button-DSAeS3Ja.js";import"./input-CGELXTQE.js";import{L as r}from"./label-Cnd3mOF8.js";import{C as i}from"./index.esm-BSRJjjab.js";import"./index-KmVfJpTJ.js";import"./transition-a5c1J63A.js";import"./index-n_on67jh.js";import"./utils-CytzSlOG.js";import"./index-Dk0U3FDJ.js";import"./index-R_VWclwN.js";const G=({triggeredData:n,onClosed:u})=>{const{isUnit:y,isMantri:c,isPusat:g,isCreator:N}=w(),{data:s,setData:t,put:f,processing:x,reset:h,transform:b}=v({request_date:"",drop_date:"",request_nominal:"",approved_nominal:"",nominal_drop:"",drop_langsung:""}),[C,k]=p.useState(null);p.useEffect(()=>{n&&t(a=>({...a,request_date:n.request_date,drop_date:n.tanggal_drop,drop_langsung:n.drop_langsung,request_nominal:n.drop_langsung=="baru"?n.drop_jadi:n.request,approved_nominal:n.acc,nominal_drop:n.drop_jadi}))},[n]);const o=(a,l)=>{t(l,a)},d=a=>{b(l=>({...l,updateType:a})),f(route("transaction.updateEverything",n==null?void 0:n.nomor_pengajuan),{preventDefault:!0,preserveState:!0,onSuccess:()=>{h(),u()}})};return e.jsxs("form",{onSubmit:a=>a.preventDefault(),children:[c&&e.jsx(j,{value:"Hanya bisa dilakukan oleh Pimpinan / Staff"}),e.jsx(_,{show:x}),e.jsxs("div",{className:"flex w-full gap-3 mb-1",children:[s.drop_langsung=="lama"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:"request_nominal",children:"Pengajuan"}),e.jsx(i,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-xs h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"request_nominal",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:o,value:s.request_nominal,placeholder:"Inputkan angka tanpa sparator"})]}),s.approved_nominal&&e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:"approved_nominal",children:"Acc"}),e.jsx(i,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-xs h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"approved_nominal",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:o,value:s.approved_nominal,placeholder:"Inputkan angka tanpa sparator"})]})]}),s.nominal_drop&&e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:"nominal_drop",children:"Drop Jadi"}),e.jsx(i,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-xs h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"nominal_drop",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:o,value:s.nominal_drop,placeholder:"Inputkan angka tanpa sparator"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-blue-500",children:"Perubahan Nominal Mempengaruhi Perolehan Drop dan Rencana Drop"}),e.jsx("div",{className:"text-xs text-yellow-500",children:"Reset Pinjaman akan menghilangkan semua data angsuran pada pinjaman ini"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{onClick:()=>d("detailchange"),type:"submit",children:"Ubah"}),(n==null?void 0:n.drop_langsung)=="lama"&&e.jsx(m,{onClick:()=>d("resetdata"),variant:"yellow",type:"submit",children:"Reset Pinjaman"})]})]})};export{G as default};
