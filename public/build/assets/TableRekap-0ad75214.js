import{r as c,j as v,a,d,F as N,R}from"./app-492f9af2.js";import{F as l,T as j,a as V,b as i,c as y,d as B,e as b,f as F}from"./FormatNumbering-53fe8438.js";import{u as A,f as m,g as J}from"./index-5b4d721d.js";import{B as w}from"./BargeStatus-04221eee.js";import"./button-ffaa9dbd.js";import"./utils-36e2ef84.js";import"./react-number-format.es-2a7d1f11.js";const I=({setOnShowModal:M,setTriggeredData:K,datas:g})=>{const[h,C]=c.useState([]);c.useEffect(()=>{C(g)},[g]);const o=(e=>e.reduce((t,r)=>(Object.keys(r).forEach(n=>{t[n]=(t[n]||0)+(r[n]||0)}),t),{}))(h),s=(e,t)=>{var f,p,_;const r=e.table.getRowModel().rows;if(((p=(f=r[r.length-1])==null?void 0:f.original)==null?void 0:p.type)==="permantri")return(_=r[r.length-1])==null?void 0:_.getValue(t)},x=e=>{M(!0),K(e)},D=c.useMemo(()=>[{header:"",accessorKey:"kelompok",cell:({getValue:e,cell:t})=>v("div",{className:"flex items-center justify-center gap-3",children:[a("div",{children:t.row.original.type=="daily"?e():d(t.row.original.tanggal).format("DD-MM")}),a(w,{onClick:()=>x(t.row.original),value:t.row.original.status_dayly_approval,children:t.row.original.status_dayly_approval?"Approved":"Open"})]})},{header:"Drop",accessorKey:"drop",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.drop})},{header:"Jumlah Drop",accessorKey:"total_drop",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_drop");return a(l,{value:t})}},{header:"Storting",accessorKey:"storting",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.storting})},{header:"Jumlah Storting",accessorKey:"total_storting",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_storting");return a(l,{value:t??o.total_storting})}},{header:"Sirkulasi",accessorKey:"sirkulasi",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"sirkulasi");return a(l,{value:t??o.sirkulasi})}},{header:"Angsuran CM",accessorKey:"angsuran_cm",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.angsuran_cm})},{header:"Jumlah CM",accessorKey:"total_angsuran_cm",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_angsuran_cm");return a(l,{value:t??o.total_angsuran_cm})}},{header:"Saldo CM",accessorKey:"saldo_cm",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"saldo_cm");return a(l,{value:t??o.saldo_cm})}},{header:"Angsuran MB",accessorKey:"angsuran_mb",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.angsuran_mb})},{header:"Jumlah MB",accessorKey:"total_angsuran_mb",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_angsuran_mb");return a(l,{value:t??o.total_angsuran_mb})}},{header:"Saldo MB",accessorKey:"saldo_mb",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"saldo_mb");return a(l,{value:t??o.saldo_mb})}},{header:"Angsuran ML",accessorKey:"angsuran_ml",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.angsuran_ml})},{header:"Jumlah ML",accessorKey:"total_angsuran_ml",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_angsuran_ml");return a(l,{value:t??o.total_angsuran_ml})}},{header:"Saldo ML",accessorKey:"saldo_ml",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"saldo_ml");return a(l,{value:t??o.saldo_ml})}},{header:"Kasir",accessorKey:"status_approve_kasir",cell:({getValue:e,cell:t})=>a("div",{className:"flex items-center justify-center gap-3",children:a("div",{children:e()?d(e()).format("DD-MM-YY"):""})})},{header:"Pimp",accessorKey:"status_approve_kepala",cell:({getValue:e,cell:t})=>a("div",{className:"flex items-center justify-center gap-3",children:a("div",{children:e()?d(e()).format("DD-MM-YY"):""})})}],[o]),u=A({data:h,columns:D,getCoreRowModel:J(),debugTable:!0}),[H,S]=c.useState(!1),[L,T]=c.useState(),k=e=>{S(!0),T(e)};return a(N,{children:v(j,{className:"w-full mb-3 table-auto",children:[a(V,{className:"sticky top-0 z-10 bg-gray-100",children:u.getHeaderGroups().map((e,t)=>a(i,{children:e.headers.map((r,n)=>a(y,{className:"text-center",children:m(r.column.columnDef.header,r.getContext())},n))},t))}),a(B,{children:u.getRowModel().rows.length?u.getRowModel().rows.map((e,t)=>a(R.Fragment,{children:a(i,{className:"text-center",children:e.getVisibleCells().map(r=>a(b,{className:`${r.column.columnDef.className}`,children:r.column.columnDef.type=="show"?a("div",{className:"flex items-center justify-center gap-2",children:a(w,{value:r.row.original.status,onClick:()=>k(r.row.original)})}):m(r.column.columnDef.cell,r.getContext())},r.id))},t)},t)):a(i,{children:a(b,{colSpan:"4",children:"Belum Ada Catatan Pinjaman"})})}),a(F,{children:u.getFooterGroups().map(e=>a(i,{children:e.headers.map(t=>a(y,{className:"text-center text-black bg-gray-100",children:m(t.column.columnDef.footer,t.getContext())},t.id))},e.id))})]})})};export{I as default};
