import{a as e,q as L,r as o,j as t,c as v,l as Y}from"./app-01dbd2ca.js";import{D as B,a as E,b as O,c as F}from"./dialog-e5ae602b.js";import{C as w,a as D,b as C,d as k}from"./card-7ec1f0b3.js";import{T as y,a as T,b as c,c as r,d as S,e as a,F as A}from"./FormatNumbering-750d2fb1.js";import{B as i}from"./badge-61cfb712.js";import I from"./BayarAngsuran-95d47900.js";import K from"./JenisNasabah-d348251b.js";import R from"./DeleteAngsuran-a9ee9f9a.js";import U from"./DeleteLoan-8e3f9411.js";import{u as J}from"./useFrontEndPermission-7736c5f3.js";import{N as M}from"./NoEditOverlay-5ca8dba7.js";import"./index-4d3b6f23.js";import"./index-0257f697.js";import"./button-e594156b.js";import"./utils-36e2ef84.js";import"./react-icons.esm-e69bb1a2.js";import"./index-e96bcad6.js";import"./react-number-format.es-7ab5d1fe.js";import"./label-a59e5876.js";import"./index-be647e53.js";import"./input-2f9dcac5.js";import"./index.esm-eff4be9d.js";import"./Checkbox-b0b6d04c.js";import"./Loading-bacf33e9.js";import"./transition-37508b69.js";import"./InputError-95ccc56c.js";import"./InputLabel-2f797a2a.js";import"./PrimaryButton-bb92d023.js";import"./SelectList-36b0d6d1.js";import"./TextInput-9ea5dd41.js";const h=({value:l="normal"})=>{switch(l==null?void 0:l.toLowerCase()){case"normal":return e(i,{variant:"outline",children:l});case"cm":return e(i,{variant:"yellow",children:l});case"mb":return e(i,{variant:"destructive",children:l});case"ml":return e(i,{children:l});case"lunas":return e(i,{variant:"green",children:l});case"belum":return e(i,{variant:"outline",children:l});default:return e(i,{children:l})}},De=({datas:l,show:p=!1,onClosed:_,triggeredId:d})=>{const{server_filter:{closed_transaction:u}}=L().props,[q,N]=o.useState(!1),[$,g]=o.useState(!1),{isCreator:P}=J(),[n,f]=o.useState({}),[x,b]=o.useState([]),H=async s=>{N(!0),g(),await Y({method:"get",url:route("pinjaman.get_loan_pinjaman",s)}).then(function({data:m}){N(!1),f(m.pinjaman),b(m.instalment)}).catch(function({response:m}){g()})};o.useEffect(()=>{d&&H(d)},[d,l]);const j=()=>{_(),f({}),b([])};return e(B,{open:p,onOpenChange:s=>s?"":j(),children:t(E,{className:"w-[90vw] h-[90vh] overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin p-1 lg:p-6",children:[e(O,{className:"max-h-10",children:e(F,{className:"p-2",children:"Isi Angsuran"})}),t(w,{className:"w-full",children:[e(D,{children:e(C,{children:"Rincian Pinjaman"})}),e(k,{className:"p-1 lg:p-5",children:e("div",{className:"w-full overflow-auto",children:t(y,{children:[e(T,{className:"bg-gray-200",children:t(c,{children:[e(r,{className:"text-center",children:"Nomor"}),e(r,{className:"text-center",children:"Nasabah"}),e(r,{className:"text-center",children:"NIK"}),e(r,{className:"text-center",children:"Alamat"}),e(r,{className:"text-center",children:"Unit"}),e(r,{className:"text-center",children:"Kelompok"}),e(r,{className:"text-center",children:"Hari"}),e(r,{className:"text-center",children:"Tanggal Drop"}),e(r,{className:"text-center",children:"Pinjaman"}),e(r,{className:"text-center",children:"Nama Mantri"}),e(r,{className:"text-center",children:"Status"}),e(r,{className:"text-center",children:"Ket"}),e(r,{className:"text-center",children:"Lunas"})]})}),e(S,{children:Object.keys(n).length!==0?t(c,{className:"text-center",children:[e(a,{children:n.id}),e(a,{children:n.nama}),e(a,{children:n.nik}),e(a,{children:n.alamat}),e(a,{children:n.branch}),e(a,{children:n.kelompok}),e(a,{children:n.hari}),e(a,{children:v(n.tanggal_drop).format("DD-MM-YYYY")}),e(a,{children:e(A,{value:n.pinjaman})}),e(a,{children:n.mantri}),e(a,{children:e(h,{value:n.status_pinjaman})}),e(a,{children:n.notes}),e(a,{children:e(h,{value:n.lunas?"Lunas":"Belum"})})]}):e(c,{children:e(a,{children:"Menunggu data . . ."})})})]})})})]}),t("div",{className:"flex flex-col w-full gap-3 mt-3 lg:flex-row",children:[t(w,{className:"flex-[5]",children:[e(D,{children:e(C,{children:"Rincian Angsuran"})}),e(k,{className:"p-1 lg:p-5",children:e("div",{className:"w-full overflow-auto",children:t(y,{className:"text-xs",children:[e(T,{className:"bg-gray-200",children:t(c,{children:[e(r,{className:"text-center",children:"Action"}),e(r,{className:"text-center",children:"Tanggal"}),e(r,{className:"text-center",children:"Jumlah"}),e(r,{className:"text-center",children:"Saldo"}),e(r,{className:"hidden text-center lg:table-cell",children:"Mantri"}),e(r,{className:"text-center",children:"Status"})]})}),e(S,{children:Object.keys(n).length!==0?x.map(s=>t(c,{className:"text-center",children:[e(a,{children:(!u||u<=s.transaction_date)&&e(R,{id:s.id})}),e(a,{className:"whitespace-nowrap",children:v(s.transaction_date).format("DD-MM-YY")}),e(a,{className:`${s.danatitipan==1?"text-red-500 font-semibold":""}`,children:e(A,{value:s.nominal})}),e(a,{children:s.saldo}),e(a,{className:"hidden lg:block",children:s.mantri}),t(a,{children:[" ",e(h,{value:s.status})]})]})):e(c,{children:e(a,{children:"Menunggu data . . ."})})})]})})})]}),t("div",{className:"flex-[2] relative",children:[n.lunas==!0?e(M,{value:"Pinjaman Sudah Lunas"}):!P&&e(M,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(I,{triggeredId:n.id,triggeredPinjaman:n,instalment:x}),e(K,{loan:n}),t("div",{className:"flex items-center justify-end gap-3 p-3",children:[e("div",{className:"font-semibold",children:"Hapus Pinjaman"}),e(U,{id:n.id,onClosed:j})]})]})]})]})})};export{De as default};
