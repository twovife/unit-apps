import{G as w,j as e}from"./app-DO76C3E3.js";import{C as l,a as i,b as n,c as T,d as o}from"./card-DA1zrN6o.js";import k from"./Permission-DdZV7V7b.js";import A from"./Role-CiLEW1oq.js";import{A as B}from"./AuthenticatedLayout-CG7mShqr.js";import{L as P}from"./label-CpDjXOYk.js";import"./input-DwlhcL3b.js";import{B as U}from"./button-C-fl-S1l.js";import{S as L}from"./SelectList-BiLXMM1U.js";import{C as D}from"./Checkbox-DlFCLL4P.js";import{I as H}from"./InputLabel-C5Ggt7-o.js";import I from"./AssignRoles-O_c-Mv_q.js";import{B as h}from"./BadgeStatus-CtJIp0Jd.js";import q from"./MaintenerWorker-BVgueCqg.js";import{T as F,a as G,b,c,d as O,e as m}from"./table--NPdN61a.js";import"./utils-CytzSlOG.js";import"./Dropdown-RV4K6N18.js";import"./createLucideIcon-jXp7li3i.js";import"./sweetalert2.esm.all-BM7pmWf1.js";import"./index-D6AYRnJb.js";import"./index-CUUIdV60.js";import"./index-C_t0nbNm.js";import"./index-B8BxFsX0.js";import"./index-Bu0hkCNI.js";import"./Combination-jVFf3XD-.js";import"./index-B1j3GdG3.js";import"./index-DqYLM-FT.js";import"./index-Dd4l0eXE.js";import"./react-icons.esm-Ch7bnm6Z.js";import"./SweetAlert-DJrak4jH.js";import"./Loading-Czmkt1mB.js";import"./transition-DSpz7llH.js";import"./index-C3v6T_6y.js";import"./badge-CZUpd0ql.js";const Ce=({role:t,permission:d,user:v,maintenen_workers:p,...E})=>{const{data:j,setData:u,post:g,reset:N}=w({role:"",permission:[]}),C=s=>{u(s.target.name,s.target.value)},y=s=>{const r=document.querySelectorAll('.checkbox-group input[type="checkbox"]'),S=Array.from(r).filter(a=>a.checked).map(a=>a.name);u(a=>({...a,permission:S}))},x=t.map(s=>({display:s.name,value:s.id,id:s.id})),f=v.map(s=>({display:s.username,value:s.id,id:s.id})),R=s=>{s.preventDefault(),g(route("adminpanel.role_assign"),{onSuccess:()=>{N()}})};return e.jsxs(B,{children:[e.jsxs("div",{className:"flex w-full gap-3 mb-3",children:[e.jsx(k,{}),e.jsx(A,{}),e.jsxs(l,{className:"w-1/2",children:[e.jsxs(i,{children:[e.jsx(n,{children:"Generate Permission"}),e.jsx(T,{children:"Permission"})]}),e.jsx(o,{children:e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"flex flex-col space-y-1.5 mb-3",children:[e.jsx(P,{htmlFor:"role",children:"Role Name"}),e.jsx(L,{options:x,label:"Role",placeholder:"Select Role",required:!0,name:"role",onChange:C,value:j.role,id:"role",nullvalue:!0})]}),e.jsx("div",{className:"flex flex-wrap gap-3 checkbox-group",children:j.role&&d.map((s,r)=>e.jsxs("div",{className:"flex items-center flex-1 gap-3 whitespace-nowrap",children:[e.jsx(D,{name:s.name,onChange:y,placeholder:"Select Permission",id:s.name}),e.jsx(H,{htmlFor:s.name,children:s.name})]},r))}),e.jsx(U,{type:"submit",className:"mt-3",children:"Submit"})]})})]})]}),e.jsxs("div",{className:"flex w-full gap-3",children:[e.jsx(I,{userOptions:f,roleOptions:x}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(n,{children:"User Role"})}),e.jsx(o,{children:e.jsx("div",{className:"flex flex-wrap gap-3",children:d&&d.map((s,r)=>e.jsx(h,{value:s.name},r))})})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(n,{children:"User Role"})}),e.jsx(o,{children:e.jsx("div",{className:"h-[50vh] overflow-auto space-y-3",children:t&&t.map(s=>e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(n,{children:e.jsx(h,{value:"normal",children:s.name})})}),e.jsx(o,{className:"flex gap-1",children:s.permissions.map(r=>e.jsx(h,{value:r.name,children:r.name}))})]}))})})]})}),e.jsxs("div",{className:"flex w-full gap-3 mt-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(q,{userOptions:f,roleOptions:x})}),e.jsx("div",{className:"flex-1",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(n,{children:"User Role"})}),e.jsx(o,{children:e.jsxs(F,{children:[e.jsx(G,{children:e.jsxs(b,{children:[e.jsx(c,{children:"No"}),e.jsx(c,{children:"User"}),e.jsx(c,{children:"Nama"}),e.jsx(c,{children:"Unit"})]})}),e.jsx(O,{children:p&&p.map((s,r)=>e.jsxs(b,{children:[e.jsx(m,{children:r+1}),e.jsx(m,{children:s.username}),e.jsx(m,{children:s.employee.nama_karyawan}),e.jsx(m,{children:s.branch.unit})]},r))})]})})]})})]})]})};export{Ce as default};
