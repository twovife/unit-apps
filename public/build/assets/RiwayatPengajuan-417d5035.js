import{r as o,j as r,a,c as M,R as v,F as D,k as R}from"./app-1513e6ad.js";import{T as N,a as j,b as c,c as S,d as K,e as u}from"./table-7e5d8dfc.js";import{u as k,f as g,g as B}from"./index-2e4ba388.js";import"./button-fa3185df.js";import{F}from"./FormatNumbering-8f8bff39.js";import{B as L}from"./BargeStatus-c0c91ea9.js";import{L as E}from"./Loading-dd9671cb.js";import H from"./ModalShowAngsuran-2efd8777.js";import"./utils-aa679991.js";import"./react-number-format.es-55b240a9.js";import"./transition-d80bb77d.js";import"./dialog-c0b29a8d.js";import"./index-40c8da9e.js";import"./react-icons.esm-5687bae1.js";const W=({data:i})=>{const[h,p]=o.useState([]);o.useEffect(()=>{p(i??[])},[i]);const[f,d]=o.useState(!1),[b,l]=o.useState(!1),[w,m]=o.useState(null),x=async t=>{d(!0),l(!1);try{const e=await R.post(route("transaction.get_instalment_nasabah",t));m(e.data.data),l(!0)}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}},y=()=>{l(!1),m(null)},T=o.useMemo(()=>[{accessorKey:"kelompok",header:"Kelompok",cell:({row:t,getValue:e})=>r("div",{className:"text-start",children:[a("div",{children:t.original.unit}),r("div",{children:["Kel ",e()]})]})},{accessorKey:"drop_date",header:"Tgl Drop",cell:({row:t,getValue:e})=>r("div",{className:"text-start",children:[a("div",{children:t.original.hari}),a("div",{children:M(e()).format("DD-MM-YY")})]})},{accessorKey:"pinjaman",header:"Pinjaman",cell:({row:t,getValue:e})=>a(F,{value:e()})},{accessorKey:"lunas",header:"Lunas",cell:({row:t,getValue:e})=>a("div",{children:e()?"Lunas":"Belum"})},{accessorKey:"status",header:"status",cell:({row:t,getValue:e})=>a(L,{onClick:s=>x(t.original.id),value:e()})}],[]),n=k({data:h,columns:T,getCoreRowModel:B(),debugTable:!0});return r(N,{className:"w-full table-auto",children:[a(E,{show:f}),a(H,{show:b,triggeredData:w,onClosed:y}),a(j,{className:"sticky top-0 z-10 bg-gray-100",children:n.getHeaderGroups().map((t,e)=>a(c,{children:t.headers.map((s,C)=>a(S,{className:"text-center",children:g(s.column.columnDef.header,s.getContext())},C))},e))}),a(K,{children:n.getRowModel().rows.length?n.getRowModel().rows.map((t,e)=>a(v.Fragment,{children:a(D,{children:a(c,{className:`text-center ${t.original.lunas?"bg-green-100 hover:bg-green-50":""}`,children:t.getVisibleCells().map(s=>a(u,{className:`${s.column.columnDef.className}`,children:g(s.column.columnDef.cell,s.getContext())},s.id))},e)})},e)):a(c,{children:a(u,{colSpan:"5",children:"Belum Ada Catatan Pinjaman"})})})]})};export{W as default};
