import{R as C,a as m,r as a}from"./app-b2e3bcc2.js";import{c as G,b as $,u as J,a as w,d as Q}from"./index-c5f589e9.js";import{u as h,S as O}from"./button-225b58b4.js";import{P as L}from"./index-0db32300.js";function W(e){const o=e+"CollectionProvider",[i,n]=G(o),[A,v]=i(o,{collectionRef:{current:null},itemMap:new Map}),b=f=>{const{scope:t,children:s}=f,d=C.useRef(null),r=C.useRef(new Map).current;return m(A,{scope:t,itemMap:r,collectionRef:d,children:s})};b.displayName=o;const g=e+"CollectionSlot",p=C.forwardRef((f,t)=>{const{scope:s,children:d}=f,r=v(g,s),c=h(t,r.collectionRef);return m(O,{ref:c,children:d})});p.displayName=g;const u=e+"CollectionItemSlot",F="data-radix-collection-item",E=C.forwardRef((f,t)=>{const{scope:s,children:d,...r}=f,c=C.useRef(null),S=h(t,c),T=v(u,s);return C.useEffect(()=>(T.itemMap.set(c,{ref:c,...r}),()=>void T.itemMap.delete(c))),m(O,{[F]:"",ref:S,children:d})});E.displayName=u;function I(f){const t=v(e+"CollectionConsumer",f);return C.useCallback(()=>{const d=t.collectionRef.current;if(!d)return[];const r=Array.from(d.querySelectorAll(`[${F}]`));return Array.from(t.itemMap.values()).sort((T,_)=>r.indexOf(T.ref.current)-r.indexOf(_.ref.current))},[t.collectionRef,t.itemMap])}return[{Provider:b,Slot:p,ItemSlot:E},I,n]}var X=a.createContext(void 0);function Z(e){const o=a.useContext(X);return e||o||"ltr"}var M="rovingFocusGroup.onEntryFocus",ee={bubbles:!1,cancelable:!0},x="RovingFocusGroup",[N,K,te]=W(x),[oe,ve]=G(x,[te]),[re,ne]=oe(x),k=a.forwardRef((e,o)=>m(N.Provider,{scope:e.__scopeRovingFocusGroup,children:m(N.Slot,{scope:e.__scopeRovingFocusGroup,children:m(ce,{...e,ref:o})})}));k.displayName=x;var ce=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:i,orientation:n,loop:A=!1,dir:v,currentTabStopId:b,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:p,onEntryFocus:u,preventScrollOnEntryFocus:F=!1,...E}=e,I=a.useRef(null),f=h(o,I),t=Z(v),[s=null,d]=$({prop:b,defaultProp:g,onChange:p}),[r,c]=a.useState(!1),S=J(u),T=K(i),_=a.useRef(!1),[Y,P]=a.useState(0);return a.useEffect(()=>{const l=I.current;if(l)return l.addEventListener(M,S),()=>l.removeEventListener(M,S)},[S]),m(re,{scope:i,orientation:n,dir:t,loop:A,currentTabStopId:s,onItemFocus:a.useCallback(l=>d(l),[d]),onItemShiftTab:a.useCallback(()=>c(!0),[]),onFocusableItemAdd:a.useCallback(()=>P(l=>l+1),[]),onFocusableItemRemove:a.useCallback(()=>P(l=>l-1),[]),children:m(L.div,{tabIndex:r||Y===0?-1:0,"data-orientation":n,...E,ref:f,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{_.current=!0}),onFocus:w(e.onFocus,l=>{const H=!_.current;if(l.target===l.currentTarget&&H&&!r){const D=new CustomEvent(M,ee);if(l.currentTarget.dispatchEvent(D),!D.defaultPrevented){const y=T().filter(R=>R.focusable),j=y.find(R=>R.active),q=y.find(R=>R.id===s),z=[j,q,...y].filter(Boolean).map(R=>R.ref.current);V(z,F)}}_.current=!1}),onBlur:w(e.onBlur,()=>c(!1))})})}),U="RovingFocusGroupItem",B=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:i,focusable:n=!0,active:A=!1,tabStopId:v,...b}=e,g=Q(),p=v||g,u=ne(U,i),F=u.currentTabStopId===p,E=K(i),{onFocusableItemAdd:I,onFocusableItemRemove:f}=u;return a.useEffect(()=>{if(n)return I(),()=>f()},[n,I,f]),m(N.ItemSlot,{scope:i,id:p,focusable:n,active:A,children:m(L.span,{tabIndex:F?0:-1,"data-orientation":u.orientation,...b,ref:o,onMouseDown:w(e.onMouseDown,t=>{n?u.onItemFocus(p):t.preventDefault()}),onFocus:w(e.onFocus,()=>u.onItemFocus(p)),onKeyDown:w(e.onKeyDown,t=>{if(t.key==="Tab"&&t.shiftKey){u.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const s=ie(t,u.orientation,u.dir);if(s!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let r=E().filter(c=>c.focusable).map(c=>c.ref.current);if(s==="last")r.reverse();else if(s==="prev"||s==="next"){s==="prev"&&r.reverse();const c=r.indexOf(t.currentTarget);r=u.loop?ue(r,c+1):r.slice(c+1)}setTimeout(()=>V(r))}})})})});B.displayName=U;var se={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ae(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ie(e,o,i){const n=ae(e.key,i);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return se[n]}function V(e,o=!1){const i=document.activeElement;for(const n of e)if(n===i||(n.focus({preventScroll:o}),document.activeElement!==i))return}function ue(e,o){return e.map((i,n)=>e[(o+n)%e.length])}var Ie=k,Re=B;export{Re as I,Ie as R,ve as a,W as c,Z as u};
