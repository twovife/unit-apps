import{q as T,r as i,y as D,j as e,a,b as I,c as M,d as S,k as _}from"./app-1513e6ad.js";import{I as $}from"./InputError-ff1ce2b5.js";import{I as A}from"./InputLabel-7e6bf775.js";import{P as B}from"./PrimaryButton-24a1d2b3.js";import{T as E}from"./TextInput-a52a2d1e.js";import{A as L}from"./AuthenticatedLayout-96f1f334.js";import{N as Y}from"./react-number-format.es-55b240a9.js";import q from"./OldCustomer-de157f1e.js";import P from"./NewCustomer-8fe50273.js";import"./SweetAlert-09647bae.js";import"./Loading-dd9671cb.js";import"./transition-d80bb77d.js";import"./AppSidebar-f5076252.js";import"./DropdownProfile-b0c5b238.js";import"./button-fa3185df.js";import"./utils-aa679991.js";import"./use-mobile-fce16445.js";import"./input-79bff17c.js";import"./separator-e6bdf748.js";import"./index-40c8da9e.js";import"./react-icons.esm-5687bae1.js";import"./Combination-6c46d091.js";import"./index-1c376abe.js";import"./index-fbaf698f.js";import"./index-3fba9fed.js";import"./createLucideIcon-0dc67ecd.js";import"./user-x-d8428dea.js";import"./Checkbox-da7e107c.js";import"./SelectList-5a93a8d5.js";import"./index.esm-a025e82b.js";function U(N,v,l,o,f,d=null){var w;const{kelompok:r}=T().props,[b,m]=i.useState(!1),[g,p]=i.useState(d?((w=f[0])==null?void 0:w[d])??null:null),c=t=>{p(t)},[h,y]=i.useState({...v}),x=t=>{const{value:C,name:F}=t.target;y({...h,[F]:C})},k=[{id:1,value:"senin",display:"Senin"},{id:2,value:"selasa",display:"Selasa"},{id:3,value:"rabu",display:"Rabu"},{id:4,value:"kamis",display:"Kamis"},{id:5,value:"jumat",display:"Jumat"},{id:6,value:"sabtu",display:"Sabtu"}],s=[];for(let t=1;t<=10;t++)s.push({id:t,value:t,display:`Mantri ${t}`});const n=r==null?void 0:r.map(t=>({id:t,value:t,display:`Mantri ${t}`})),u=l==null?void 0:l.map(t=>{if(d=="wilayah")return{id:t.id,value:t.wilayah,display:`wilayah ${t.wilayah}`};if(d=="unit")return{id:t.id,value:t.unit,display:`${t.unit}`}}),j=o==null?void 0:o.map(t=>({id:t.id,value:t.id,display:`${t.nama_karyawan} - ${t.jabatan} ${t.area!=0?t.area:""}`}));return{serverFilters:h,onServerFilterChange:x,onServerFilterSubmit:t=>{m(!0),D.get(route(N),h)},branchess:u,loading:b,setLoading:m,activeTab:g,setActiveTab:p,handleTabClick:c,transaction_day:k,emps:j,mantriMantri:s,kolompokMantri:n,status_angsuran:[{id:1,value:1,display:"normal"},{id:2,value:2,display:"cm"},{id:3,value:3,display:"mb"},{id:4,value:4,display:"ml"}]}}const ga=({max_date:N,min_date:v,...l})=>{const{emps:o,status_angsuran:f}=U(null,null,null,l.mantri),[d,r]=i.useState(!1),[b,m]=i.useState(),[g,p]=i.useState(),[c,h]=i.useState(),[y,x]=i.useState(),k=s=>{const n=document.getElementById("nik").value;r(!0),m(),p(),x(),_({method:"post",url:route("transaction.getnik"),data:{nik:n}}).then(function({data:u}){p(u.data),h(u.reqistered_customer),x(n),r(!1)}).catch(function({response:u}){m(u.data.message),p(),x(),r(!1)})};return e(L,{auth:l.auth,errors:l.errors,header:"Buku Transaksi",loading:d,children:[a(I,{title:"Batch Upload"}),a("div",{className:"relative",children:e("div",{className:"flex p-4",children:[e("div",{className:"flex-[2]",children:[e("div",{className:"mb-3",children:[a(A,{htmlFor:"nik",value:"Input Nik Customer"}),e("div",{className:"flex items-center justify-start gap-3 mt-1",children:[a(E,{id:"nik",type:"text",name:"nik",required:!0,className:"block",autoComplete:"nik"}),a(B,{title:"Cek",as:"button",type:"button",onClick:k})]}),a($,{message:b,className:"mt-2"})]}),y?c?a(q,{status:f,setLoading:r,max_date:N,min_date:v,emps:o,nik:y,url:route("batchupdate.batch_post"),customer_id:c==null?void 0:c.id}):a(P,{status:f,setLoading:r,max_date:N,min_date:v,emps:o,nik:y,url:route("batchupdate.batch_post")}):"",a("div",{className:"mb-3"})]}),a("div",{className:"flex-[3]",children:e("div",{className:"mb-3",children:[a("div",{className:"text-lg font-semibold",children:"History Pinjaman Customer"}),a("div",{className:"p-4 mb-3 overflow-hidden rounded shadow",children:e("table",{className:"w-full text-sm text-left text-gray-500",children:[a("thead",{className:"sticky top-0 text-xs text-gray-900 uppercase bg-gray-200 whitespace-nowrap",children:e("tr",{children:[a("th",{className:"px-3 py-2",children:"No"}),a("th",{className:"px-3 py-2",children:"Tanggal Drop"}),a("th",{className:"px-3 py-2",children:"Unit"}),a("th",{className:"px-3 py-2",children:"Kelompok"}),a("th",{className:"px-3 py-2",children:"Mantri"}),a("th",{className:"px-3 py-2",children:"Nama Customer"}),a("th",{className:"px-3 py-2",children:"Drop"}),a("th",{className:"px-3 py-2",children:"Lunas"}),a("th",{className:"px-3 py-2",children:"Status"})]})}),a("tbody",{children:g?g.map((s,n)=>e("tr",{children:[a("td",{className:"px-3 py-2",children:n+1}),a("td",{className:"px-3 py-2",children:M(s.tanggal_drop).format("DD-MM-YYYY")}),a("td",{className:"px-3 py-2",children:s.unit}),a("td",{className:"px-3 py-2",children:s.kelompok}),a("td",{className:"px-3 py-2",children:s.mantri_name}),a("td",{className:"px-3 py-2",children:s.customer_name}),a("td",{className:"px-3 py-2",children:a(Y,{value:s.drop,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-2",children:s.lunas}),a("td",{className:"px-3 py-2",children:s.status=="normal"||s.status=="cm"?a(S,{as:"a",href:route("pinjaman.normal.show",s.id),className:"px-5 py-1 font-semibold text-white uppercase bg-green-400 rounded-lg",children:s.status}):s.status=="mb"?a(S,{as:"a",href:route("pinjaman.normal.show",s.id),className:"px-5 py-1 font-semibold text-white uppercase bg-yellow-400 rounded-lg",children:s.status}):a(S,{as:"a",href:route("pinjaman.normal.show",s.id),className:"px-5 py-1 font-semibold text-white uppercase bg-red-400 rounded-lg",children:s.status})})]},n)):a("tr",{children:a("td",{colSpan:3,children:"Data tidak ditemukan"})})})]})})]})})]})})]})};export{ga as default};
