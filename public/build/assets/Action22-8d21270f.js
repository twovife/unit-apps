import{X as _,r as i,a as e,j as r,d as g,f as H}from"./app-f22ec4d4.js";import{D as P,a as O,b as R,c as B}from"./dialog-68458697.js";import{C as f,a as A,b,d as v}from"./card-d0d975d2.js";import{T as D,a as j,b as s,c as t,d as k,e as a}from"./table-f41ea025.js";import{F as w}from"./FormatNumbering-9cedc195.js";import{S as d}from"./StatusPinjaman-40ec7d33.js";import K from"./BayarAngsuran-480c1a73.js";import Y from"./JenisNasabah-5f1133b3.js";import U from"./DeleteAngsuran-1db00f13.js";import"./TextInput-6a8f4baa.js";import"./button-93fa4ceb.js";import"./Loading-bc0d1f00.js";import{u as J}from"./useFrontEndPermission-384b0fe6.js";import{N as T}from"./NoEditOverlay-794d6b4d.js";import"./index-0e685d5a.js";import"./index-463c697e.js";import"./index-e433ecc9.js";import"./Combination-a453c124.js";import"./index-506eafa1.js";import"./react-icons.esm-b6da11e8.js";import"./utils-3f044a58.js";import"./react-number-format.es-22455b8e.js";import"./badge-241baf22.js";import"./label-70a262bf.js";import"./index-a3e9ae68.js";import"./input-a8ee1494.js";import"./index.esm-ea3969ea.js";import"./Checkbox-0d84b6cc.js";import"./InputError-1d5f2b3b.js";import"./InputLabel-caab201a.js";import"./PrimaryButton-529ff080.js";import"./SelectList-2b3c8a01.js";import"./transition-79940a52.js";const we=({datas:S,show:C=!1,onClosed:y,triggeredId:c})=>{const{server_filter:{closed_transaction:m}}=_().props,[F,h]=i.useState(!1),[$,p]=i.useState(!1),{isCreator:L}=J(),[n,u]=i.useState({}),[N,x]=i.useState([]),M=async l=>{h(!0),p(),await H({method:"get",url:route("pinjaman.get_loan_pinjaman",l)}).then(function({data:o}){h(!1),u(o.pinjaman),x(o.instalment)}).catch(function({response:o}){p()})};i.useEffect(()=>{c&&M(c)},[c,S]);const E=()=>{y(),u({}),x([])},I=`https://api.whatsapp.com/send?phone=6281233302284&text=saya%20dari%20%3A%20(%20ganti%20nama%20dan%20dari%20kantor%20mana%20)%0Aminta%20tolong%20untuk%20revisi%20data%20dengan%20nomor%20${c??null}.%0A(%20jangan%20hapus%20nomor%2C%20sebutkan%20revisi%20setelah%20nomor%20)`;return e(P,{open:C,onOpenChange:l=>l?"":E(),children:r(O,{className:"w-[97vw] p-1 lg:p-6",children:[e(R,{className:"max-h-10",children:e(B,{className:"p-2",children:"Isi Angsuransxx"})}),r("div",{className:" h-[90vh] overflow-auto lg:scrollbar-thin scrollbar-none",children:[r(f,{className:"w-full",children:[e(A,{children:e(b,{children:"Rincian Pinjaman"})}),e(v,{className:"p-1 lg:p-5",children:e("div",{className:"w-full overflow-auto",children:r(D,{children:[e(j,{className:"bg-gray-200",children:r(s,{children:[e(t,{className:"text-center",children:"Nomor"}),e(t,{className:"text-center",children:"Nasabah"}),e(t,{className:"text-center",children:"NIK"}),e(t,{className:"text-center",children:"Alamat"}),e(t,{className:"text-center",children:"Unit"}),e(t,{className:"text-center",children:"Kelompok"}),e(t,{className:"text-center",children:"Hari"}),e(t,{className:"text-center",children:"Tanggal Drop"}),e(t,{className:"text-center",children:"Pinjaman"}),e(t,{className:"text-center",children:"Nama Mantri"}),e(t,{className:"text-center",children:"Status"}),e(t,{className:"text-center",children:"Ket"}),e(t,{className:"text-center",children:"Lunas"})]})}),e(k,{children:Object.keys(n).length!==0?r(s,{className:"text-center",children:[e(a,{children:n.id}),e(a,{children:n.nama}),e(a,{children:n.nik}),e(a,{children:n.alamat}),e(a,{children:n.branch}),e(a,{children:n.kelompok}),e(a,{children:n.hari}),e(a,{children:g(n.tanggal_drop).format("DD-MM-YYYY")}),e(a,{children:e(w,{value:n.pinjaman})}),e(a,{children:n.mantri}),e(a,{children:e(d,{value:n.status_pinjaman})}),e(a,{children:n.notes}),e(a,{children:e(d,{value:n.lunas?"Lunas":"Belum"})})]}):e(s,{children:e(a,{children:"Menunggu data . . ."})})})]})})})]}),r("div",{className:"flex flex-col w-full gap-3 mt-3 lg:flex-row",children:[r(f,{className:"flex-[5]",children:[e(A,{children:e(b,{children:"Rincian Angsuran"})}),e(v,{className:"p-1 lg:p-5",children:e("div",{className:"w-full overflow-auto",children:r(D,{className:"text-xs",children:[e(j,{className:"bg-gray-200",children:r(s,{children:[e(t,{className:"text-center",children:"Action"}),e(t,{className:"text-center",children:"Tanggal"}),e(t,{className:"text-center",children:"Jumlah"}),e(t,{className:"text-center",children:"Saldo"}),e(t,{className:"hidden text-center lg:table-cell",children:"Mantri"}),e(t,{className:"text-center",children:"Status"})]})}),e(k,{children:Object.keys(n).length!==0?N.map(l=>r(s,{className:"text-center",children:[e(a,{children:(!m||m<=l.transaction_date)&&e(U,{id:l.id})}),e(a,{className:"whitespace-nowrap",children:g(l.transaction_date).format("DD-MM-YY")}),e(a,{className:`${l.danatitipan==1?"text-red-500 font-semibold":""}`,children:e(w,{value:l.nominal})}),e(a,{children:l.saldo}),e(a,{className:"hidden lg:block",children:l.mantri}),r(a,{children:[" ",e(d,{value:l.status})]})]})):e(s,{children:e(a,{children:"Menunggu data . . ."})})})]})})})]}),r("div",{className:"flex-[2] relative",children:[n.lunas==!0?e(T,{value:"Pinjaman Sudah Lunas"}):!L&&e(T,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(K,{triggeredId:n.id,triggeredPinjaman:n,instalment:N}),e(Y,{loan:n}),r("div",{className:"mt-3 text-red-400 text-tinny text-end",children:["JIKA TERJADI KESALAHAN TERHADAP ANGSURAN INI, BISA LAPORKAN MELALUI TOMBOL DIBAWAH",e("br",{}),e("a",{href:I,target:"_blank",className:"text-blue-500 underline",children:"Laporkan"})]})]})]})]})]})})};export{we as default};
