import{r,X as N,j as e,d as R,R as S}from"./app-Bsan-hbL.js";import{T as M,a as F,b as l,c as x,d as k,e as g,f as O}from"./table-CXMddbom.js";import{u as _,f as u,g as B}from"./index-DZmt5ZHS.js";import{F as i}from"./FormatNumbering-BEgEPop-.js";import{B as m}from"./BargeStatus-DAko14qT.js";import"./button-BTfAz-Ee.js";import"./utils-CytzSlOG.js";import"./react-number-format.es-C_kAinE6.js";import"./index-Bw9YZChn.js";const J=({setOnShowModal:j,setTriggeredData:f,setTriggeredType:h,datas:d})=>{const[p,b]=r.useState([]),{auth:w}=N().props;r.useEffect(()=>{b(d)},[d]);const c=(a=>a.reduce((t,s)=>(Object.keys(s).forEach(o=>{t[o]=(t[o]||0)+(s[o]||0)}),t),{}))(p),y=(a,t)=>{j(!0),f(a),h(t)},T=r.useMemo(()=>[{header:"",accessorKey:"kelompok",cell:({getValue:a,cell:t})=>e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{children:t.row.original.type=="daily"?a():R(t.row.original.tanggal).format("DD-MM")}),w.permissions.includes("can update")&&e.jsx(m,{onClick:()=>y(t.row.original,2),value:t.row.original.status_dayly_approval,children:t.row.original.status_dayly_approval?"Approved":"Open"})]})},{header:"Titipan 9%",accessorKey:"titipan9",cell:({getValue:a})=>e.jsx(i,{value:a()}),footer:a=>e.jsx(i,{value:c.titipan9})},{header:"Tunai",accessorKey:"tunai",cell:({getValue:a})=>e.jsx(i,{value:a()}),footer:a=>e.jsx(i,{value:c.tunai})},{header:"Status",accessorKey:"is_balance",cell:({getValue:a})=>e.jsx(m,{value:a()})}],[c]),n=_({data:p,columns:T,getCoreRowModel:B(),debugTable:!0}),[H,C]=r.useState(!1),[K,v]=r.useState(),D=a=>{C(!0),v(a)};return e.jsx(e.Fragment,{children:e.jsxs(M,{className:"w-full mb-3 table-auto",children:[e.jsx(F,{className:"sticky top-0 z-10 bg-gray-100",children:n.getHeaderGroups().map((a,t)=>e.jsx(l,{children:a.headers.map((s,o)=>e.jsx(x,{className:"text-center",children:u(s.column.columnDef.header,s.getContext())},o))},t))}),e.jsx(k,{children:n.getRowModel().rows.length?n.getRowModel().rows.map((a,t)=>e.jsx(S.Fragment,{children:e.jsx(l,{className:"text-center",children:a.getVisibleCells().map(s=>e.jsx(g,{className:`${s.column.columnDef.className}`,children:s.column.columnDef.type=="show"?e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx(m,{value:s.row.original.status,onClick:()=>D(s.row.original)})}):u(s.column.columnDef.cell,s.getContext())},s.id))},t)},t)):e.jsx(l,{children:e.jsx(g,{colSpan:"4",children:"Belum Ada Catatan Pinjaman"})})}),e.jsx(O,{children:n.getFooterGroups().map(a=>e.jsx(l,{children:a.headers.map(t=>e.jsx(x,{className:"text-center text-black bg-gray-100",children:u(t.column.columnDef.footer,t.getContext())},t.id))},a.id))})]})})};export{J as default};
