import{q as ee,r as f,W as ae,d as W,j as l,F as M,a,y as le}from"./app-a0d29dc0.js";import{u as se,S as m}from"./SelectComponent-910263c6.js";import{B as _}from"./button-04b96693.js";import{I as B}from"./input-153874a3.js";import{M as te,R as ne}from"./react-icons.esm-574d18b9.js";import{L as oe}from"./Loading-aa0339c0.js";import{L as o}from"./label-c2fd6b2d.js";const ue=({urlLink:y=route("home"),localState:F,searchDate:L=!1,labelDate:R="Date",searchMonth:E=!1,labelMonth:q="Bulan",searchPlanText:x=!1,planTextName:h="search",searchHari:G=!1,searchWilayah:K=!1,searchGroupingBranch:H=!1,searchKelompok:J=!1,children:U,nexOrPrevious:r=null,setNexOrPrevious:z})=>{const{selectedSearchParam:g,optWilayah:N,selectedWilayah:v,setSelectedWilayah:A,filteredBranch:O,optKelompok:Q,dayOpt:T}=se(),{server_filter:{hari:k,branch_id:S,month:b,date:C,wilayah:I,kelompok:j}}=ee().props,d=f.useRef(null),{data:n,setData:t,get:V,processing:u}=ae({}),[X,p]=f.useState(!1);console.log(n);const i=e=>{const{name:s,value:c}=e.target;x?s==h?t(w=>{const D={[s]:c};for(const Y in w)Y!==s&&(D[Y]="");return D}):t(w=>({...w,[s]:c,[h]:""})):isNaN(c)?t(s,c):t(s,parseInt(c))},Z=e=>{const{value:s}=e.target;A(s),t({branch_id:""})},$=e=>{e.preventDefault(),V(y)},P=e=>{e.preventDefault(),le.visit(y,{onStart:s=>p(!0),onFinish:s=>p(!1)}),localStorage.setItem(F,JSON.stringify({oldFilter:[],oldPage:1}))};return f.useEffect(()=>{const e={};g?e[h]=g:(S&&(e.branch_id=parseInt(S)),C&&(e.date=C),b&&(e.month=b),I&&(e.wilayah=parseInt(I)),j&&(e.kelompok=parseInt(j)),k&&(e.hari=k)),Object.keys(e).length>0&&t(e)},[]),f.useEffect(()=>{p(u)},[u]),f.useEffect(()=>(r&&(r=="next"?(t(e=>({...e,date:W(e.date).add(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{d.current.click()},500)):r=="previous"&&(t(e=>({...e,date:W(e.date).subtract(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{d.current.click()},500))),()=>{r&&z(null)}),[r]),l(M,{children:[a(oe,{show:u||X}),l("form",{className:"flex flex-col items-end w-full gap-3 lg:w-auto lg:flex-row",onSubmit:$,children:[L&&l("div",{className:"w-full",children:[a(o,{children:R}),a(B,{className:"w-full",type:"date",name:"date",value:n.date,onChange:i,placeholder:"Name of your project"})]}),E&&l("div",{className:"w-full",children:[a(o,{children:q}),a(B,{className:"w-full",type:"month",name:"month",value:n.month,onChange:i,placeholder:"Name of your project"})]}),J&&l("div",{className:"w-full",children:[a(o,{children:"Kelompok"}),a(m,{className:"w-full",value:n.kelompok,options:Q,name:"kelompok",onChange:i})]}),K&&l("div",{className:"w-full",children:[a(o,{children:"Wilayah"}),a(m,{className:"w-full",value:n.wilayah,options:N,name:"wilayah",onChange:i})]}),G&&l("div",{className:"w-full",children:[a(o,{children:"Hari"}),a(m,{className:"w-full",value:n.hari,options:T,name:"hari",onChange:i})]}),H&&l(M,{children:[l("div",{className:"w-full",children:[a(o,{children:"Wilayah"}),a(m,{className:"w-full",required:"true",value:v,options:N,name:"wilayah",onChange:Z})]}),v!==""&&l("div",{className:"w-full",children:[a(o,{children:"Unit"}),a(m,{required:"true",className:"w-full",value:n.branch_id,options:O,name:"branch_id",nullvalue:!0,onChange:i})]})]}),l("div",{className:"flex items-center justify-end col-span-2 gap-3",children:[l(_,{ref:d,variant:"outline",type:"submit",children:[a(te,{className:"h-3.5 w-3.5"}),a("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Cari"})]}),l(_,{variant:"outline",type:"button",onClick:P,children:[a(ne,{}),a("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Reset"})]}),U]})]})]})};export{ue as S};
