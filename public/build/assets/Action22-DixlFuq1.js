import{X as I,r as l,j as e,d as u,e as _}from"./app-CrLrPaf_.js";import{D as H,a as P,b as R,c as O}from"./dialog-nlO1NHj8.js";import{C as N,a as g,b as f,d as A}from"./card-BJTQO6F8.js";import{T as b,a as v,b as r,c as n,d as D,e as a}from"./table-E4MQhmWN.js";import{F as k}from"./FormatNumbering-Bnt4tMx6.js";import{S as o}from"./StatusPinjaman-pPWe81yc.js";import B from"./BayarAngsuran-Amp_zTP9.js";import K from"./JenisNasabah-CW92T1y2.js";import Y from"./DeleteAngsuran-BThGACBa.js";import"./TextInput-_yGM5JXi.js";import"./button-UYpqgAz4.js";import"./Loading-DZelFzHq.js";import"./index-Dju81Q-7.js";import{u as U}from"./useFrontEndPermission-oaueVKgg.js";import{N as w}from"./NoEditOverlay-D_YgvvXX.js";import"./index-qYWmmEBP.js";import"./index-B59vWKhT.js";import"./index-CDEHXsDE.js";import"./Combination-m9WsJKt3.js";import"./index-BUZXZ16a.js";import"./react-icons.esm-dN2OF0xp.js";import"./utils-CytzSlOG.js";import"./react-number-format.es-DKFoYx0c.js";import"./badge-CQ7NUU-j.js";import"./label-B5GTEigF.js";import"./index-Diy2nueY.js";import"./input-ghbYzTkV.js";import"./index.esm-D9N7uCCf.js";import"./Checkbox-x2EBnR1D.js";import"./InputError-XQ1JfOjE.js";import"./InputLabel-D4I_Jd3n.js";import"./PrimaryButton-mA8bumfA.js";import"./SelectList-BEt3J3w-.js";import"./transition-Bj2XrgAE.js";const we=({datas:T,show:S=!1,onClosed:C,triggeredId:i})=>{const{server_filter:{closed_transaction:m}}=I().props,[J,x]=l.useState(!1),[F,d]=l.useState(!1),{isCreator:y}=U(),[s,j]=l.useState({}),[h,p]=l.useState([]),L=async t=>{x(!0),d(),await _({method:"get",url:route("pinjaman.get_loan_pinjaman",t)}).then(function({data:c}){x(!1),j(c.pinjaman),p(c.instalment)}).catch(function({response:c}){d()})};l.useEffect(()=>{i&&L(i)},[i,T]);const M=()=>{C(),j({}),p([])},E=`https://api.whatsapp.com/send?phone=6281233302284&text=saya%20dari%20%3A%20(%20ganti%20nama%20dan%20dari%20kantor%20mana%20)%0Aminta%20tolong%20untuk%20revisi%20data%20dengan%20nomor%20${i??null}.%0A(%20jangan%20hapus%20nomor%2C%20sebutkan%20revisi%20setelah%20nomor%20)`;return e.jsx(H,{open:S,onOpenChange:t=>t?"":M(),children:e.jsxs(P,{className:"w-[97vw] p-1 lg:p-6",children:[e.jsx(R,{className:"max-h-10",children:e.jsx(O,{className:"p-2",children:"Isi Angsuransxx"})}),e.jsxs("div",{className:" h-[90vh] overflow-auto lg:scrollbar-thin scrollbar-none",children:[e.jsxs(N,{className:"w-full",children:[e.jsx(g,{children:e.jsx(f,{children:"Rincian Pinjaman"})}),e.jsx(A,{className:"p-1 lg:p-5",children:e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs(b,{children:[e.jsx(v,{className:"bg-gray-200",children:e.jsxs(r,{children:[e.jsx(n,{className:"text-center",children:"Nomor"}),e.jsx(n,{className:"text-center",children:"Nasabah"}),e.jsx(n,{className:"text-center",children:"NIK"}),e.jsx(n,{className:"text-center",children:"Alamat"}),e.jsx(n,{className:"text-center",children:"Unit"}),e.jsx(n,{className:"text-center",children:"Kelompok"}),e.jsx(n,{className:"text-center",children:"Hari"}),e.jsx(n,{className:"text-center",children:"Tanggal Drop"}),e.jsx(n,{className:"text-center",children:"Pinjaman"}),e.jsx(n,{className:"text-center",children:"Nama Mantri"}),e.jsx(n,{className:"text-center",children:"Status"}),e.jsx(n,{className:"text-center",children:"Ket"}),e.jsx(n,{className:"text-center",children:"Lunas"})]})}),e.jsx(D,{children:Object.keys(s).length!==0?e.jsxs(r,{className:"text-center",children:[e.jsx(a,{children:s.id}),e.jsx(a,{children:s.nama}),e.jsx(a,{children:s.nik}),e.jsx(a,{children:s.alamat}),e.jsx(a,{children:s.branch}),e.jsx(a,{children:s.kelompok}),e.jsx(a,{children:s.hari}),e.jsx(a,{children:u(s.tanggal_drop).format("DD-MM-YYYY")}),e.jsx(a,{children:e.jsx(k,{value:s.pinjaman})}),e.jsx(a,{children:s.mantri}),e.jsx(a,{children:e.jsx(o,{value:s.status_pinjaman})}),e.jsx(a,{children:s.notes}),e.jsx(a,{children:e.jsx(o,{value:s.lunas?"Lunas":"Belum"})})]}):e.jsx(r,{children:e.jsx(a,{children:"Menunggu data . . ."})})})]})})})]}),e.jsxs("div",{className:"flex flex-col w-full gap-3 mt-3 lg:flex-row",children:[e.jsxs(N,{className:"flex-5",children:[e.jsx(g,{children:e.jsx(f,{children:"Rincian Angsuran"})}),e.jsx(A,{className:"p-1 lg:p-5",children:e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs(b,{className:"text-xs",children:[e.jsx(v,{className:"bg-gray-200",children:e.jsxs(r,{children:[e.jsx(n,{className:"text-center",children:"Action"}),e.jsx(n,{className:"text-center",children:"Tanggal"}),e.jsx(n,{className:"text-center",children:"Jumlah"}),e.jsx(n,{className:"text-center",children:"Saldo"}),e.jsx(n,{className:"hidden text-center lg:table-cell",children:"Mantri"}),e.jsx(n,{className:"text-center",children:"Status"})]})}),e.jsx(D,{children:Object.keys(s).length!==0?h.map(t=>e.jsxs(r,{className:"text-center",children:[e.jsx(a,{children:(!m||m<=t.transaction_date)&&e.jsx(Y,{id:t.id})}),e.jsx(a,{className:"whitespace-nowrap",children:u(t.transaction_date).format("DD-MM-YY")}),e.jsx(a,{className:`${t.danatitipan==1?"text-red-500 font-semibold":""}`,children:e.jsx(k,{value:t.nominal})}),e.jsx(a,{children:t.saldo}),e.jsx(a,{className:"hidden lg:block",children:t.mantri}),e.jsxs(a,{children:[" ",e.jsx(o,{value:t.status})]})]})):e.jsx(r,{children:e.jsx(a,{children:"Menunggu data . . ."})})})]})})})]}),e.jsxs("div",{className:"flex-2 relative",children:[s.lunas==!0?e.jsx(w,{value:"Pinjaman Sudah Lunas"}):!y&&e.jsx(w,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e.jsx(B,{triggeredId:s.id,triggeredPinjaman:s,instalment:h}),e.jsx(K,{loan:s}),e.jsxs("div",{className:"mt-3 text-red-400 text-tinny text-end",children:["JIKA TERJADI KESALAHAN TERHADAP ANGSURAN INI, BISA LAPORKAN MELALUI TOMBOL DIBAWAH",e.jsx("br",{}),e.jsx("a",{href:E,target:"_blank",className:"text-blue-500 underline",children:"Laporkan"})]})]})]})]})]})})};export{we as default};
