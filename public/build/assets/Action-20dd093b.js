import{a as e,q as U,r as m,j as n,c as x,k}from"./app-89964f60.js";import{D as E,a as I,b as O,c as F}from"./dialog-cd6574bf.js";import{C,a as T,b as M,d as S}from"./card-662026ea.js";import{T as A,a as B,b as d,c as t,d as _,e as l}from"./table-bf376661.js";import{F as g}from"./FormatNumbering-e171b06a.js";import{B as i}from"./badge-cca44c2f.js";import R from"./BayarAngsuran-2b3aec43.js";import J from"./JenisNasabah-09254b7f.js";import $ from"./DeleteAngsuran-177c7766.js";import q from"./DeleteLoan-8f9dc4c8.js";import{u as W}from"./useFrontEndPermission-3fddc876.js";import{N as Y}from"./NoEditOverlay-b8442ca0.js";import{T as z,C as G,t as Q}from"./sonner-87354e32.js";import{u as V}from"./use-mobile-4a7e3d84.js";import{B as X}from"./BadgeStatus-4c91a3a0.js";import{B as Z}from"./button-662018a0.js";import"./index-07e776c0.js";import"./react-icons.esm-f5117589.js";import"./utils-aa679991.js";import"./react-number-format.es-33d4ddf3.js";import"./label-e1be8c98.js";import"./index-bcb7b51f.js";import"./index-ea477c8f.js";import"./input-dda9d482.js";import"./index.esm-520ad08f.js";import"./Checkbox-e7d1ea02.js";import"./Loading-ceec09d3.js";import"./transition-16898277.js";import"./InputError-bf69eb8a.js";import"./InputLabel-518c5e05.js";import"./PrimaryButton-7a0acf8f.js";import"./SelectList-389240a1.js";import"./TextInput-f8fd75ba.js";import"./createLucideIcon-6426f9be.js";const f=({value:a="normal"})=>{switch(a==null?void 0:a.toLowerCase()){case"normal":return e(i,{variant:"outline",children:a});case"cm":return e(i,{variant:"yellow",children:a});case"mb":return e(i,{variant:"destructive",children:a});case"ml":return e(i,{children:a});case"lunas":return e(i,{variant:"green",children:a});case"belum":return e(i,{variant:"outline",children:a});default:return e(i,{children:a})}},Ue=({datas:a,show:o=!1,onClosed:u,triggeredId:h})=>{const L=V(),{server_filter:{closed_transaction:b}}=U().props,[ae,p]=m.useState(!1),[ne,N]=m.useState(!1),{isCreator:P}=W(),[r,y]=m.useState({}),[v,j]=m.useState([]),H=async s=>{p(!0),N(),await k({method:"get",url:route("pinjaman.get_loan_pinjaman",s)}).then(function({data:c}){p(!1),y(c.pinjaman),j(c.instalment)}).catch(function({response:c}){N()})},K=async s=>{p(!0),N(),await k({method:"get",url:route("pinjaman.checkpengajuan",s)}).then(function({data:c}){p(!1),console.log(c)}).catch(function({response:c}){N()})};m.useEffect(()=>{h&&H(h)},[h,a]);const w=()=>{u(),y({}),j([])};return e(E,{open:o,onOpenChange:s=>s?"":w(),children:n(I,{className:"w-[95vw] p-1 lg:p-6",children:[n(O,{className:"max-h-10",children:[e(F,{className:"p-2",children:"Isi Angsuran"}),e(Z,{type:"button",onClick:()=>K(h)})]}),n("div",{className:"h-[80vh] overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[n(C,{className:"w-full",children:[e(T,{children:e(M,{children:"Rincian Nasabah"})}),e(S,{className:"p-1 lg:p-5",children:n("div",{className:"w-full overflow-auto",children:[e(z,{}),L?e(ee,{customerData:r}):e(D,{customerData:r})]})})]}),n("div",{className:"flex flex-col w-full gap-3 mt-3 lg:flex-row",children:[n(C,{className:"flex-[5]",children:[e(T,{children:e(M,{children:"Rincian Angsuran"})}),e(S,{className:"p-1 lg:p-5",children:e("div",{className:"w-full overflow-auto",children:n(A,{className:"text-xs",children:[e(B,{className:"bg-gray-200",children:n(d,{children:[e(t,{className:"text-center",children:"Action"}),e(t,{className:"text-center",children:"Tanggal"}),e(t,{className:"text-center",children:"Jumlah"}),e(t,{className:"text-center",children:"Saldo"}),e(t,{className:"hidden text-center lg:table-cell",children:"Mantri"}),e(t,{className:"text-center",children:"Status"})]})}),e(_,{children:Object.keys(r).length!==0?v.map(s=>n(d,{className:"text-center",children:[e(l,{children:(!b||b<=s.transaction_date)&&e($,{id:s.id})}),e(l,{className:"whitespace-nowrap",children:x(s.transaction_date).format("DD-MM-YY")}),e(l,{className:`${s.danatitipan==1?"text-red-500 font-semibold":""}`,children:e(g,{value:s.nominal})}),e(l,{children:s.saldo}),e(l,{className:"hidden lg:block",children:s.mantri}),n(l,{children:[" ",e(f,{value:s.status})]})]})):e(d,{children:e(l,{children:"Menunggu data . . ."})})})]})})})]}),n("div",{className:"flex-[2] relative",children:[r.lunas==!0?e(Y,{value:"Pinjaman Sudah Lunas"}):!P&&e(Y,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(R,{triggeredId:r.id,triggeredPinjaman:r,instalment:v}),e(J,{loan:r}),n("div",{className:"flex items-center justify-end gap-3 p-3",children:[e("div",{className:"font-semibold",children:"Hapus Pinjaman"}),e(q,{id:r.id,onClosed:w})]})]})]})]})]})})},D=({customerData:a})=>n(A,{children:[e(B,{className:"bg-gray-200",children:n(d,{children:[e(t,{className:"text-center",children:"Nomor"}),e(t,{className:"text-center",children:"Nasabah"}),e(t,{className:"text-center",children:"NIK"}),e(t,{className:"text-center",children:"Alamat"}),e(t,{className:"text-center",children:"Unit"}),e(t,{className:"text-center",children:"Kelompok"}),e(t,{className:"text-center",children:"Hari"}),e(t,{className:"text-center",children:"Tanggal Drop"}),e(t,{className:"text-center",children:"Pinjaman"}),e(t,{className:"text-center",children:"Nama Mantri"}),e(t,{className:"text-center",children:"Status"}),e(t,{className:"text-center",children:"Ket"}),e(t,{className:"text-center",children:"Lunas"})]})}),e(_,{children:Object.keys(a).length!==0?n(d,{className:"text-center",children:[e(l,{children:a.id}),e(l,{children:a.nama}),e(l,{children:a.nik}),e(l,{children:a.alamat}),e(l,{children:a.branch}),e(l,{children:a.kelompok}),e(l,{children:a.hari}),e(l,{children:x(a.tanggal_drop).format("DD-MM-YYYY")}),e(l,{children:e(g,{value:a.pinjaman})}),e(l,{children:a.mantri}),e(l,{children:e(f,{value:a.status_pinjaman})}),e(l,{children:a.notes}),e(l,{children:e(f,{value:a.lunas?"Lunas":"Belum"})})]}):e(d,{children:e(l,{children:"Menunggu data . . ."})})})]}),ee=({customerData:a})=>{const o=u=>{Q("Nik Telah Dicopy"),navigator.clipboard.writeText(u)};return!a||a.length===0?e("p",{className:"text-center text-muted",children:"Data tidak tersedia."}):e("div",{className:"w-full max-w-md overflow-hidden text-xs bg-white rounded-lg shadow-lg",children:n("div",{className:"p-6 space-y-4",children:[n("div",{className:"pb-4 border-b",children:[e("h3",{className:"text-lg font-semibold text-center text-red-500",children:a.nama}),n("div",{className:"flex items-center justify-center gap-3",children:[n("p",{className:"text-sm text-gray-500",children:["NIK: ",a.nik]}),e("div",{className:"text-blue-500",onClick:()=>o(a.nik),children:e(G,{className:"h-4"})})]}),e("div",{className:"text-center",children:a.alamat})]}),n("div",{className:"space-y-2",children:[n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"Nomor:"}),e("span",{className:"text-gray-800",children:a.id})]}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"Status:"}),e(X,{value:a.status_pinjaman})]}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"Unit:"}),e("span",{className:"text-gray-800",children:a.branch})]}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"Kelompok:"}),e("span",{className:"text-gray-800",children:a.kelompok})]}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"Tanggal Drop:"}),n("span",{className:"text-gray-800",children:[a.hari,", ",x(a.tanggal_drop).format("DD-MM-YYYY")]})]}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"Pinjaman:"}),e("span",{className:`font-bold ${a.acc==="Ya"?"text-green-600":"text-red-600"}`,children:e(g,{className:"text-center",value:a.pinjaman})})]}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"Mantri:"}),e("span",{className:"text-gray-800",children:a.mantri})]}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"Ket:"}),e("span",{className:"text-gray-800",children:a.notes})]}),n("div",{className:"flex justify-between",children:[e("span",{className:"font-medium text-gray-600",children:"LUNAS:"}),e(f,{value:a.lunas?"Lunas":"Belum"})]})]})]})})};export{Ue as default};
