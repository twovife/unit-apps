import{W as L,r as u,j as r,a as e,d as H}from"./app-6385f79d.js";import{C as V}from"./Checkbox-36c26209.js";import{I as Y}from"./InputLabel-c9570e54.js";import{L as E}from"./Loading-0f2c40bc.js";import{T as w,a as T,b as g,c as t,d as I,e as s,F as i}from"./FormatNumbering-f49e2582.js";import{B as P}from"./button-829bf20c.js";import{D as K,a as A,b as G,c as J}from"./dialog-09b1c1dd.js";import{I as U}from"./input-df12d11c.js";import{L as c}from"./index-cbca764f.js";import"./postcss-2cbb0b82.js";import{C as m}from"./index.esm-197ebf38.js";import"./transition-3a3c1133.js";import"./utils-46f1eee5.js";import"./react-number-format.es-57a5655f.js";import"./index-f96983da.js";import"./index-8cca5271.js";import"./react-icons.esm-0262c3a5.js";import"./index-16faf8aa.js";const he=({show:k=!1,onClosed:v,triggeredData:a,staticData:f})=>{const{data:n,setData:p,post:S,reset:N,errors:W,processing:C}=L({id:"",date:"",masuk:"",keluar:"",target:"",baru:"",lama:"",storting:"",drop:"",rencana:"",tanggal_rencana_minggu_depan:"",rencana_minggu_depan:"",target_minggu_depan:""}),[z,q]=u.useState(),[R,b]=u.useState(!1);u.useEffect(()=>{const l=(f==null?void 0:f.flat(2))??[];if(a){const h=l.filter(o=>o.request_date===a.tanggal&&o.tanggal_drop!=o.request_date),x=[...new Set(h.map(o=>o.tanggal_drop))],_=x.length===1?x[0]:x.length===0?b(!1):b(!0);console.log(_);const j=h.reduce((o,B)=>o+B.acc,0);p({id:a.grouping_id??null,date:a.tanggal,target:a.target,masuk:a.drop*.13,keluar:a.keluar??0,baru:a.baru,lama:a.lama,storting:a.storting,drop:a.drop,rencana:a.rencana,tanggal_rencana_minggu_depan:_??null,rencana_minggu_depan:j??0,target_minggu_depan:0}),q(_??null)}},[a,k]),u.useEffect(()=>{p("target_minggu_depan",parseInt(n.target)+(parseInt(n.masuk)-parseInt(n.keluar)))},[n.target,n.masuk,n.keluar]);const[y,Q]=u.useState(!1),F=l=>{p(l.target.name,l.target.type==="checkbox"?l.target.checked:l.target.value)},d=(l,h)=>{p(h,l)},M=()=>{v(),N(),b(!1)},O=l=>{l.preventDefault(),S(route("kasir.rekap.ceklist_kepala"),{onSuccess:()=>{N(),v()}})};return r(K,{open:k,onOpenChange:l=>l?"":M(),children:[e(E,{show:y||C}),r(A,{className:"w-[90vw] h-[90vh] lg:h-auto lg:max-w-xl overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[e(G,{children:e(J,{children:"Cek Transaksi"})}),y?e("div",{children:"Data Sedang Dimuat"}):r("div",{children:[a&&r("div",{children:[r(w,{className:"mb-3",children:[e(T,{children:r(g,{children:[e(t,{className:"text-center",children:"Total Transaksi"}),e(t,{className:"text-center",children:"Transaksi Open"}),e(t,{className:"text-center",children:"Transaksi Tolak"}),e(t,{className:"text-center",children:"Transaksi Gagal"}),e(t,{className:"text-center",children:"Transaksi Berhasil"})]})}),e(I,{children:r(g,{children:[e(s,{children:e(i,{className:"text-center",value:n.target})}),e(s,{children:e(i,{className:"text-center",value:a.drop})}),e(s,{children:e(i,{className:"text-center",value:a.storting})}),e(s,{children:e(i,{className:"text-center",value:a.baru})}),e(s,{children:e(i,{className:"text-center",value:a.baru})})]})})]}),e("br",{}),e("h1",{className:"mb-1",children:"Transaksi Hari Ini"}),r(w,{children:[e(T,{children:r(g,{children:[e(t,{className:"text-center",children:"Target"}),e(t,{className:"text-center",children:"Drop"}),e(t,{className:"text-center",children:"Storting"}),e(t,{className:"text-center",children:"Baru"}),e(t,{className:"text-center",children:"Lama"}),e(t,{className:"text-center",children:"Rencana"})]})}),e(I,{children:r(g,{children:[e(s,{children:e(i,{className:"text-center",value:n.target})}),e(s,{children:e(i,{className:"text-center",value:a.drop})}),e(s,{children:e(i,{className:"text-center",value:a.storting})}),e(s,{children:e(i,{className:"text-center",value:a.baru})}),e(s,{children:e(i,{className:"text-center",value:a.lama})}),e(s,{children:e(i,{className:"text-center",value:a.rencana})})]})})]})]}),!(a!=null&&a.is_approved)&&r("form",{onSubmit:O,children:[r("div",{className:"max-h-[60vh] overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[!(a!=null&&a.is_generated)&&r("div",{className:"mb-3",children:[e(c,{htmlFor:"target",children:"Target"}),e(m,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"target",readOnly:n.status_dayly_approval,allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:d,value:n.target,placeholder:"Inputkan angka tanpa sparator"})]}),e("br",{}),e("p",{className:"mb-1 italic font-thin text-gray-500",children:"Sebelum Ceklist, Diharapkan Semua Storting, Rencana, target dan drop sudah sesuai, tidak diperbolehkan ada transaksi yang masih Open"}),r("div",{className:"mb-3",children:[e(c,{htmlFor:"masuk",children:"Masuk"}),e(m,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"masuk",readOnly:n.status_dayly_approval,allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:d,value:n.masuk,placeholder:"Inputkan angka tanpa sparator"})]}),r("div",{className:"mb-3",children:[e(c,{htmlFor:"keluar",children:"Keluar"}),e(m,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"keluar",readOnly:n.status_dayly_approval,allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:d,value:n.keluar,placeholder:"Inputkan angka tanpa sparator"})]}),e("p",{className:"mb-3 font-semibold underline",children:"Transaksi Minggu Depan"}),r("div",{className:"mb-3",children:[e(c,{htmlFor:"tanggal_minggu_depan",children:"Tanggal Rencana Drop Minggu Depan"}),e(U,{name:"tanggal_rencana_minggu_depan",readOnly:n.tanggal_rencana_minggu_depan,min:H(n.date).add("1","week").format("YYYY-MM-DD"),required:!0,onChange:F,type:"date",value:n.tanggal_rencana_minggu_depan,placeholder:"Inputkan angka tanpa sparator"}),R&&e("small",{className:"text-red-500 ",children:"Periksa Kembali, Pengajuan Memiliki 2 Tanggal Drop Yang Berbeda"}),n.tanggal_rencana_minggu_depan==null&&e("small",{className:"text-red-500 ",children:"Tidak Ada Pengajuan Untuk Minggu Depan, Isikan Tanggal Secara Manual"})]}),r("div",{className:"mb-3",children:[e(c,{htmlFor:"rencana_minggu_depan",children:"Rencana Drop Minggu Depan"}),e(m,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"rencana_minggu_depan",allowDecimals:!1,readOnly:n.status_dayly_approval,prefix:"Rp. ",min:1,required:!0,onValueChange:d,value:n.rencana_minggu_depan,placeholder:"Inputkan angka tanpa sparator"})]}),r("div",{className:"mb-3",children:[e(c,{htmlFor:"target_minggu_depan",children:"Target Minggu Depan"}),e(m,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"target_minggu_depan",allowDecimals:!1,readOnly:n.status_dayly_approval,prefix:"Rp. ",min:1,required:!0,onValueChange:d,value:parseInt(n.target)+(parseInt(n.masuk)-parseInt(n.keluar)),placeholder:"Inputkan angka tanpa sparator"})]}),r("div",{className:"flex items-center justify-start flex-1 gap-3 mb-1 whitespace-nowrap",children:[e(V,{readOnly:n.status_dayly_approval,placeholder:"Select Permission",id:"daily_kepala_approval",required:!0}),e(Y,{htmlFor:"daily_kepala_approval",children:"Konfirmasi Jika Sudah Benar Semua"})]})]}),e("div",{className:"mb-3 text-right",children:e(P,{type:"submit",children:"Submit"})})]})]})]})]})};export{he as default};
