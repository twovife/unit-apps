import{q as _,r,a as s,F as l,j as a,e as w}from"./app-7b69931c.js";import{D as y,a as A,b as P,c as C}from"./dialog-1e07db2c.js";import{C as o,a as m,b as u,d as p}from"./card-e484241e.js";import"./tabs-d19ba52a.js";import"./FormatNumbering-02ecbda9.js";import"./button-bd7263cf.js";import T from"./Acc-70cee61f.js";import"./Loading-9e7e0dfa.js";import E from"./DropJadi-c60a9293.js";import R from"./Gagal-bf7eb1c4.js";import q from"./DetailTableOnAction-d893a90a.js";import H from"./RemoveLoan-9b05ceca.js";import J from"./ReStatus-1d1c7390.js";import M from"./ChangeDetail-0bc76d67.js";import{B as b}from"./badge-3c2d98e8.js";import"./index-ef8a41d0.js";import"./react-icons.esm-a00228cc.js";import"./index-b8d5088e.js";import"./utils-46f1eee5.js";import"./index-c60c69a6.js";import"./react-number-format.es-99fb3283.js";import"./index-f96983da.js";import"./label-d8a7db97.js";import"./index-f894655a.js";import"./index.esm-b9f414c4.js";import"./transition-bf082270.js";import"./SelectList-2051ff9d.js";import"./input-644d7f78.js";const he=({show:k=!1,onClosed:i,triggeredData:n})=>{const{auth:h}=_().props,[e,x]=r.useState([]),[O,f]=r.useState([]),[z,j]=r.useState(),[N,c]=r.useState(!1),[v,d]=r.useState(!1);r.useEffect(()=>{x(n),j(n==null?void 0:n.request)},[n]);const S=async g=>{c(!0),d(),await w({method:"post",url:route("transaction.nasabah_buku_transaksi"),data:{nik:n.nik}}).then(function({data:t}){c(!1),t.falidate_nik?f(t.data):f([])}).catch(function({response:t}){d(t.data.message),c(!1)})};return r.useEffect(()=>{n!=null&&n.nik&&S()},[n]),s(l,{children:s(y,{open:k,onOpenChange:g=>g?"":i(),children:a(A,{className:"w-[90vw] h-[90vh] lg:h-auto overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin p-2",children:[v&&s("div",{children:"terjadi kesalahan saat memuat data"}),N?s("div",{children:"Data Sedang Dimuat"}):a(l,{children:[s(P,{children:s(C,{children:"Check Transaksi Mantri"})}),a(o,{children:[s(m,{children:s(u,{children:"Detail Pengajuan"})}),s(p,{className:"p-1 space-y-2",children:s("div",{className:"overflow-auto border rounded-lg scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:s(q,{datas:e})})})]}),a("div",{className:"flex flex-col gap-3 mt-3 lg:flex-row",children:[a(o,{className:"w-full",children:[s(m,{children:s(u,{children:"ACC / DROP"})}),a(p,{className:"space-y-2",children:[(e==null?void 0:e.status)=="open"&&h.permissions.includes("can update")&&s("div",{className:"flex items-end justify-center gap-2 mx-auto mb-3",children:s(T,{id:e==null?void 0:e.nomor_pengajuan,acc:e==null?void 0:e.request,onClosed:i})}),(e==null?void 0:e.status)!=="open"&&a(l,{children:[a(b,{size:"lg",variant:"green",children:["Status Pengajuan = ",e==null?void 0:e.status,", Pada Tanggal",e==null?void 0:e.check_date]}),a("div",{className:"flex items-end justify-center gap-2 mx-auto",children:[(e==null?void 0:e.status)==="acc"&&a(l,{children:[s(E,{id:e==null?void 0:e.nomor_pengajuan,drop_jadi:e==null?void 0:e.acc,onClosed:i}),s(R,{id:e==null?void 0:e.nomor_pengajuan,onClosed:i})]}),(e==null?void 0:e.status)==="success"||(e==null?void 0:e.status)==="gagal"&&a(b,{size:"lg",variant:"green",children:["Status Pengajuan = ",e==null?void 0:e.status,", Tanggal"," ",e==null?void 0:e.check_date]})]})]})]})]}),h.permissions.includes("can update")&&a(o,{className:"w-full",children:[s(m,{children:s(u,{children:"Admin Edit"})}),s(p,{className:"space-y-2",children:a("div",{children:[a("div",{className:"w-full mb-3 text-start",children:[s("p",{className:"font-semibold",children:"Hapus Pengajuan"}),s("p",{className:"mb-1 text-xs italic font-light text-gray-500",children:"Jika Pengajuan Sudah Memiliki Angsuran maka akan terhapus semua"}),s(H,{triggeredId:e==null?void 0:e.nomor_pengajuan,onClosed:i})]}),(e==null?void 0:e.drop_langsung)=="lama"&&a("div",{className:"w-full mb-3 text-start",children:[s("p",{className:"font-semibold ",children:"Restatus"}),s("p",{className:"mb-1 text-xs italic font-light text-gray-500",children:"Jika Pengajuan Sudah Memiliki Angsuran maka akan terhapus semua"}),s(J,{triggeredId:e==null?void 0:e.nomor_pengajuan,onClosed:i})]}),e&&s(M,{onClosed:i,triggeredData:n})]})})]})]})]})]})})})};export{he as default};
