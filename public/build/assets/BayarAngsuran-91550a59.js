import{r as c,X as I,G as j,j as r,a}from"./app-d484a7d2.js";import{C as D,a as A,b as E,d as L}from"./card-983e7773.js";import{L as h}from"./label-adfb4101.js";import{I as T}from"./input-9db99b79.js";import{C as B}from"./index.esm-1326f15a.js";import{C as F}from"./Checkbox-4a6dc653.js";import{B as t}from"./button-8c0bc7cc.js";import{L as H}from"./Loading-8de321b5.js";import"./utils-3f044a58.js";import"./index-46c17673.js";import"./index-73a971cd.js";import"./index-98ca6607.js";import"./transition-34aa8e6f.js";const $=({triggeredId:d,triggeredPinjaman:m,instalment:u})=>{const[f,x]=c.useState({});c.useEffect(()=>{x(m)},[m]);const{server_filter:{closed_transaction:C,today:g}}=I().props,{data:l,setData:o,post:y,errors:V,processing:k,reset:z,recentlySuccessful:N}=j({type_transaksi:"bayar",transaction_date:"",nominal:0,id:""});c.useEffect(()=>{o("id",d)},[d,N]);const R=(e,i)=>{o(i,e)},p=e=>{o(e.target.name,e.target.type==="checkbox"?e.target.checked:e.target.value)},n=e=>{const i=e.target.getAttribute("data-value");o("nominal",i)},b=e=>{const i=parseInt(l.nominal),s=parseInt(e.target.getAttribute("data-value"));o("nominal",s+i)},_=e=>{e.preventDefault(),y(route("pinjaman.bayar_pinjaman",l.id),{preserveScroll:!0,onSuccess:()=>{z("transaction_date","nominal")}})},[v,w]=c.useState(0);return c.useEffect(()=>{var i;const e=((i=u==null?void 0:u.sort((s,S)=>s.saldo-S.saldo)[0])==null?void 0:i.saldo)??0;o(s=>({...s,transaction_date:g})),w(e)},[u]),r(D,{className:"relative w-full mb-3",children:[a(H,{show:k}),a(A,{children:a(E,{children:"Isi Angsuran"})}),a(L,{className:"relative",children:r("form",{onSubmit:_,children:[r("div",{className:"mb-3",children:[a(h,{htmlFor:"transaction_date",children:"Tanggal Pembayaran"}),a(T,{type:"date",min:C,name:"transaction_date",id:"transaction_date",className:"w-full",value:l.transaction_date,onChange:p})]}),r("div",{className:"mb-3",children:[a(h,{htmlFor:"nominal",children:"Nominal"}),a(B,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"nominal",allowDecimals:!1,prefix:"Rp. ",min:0,required:!0,onValueChange:R,value:l.nominal,placeholder:"Inputkan angka tanpa sparator"})]}),r("div",{className:"flex flex-wrap gap-3",children:[a(t,{type:"button",variant:"outline",size:"xs",onClick:b,"data-value":5e3,children:"+5 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:b,"data-value":1e4,children:"+10 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":5e4,children:"50 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":52e3,children:"52 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":6e4,children:"60 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":65e3,children:"65 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":1e5,children:"100 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":13e4,children:"130 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":195e3,children:"195 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":26e4,children:"260 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":39e4,children:"390 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":v,children:v})]}),r("div",{className:"flex items-center justify-between mt-6",children:[a("div",{children:f.status_pinjaman!=="normal"&&r("label",{className:"flex items-center",children:[a(F,{name:"danatitipan",value:l.danatitipan,onChange:p}),a("span",{className:"ml-2 text-sm text-gray-600",children:"Dana Titipan?"})]})}),a(t,{type:"submit",children:"Submit"})]})]})})]})};export{$ as default};
