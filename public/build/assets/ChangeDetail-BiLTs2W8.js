import{G as d,r as e,j as s}from"./app-CqcR4o-I.js";import{L as _}from"./Loading-Gaw3zRP9.js";import{N as x}from"./NoEditOverlay-Rde-VDlX.js";import{u as f}from"./useFrontEndPermission-CNw0hFKA.js";import{B as j}from"./button-C3Yf6trC.js";import"./input-CkHiLFyH.js";import"./label-BIauyaOn.js";import"./index.esm-CXWYZSXO.js";import"./index-BVWlmGlD.js";import"./transition-PZ5ySWFT.js";import"./index-C4zUF3DV.js";import"./utils-CytzSlOG.js";import"./index-Dif-k1Vk.js";import"./index-B1bOsdhx.js";const O=({triggeredData:n,onClosed:a})=>{const{isUnit:h,isMantri:t,isPusat:v,isCreator:b}=f(),{setData:r,put:i,processing:p,reset:m,transform:l}=d({request_date:"",drop_date:"",request_nominal:"",approved_nominal:"",nominal_drop:"",drop_langsung:""}),[y,E]=e.useState(null);e.useEffect(()=>{n&&r(o=>({...o,request_date:n.request_date,drop_date:n.tanggal_drop,drop_langsung:n.drop_langsung,request_nominal:n.drop_langsung=="baru"?n.drop_jadi:n.request,approved_nominal:n.acc,nominal_drop:n.drop_jadi}))},[n]);const u=o=>{l(c=>({...c,updateType:o})),i(route("transaction.updateEverything",n==null?void 0:n.nomor_pengajuan),{preventDefault:!0,preserveState:!0,onSuccess:()=>{m(),a()}})};return s.jsxs("form",{onSubmit:o=>o.preventDefault(),children:[t&&s.jsx(x,{value:"Hanya bisa dilakukan oleh Pimpinan / Staff"}),s.jsx(_,{show:p}),s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-xs text-blue-500",children:"Perubahan Nominal Mempengaruhi Perolehan Drop dan Rencana Drop"}),s.jsx("div",{className:"text-xs text-yellow-500",children:"Reset Pinjaman akan menghilangkan semua data angsuran pada pinjaman ini"})]}),s.jsx("div",{className:"flex items-center justify-between",children:(n==null?void 0:n.drop_langsung)=="lama"&&s.jsx(j,{onClick:()=>u("resetdata"),variant:"yellow",type:"submit",children:"Reset Pinjaman"})})]})};export{O as default};
