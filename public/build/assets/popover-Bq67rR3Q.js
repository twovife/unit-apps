import{c as we}from"./createLucideIcon-ECJng_XK.js";import{X as ye,r as l,G as Re,d as z,j as e,A as Ne}from"./app-Bsan-hbL.js";import{u as be,S as w}from"./SelectComponent-D5QwTQMG.js";import{B as U}from"./button-BTfAz-Ee.js";import{I as q}from"./input-Bk0zIvVP.js";import{M as _e,R as Ae}from"./react-icons.esm-DJJESdcN.js";import{L as Oe}from"./Loading-Jv5zIVar.js";import{L as v}from"./label-B1zOyRN6.js";import{b as Se,c as ke,d as Ee,a as _,P as J}from"./index-CllpLVO4.js";import{u as V,S as Fe}from"./index-Bw9YZChn.js";import{P as De,h as Ie,R as Me,u as Te,F as Le,D as Ye}from"./Combination-BaaRh1u0.js";import{c as X,R as We,A as Z,C as Be,a as Ge}from"./index-DNhf5Xbz.js";import{P as Q}from"./index-DKyg3hKi.js";import{c as $e}from"./utils-CytzSlOG.js";/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=we("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Po=({urlLink:o=route("home"),localState:s,searchDate:r=!1,labelDate:n="Date",searchMonth:t=!1,labelMonth:a="Bulan",searchPlanText:i=!1,planTextName:c="search",searchHari:u=!1,searchWilayah:p=!1,searchGroupingBranch:C=!1,searchBranch:j=!1,searchKelompok:h=!1,children:R,nexOrPrevious:N=null,setNexOrPrevious:ue})=>{const{selectedSearchParam:I,optWilayah:M,optBranch:pe,selectedWilayah:T,setSelectedWilayah:fe,filteredBranch:he,optKelompok:me,dayOpt:ve}=be(),{server_filter:{hari:L,branch_id:Y,month:W,date:B,wilayah:G,kelompok:$}}=ye().props,O=l.useRef(null),{data:x,setData:m,get:ge,processing:S}=Re({}),[xe,k]=l.useState(!1),P=d=>{const{name:f,value:b}=d.target;i?f==c?m(E=>{const H={[f]:b};for(const K in E)K!==f&&(H[K]="");return H}):m(E=>({...E,[f]:b,[c]:""})):isNaN(b)?m(f,b):m(f,parseInt(b))},Pe=d=>{const{value:f}=d.target;fe(f),m({branch_id:""})},Ce=d=>{d.preventDefault(),ge(o)},je=d=>{d.preventDefault(),Ne.visit(o,{onStart:f=>k(!0),onFinish:f=>k(!1)}),localStorage.setItem(s,JSON.stringify({oldFilter:[],oldPage:1}))};return l.useEffect(()=>{const d={};I?d[c]=I:(Y&&(d.branch_id=parseInt(Y)),B&&(d.date=B),W&&(d.month=W),G&&(d.wilayah=parseInt(G)),$&&(d.kelompok=parseInt($)),L&&(d.hari=L)),Object.keys(d).length>0&&m(d)},[]),l.useEffect(()=>{k(S)},[S]),l.useEffect(()=>(N&&(N=="next"?(m(d=>({...d,date:z(d.date).add(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{O.current.click()},500)):N=="previous"&&(m(d=>({...d,date:z(d.date).subtract(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{O.current.click()},500))),()=>{N&&ue(null)}),[N]),e.jsxs(e.Fragment,{children:[e.jsx(Oe,{show:S||xe}),e.jsxs("form",{className:"flex flex-col items-end w-full gap-3 lg:w-auto lg:flex-row",onSubmit:Ce,children:[r&&e.jsxs("div",{className:"w-full",children:[e.jsx(v,{children:n}),e.jsx(q,{className:"w-full",type:"date",name:"date",value:x.date,onChange:P,placeholder:"Name of your project"})]}),t&&e.jsxs("div",{className:"w-full",children:[e.jsx(v,{children:a}),e.jsx(q,{className:"w-full",type:"month",name:"month",value:x.month,onChange:P,placeholder:"Name of your project"})]}),h&&e.jsxs("div",{className:"w-full",children:[e.jsx(v,{children:"Kelompok"}),e.jsx(w,{className:"w-full",value:x.kelompok,options:me,name:"kelompok",onChange:P})]}),p&&e.jsxs("div",{className:"w-full",children:[e.jsx(v,{children:"Wilayah"}),e.jsx(w,{className:"w-full",value:x.wilayah,options:M,name:"wilayah",onChange:P})]}),j&&e.jsxs("div",{className:"w-full",children:[e.jsx(v,{children:"Unit"}),e.jsx(w,{className:"w-full",value:x.branch_id,options:pe,name:"branch_id",onChange:P})]}),u&&e.jsxs("div",{className:"w-full",children:[e.jsx(v,{children:"Hari"}),e.jsx(w,{className:"w-full",value:x.hari,options:ve,name:"hari",onChange:P})]}),C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsx(v,{children:"Wilayah"}),e.jsx(w,{className:"w-full",required:"true",value:T,options:M,name:"wilayah",onChange:Pe})]}),T!==""&&e.jsxs("div",{className:"w-full",children:[e.jsx(v,{children:"Unit"}),e.jsx(w,{required:"true",className:"w-full",value:x.branch_id,options:he,name:"branch_id",nullvalue:!0,onChange:P})]})]}),e.jsxs("div",{className:"flex items-center justify-end col-span-2 gap-3",children:[e.jsxs(U,{ref:O,variant:"outline",type:"submit",children:[e.jsx(_e,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Cari"})]}),e.jsxs(U,{variant:"outline",type:"button",onClick:je,children:[e.jsx(Ae,{}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Reset"})]}),R]})]})]})};var F="Popover",[ee,Co]=ke(F,[X]),A=X(),[He,g]=ee(F),oe=o=>{const{__scopePopover:s,children:r,open:n,defaultOpen:t,onOpenChange:a,modal:i=!1}=o,c=A(s),u=l.useRef(null),[p,C]=l.useState(!1),[j=!1,h]=Se({prop:n,defaultProp:t,onChange:a});return e.jsx(We,{...c,children:e.jsx(He,{scope:s,contentId:Ee(),triggerRef:u,open:j,onOpenChange:h,onOpenToggle:l.useCallback(()=>h(R=>!R),[h]),hasCustomAnchor:p,onCustomAnchorAdd:l.useCallback(()=>C(!0),[]),onCustomAnchorRemove:l.useCallback(()=>C(!1),[]),modal:i,children:r})})};oe.displayName=F;var te="PopoverAnchor",Ke=l.forwardRef((o,s)=>{const{__scopePopover:r,...n}=o,t=g(te,r),a=A(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=t;return l.useEffect(()=>(i(),()=>c()),[i,c]),e.jsx(Z,{...a,...n,ref:s})});Ke.displayName=te;var re="PopoverTrigger",ae=l.forwardRef((o,s)=>{const{__scopePopover:r,...n}=o,t=g(re,r),a=A(r),i=V(s,t.triggerRef),c=e.jsx(Q.button,{type:"button","aria-haspopup":"dialog","aria-expanded":t.open,"aria-controls":t.contentId,"data-state":ce(t.open),...n,ref:i,onClick:_(o.onClick,t.onOpenToggle)});return t.hasCustomAnchor?c:e.jsx(Z,{asChild:!0,...a,children:c})});ae.displayName=re;var D="PopoverPortal",[ze,Ue]=ee(D,{forceMount:void 0}),se=o=>{const{__scopePopover:s,forceMount:r,children:n,container:t}=o,a=g(D,s);return e.jsx(ze,{scope:s,forceMount:r,children:e.jsx(J,{present:r||a.open,children:e.jsx(De,{asChild:!0,container:t,children:n})})})};se.displayName=D;var y="PopoverContent",ne=l.forwardRef((o,s)=>{const r=Ue(y,o.__scopePopover),{forceMount:n=r.forceMount,...t}=o,a=g(y,o.__scopePopover);return e.jsx(J,{present:n||a.open,children:a.modal?e.jsx(qe,{...t,ref:s}):e.jsx(Je,{...t,ref:s})})});ne.displayName=y;var qe=l.forwardRef((o,s)=>{const r=g(y,o.__scopePopover),n=l.useRef(null),t=V(s,n),a=l.useRef(!1);return l.useEffect(()=>{const i=n.current;if(i)return Ie(i)},[]),e.jsx(Me,{as:Fe,allowPinchZoom:!0,children:e.jsx(le,{...o,ref:t,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_(o.onCloseAutoFocus,i=>{var c;i.preventDefault(),a.current||(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:_(o.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,p=c.button===2||u;a.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:_(o.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Je=l.forwardRef((o,s)=>{const r=g(y,o.__scopePopover),n=l.useRef(!1),t=l.useRef(!1);return e.jsx(le,{...o,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,c;(i=o.onCloseAutoFocus)==null||i.call(o,a),a.defaultPrevented||(n.current||(c=r.triggerRef.current)==null||c.focus(),a.preventDefault()),n.current=!1,t.current=!1},onInteractOutside:a=>{var u,p;(u=o.onInteractOutside)==null||u.call(o,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(t.current=!0));const i=a.target;((p=r.triggerRef.current)==null?void 0:p.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&t.current&&a.preventDefault()}})}),le=l.forwardRef((o,s)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:t,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:C,...j}=o,h=g(y,r),R=A(r);return Te(),e.jsx(Le,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:t,onUnmountAutoFocus:a,children:e.jsx(Ye,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:C,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:p,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(Be,{"data-state":ce(h.open),role:"dialog",id:h.contentId,...R,...j,ref:s,style:{...j.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ie="PopoverClose",Ve=l.forwardRef((o,s)=>{const{__scopePopover:r,...n}=o,t=g(ie,r);return e.jsx(Q.button,{type:"button",...n,ref:s,onClick:_(o.onClick,()=>t.onOpenChange(!1))})});Ve.displayName=ie;var Xe="PopoverArrow",Ze=l.forwardRef((o,s)=>{const{__scopePopover:r,...n}=o,t=A(r);return e.jsx(Ge,{...t,...n,ref:s})});Ze.displayName=Xe;function ce(o){return o?"open":"closed"}var Qe=oe,eo=ae,oo=se,de=ne;const jo=Qe,wo=eo,to=l.forwardRef(({className:o,align:s="center",sideOffset:r=4,...n},t)=>e.jsx(oo,{children:e.jsx(de,{ref:t,align:s,sideOffset:r,className:$e("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-hidden data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...n})}));to.displayName=de.displayName;export{xo as F,jo as P,Po as S,wo as a,to as b};
