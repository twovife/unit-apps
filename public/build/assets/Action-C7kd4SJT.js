import{r,j as a,e as k}from"./app-hJcCqjW3.js";import{D as L,a as S,b as D,c as E,d as M}from"./dialog-DAJA04U4.js";import{A as _,a as P,b as R,c as K}from"./accordion-CSpgeRAG.js";import{C as o,a as c,b as m,d}from"./card-BnWaktMe.js";import{T as U,a as H,b as h,c as u}from"./tabs-BrHYW8HQ.js";import j from"./RiwayatPengajuan-BUpTMSc2.js";import q from"./Acc-DHFHnmR4.js";import J from"./ActionTable-DlJkWqXM.js";import O from"./RemoveLoan-Ca7tJz_p.js";import"./Loading-D350lQTx.js";import"./index-FY3p6vDS.js";import"./button-w0rV5GV_.js";import"./label-2lPo-klO.js";import B from"./ChangeDetail-DdLe1Vio.js";import{N}from"./NoEditOverlay-2s8IYogi.js";import{u as F}from"./useFrontEndPermission-CTM1adQD.js";import"./index-dK1rW-1O.js";import"./index-6W4JOOiF.js";import"./index-rcIM_YSj.js";import"./Combination-Df5DAR2C.js";import"./index-YKYYjyh_.js";import"./react-icons.esm-BaCxz8el.js";import"./utils-CytzSlOG.js";import"./index-DIWZVBTi.js";import"./index-Ctldr2EF.js";import"./table-D_beEVt0.js";import"./index-OIJ2qtHJ.js";import"./BadgeStatus-CCgDMpxB.js";import"./badge-DjX-fht6.js";import"./index.esm-BxWG_Hjc.js";import"./FormatNumbering-C9tmG4Pu.js";import"./react-number-format.es-GMR1PP2I.js";import"./transition-B3HvLuM7.js";import"./index-CBlXBiuZ.js";import"./input-DTZJRZ5a.js";const Aa=({show:C=!1,onClosed:l,triggeredData:s})=>{const[e,y]=r.useState([]),{isCreator:p}=F(),[x,w]=r.useState([]),[I,T]=r.useState(),[n,b]=r.useState(!1),[V,g]=r.useState(!1);r.useEffect(()=>{y(s),T(s==null?void 0:s.request)},[s]);const A=async i=>{var f,v;b(!0),g();try{const{data:t}=await k.post(route("transaction.nasabah_buku_transaksi"),{nik:s.nik},{signal:i});w(t.data??[])}catch(t){k.isCancel(t)?console.log("Request dibatalkan"):g(((v=(f=t.response)==null?void 0:f.data)==null?void 0:v.message)||"Terjadi kesalahan")}finally{b(!1)}};return r.useEffect(()=>{if(!(s!=null&&s.nik))return;const i=new AbortController;return A(i.signal),()=>{i.abort()}},[s]),a.jsx(a.Fragment,{children:a.jsx(L,{open:C,onOpenChange:i=>i?"":l(),children:a.jsx(S,{className:"w-[98vw] p-2",children:a.jsxs(D,{children:[a.jsx(E,{className:"p-2",children:"Check Transaksi Mantri"}),a.jsx(M,{children:a.jsxs(U,{defaultValue:"account",className:"w-full",children:[a.jsxs(H,{className:"grid w-full grid-cols-4",children:[a.jsx(h,{value:"account",children:"Action"}),a.jsx(h,{disabled:n,value:"history",children:n?"Loading...":"Crash Kantor"}),a.jsx(h,{disabled:n,value:"crashubmml",children:n?"Loading...":"Crash (ML)"}),a.jsx(h,{disabled:n,value:"crashubm",children:n?"Loading...":"Crash (T)"})]}),a.jsxs(u,{value:"account",className:"h-[80vh] overflow-auto scrollbar-thin",children:[a.jsxs(o,{children:[a.jsx(c,{children:a.jsx(m,{children:"Detail Pengajuan"})}),a.jsx(d,{className:"space-y-2",children:a.jsx("div",{className:"overflow-auto border rounded-lg scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:a.jsx(J,{datas:e})})})]}),a.jsxs("div",{className:"flex flex-col gap-3 mt-3 lg:flex-row",children:[a.jsxs("div",{className:"w-full",children:[a.jsxs(o,{className:"relative mb-3",children:[a.jsx(c,{children:a.jsx(m,{children:"ACC / DROP"})}),a.jsx(d,{className:"space-y-2",children:a.jsx("div",{className:"flex items-end justify-center gap-2 mx-auto mb-3",children:a.jsx(q,{id:e==null?void 0:e.nomor_pengajuan,triggeredData:e,onClosed:l})})})]}),a.jsxs(o,{className:"relative",children:[!p&&a.jsx(N,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),a.jsx(c,{children:a.jsx(m,{children:"Admin Edit"})}),a.jsx(d,{className:"space-y-2",children:a.jsx("div",{children:e&&a.jsx(B,{onClosed:l,triggeredData:s})})})]})]}),a.jsxs(o,{className:"relative w-full",children:[!p&&a.jsx(N,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),a.jsx(c,{children:a.jsx(m,{children:"Remove Loan"})}),a.jsxs(d,{className:"space-y-2",children:[a.jsxs("div",{className:"w-full mt-6 mb-3 text-start",children:[a.jsx("p",{className:"text-lg font-semibold text-red-500",children:"Hapus Pinjaman"}),a.jsxs("p",{className:"mb-1 text-xs italic font-light text-red-500",children:["Perhatian !!!, Jika pengajuan berstatus sukses, maka pengajuan sudah masuk dalam daftar angsuran, jika tetap dihapus akan mempengaruhi data pada angsuran, dan angsuran akan ikut terhapus.",a.jsx("br",{})," ( Penghapusan hanya bisa dilakukan 2hari dari tanggal drop (Mantri) dan 2bulan (Admin & Kepala))"]}),a.jsx("div",{className:"text-right",children:a.jsx(O,{triggeredId:e==null?void 0:e.nomor_pengajuan,onClosed:l})})]}),a.jsx(_,{className:"mb-3",type:"single",collapsible:!0,children:a.jsxs(P,{value:"item-1",children:[a.jsx(R,{children:"Tambahan"}),a.jsx(K,{children:a.jsx("div",{className:"text-sm",children:a.jsxs("ul",{className:"list-disc list-outside",children:[a.jsx("li",{children:"1. Jika ada kesalahan pada angsuran baru ( angsuran hari ini ) utamakan menghapus, dan buat angsuran lagi."}),a.jsx("li",{children:"2. Jika terjadi kesalahan Status * Tanggal, usahakan untuk ganti tanggal ( tanggal drop / tanggal request ) dan dan reset status setelah itu"}),a.jsx("li",{children:"3. Setelah mengganti Detail pada angsuran, dimohon untuk cek ulang, storting & dan transaksi lagi, dikarenakan perubahan pada detail, akan mempengaruhi laporan lainnya"}),a.jsx("li",{className:"text-red-500",children:"4. Reset Status Hanya Tersedia jika pinjaman adalah drop lama / pengajuan"})]})})})]})})]})]})]})]}),a.jsx(u,{value:"history",className:"h-[80vh] overflow-auto scrollbar-thin",children:a.jsxs("div",{className:"overflow-auto scrollbar-thin h-max",children:[a.jsx("div",{className:"mb-1",children:"Crash Antar Kelompok Dalam 1 Kantor"}),a.jsx(j,{data:x.history_branch})]})}),a.jsx(u,{value:"crashubmml",className:"h-[80vh] overflow-auto scrollbar-thin",children:a.jsxs("div",{className:"overflow-auto scrollbar-thin h-max",children:[a.jsx("div",{className:"mb-1",children:"Crash Kantor Lain Dalam UBM (Macet)"}),a.jsx(j,{data:x.history_macet_lain})]})}),a.jsx(u,{value:"crashubm",className:"h-[80vh] overflow-auto scrollbar-thin",children:a.jsxs("div",{className:"overflow-auto scrollbar-thin h-max",children:[a.jsx("div",{className:"mb-1",children:"Crash Kantor Lain Dalam UBM (Target)"}),a.jsx(j,{data:x.history_target})]})})]})})]})})})})};export{Aa as default};
