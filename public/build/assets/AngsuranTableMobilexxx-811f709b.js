import{r as c,j as l,a as e,R as _,c as B}from"./app-1513e6ad.js";import{T as D,a as I,b as o,c as h,d as A,e as r}from"./table-7e5d8dfc.js";import{F as s}from"./FormatNumbering-8f8bff39.js";import{B as F}from"./button-fa3185df.js";import L from"./Action-23b60756.js";import{B as M}from"./BargeStatus-c0c91ea9.js";import{T as O}from"./TextInput-a52a2d1e.js";import{X as w}from"./x-9cf345df.js";import"./utils-aa679991.js";import"./react-number-format.es-55b240a9.js";import"./dialog-c0b29a8d.js";import"./index-40c8da9e.js";import"./react-icons.esm-5687bae1.js";import"./card-496f5bec.js";import"./badge-2f261dfb.js";import"./BayarAngsuran-43e34fac.js";import"./label-fcb642ac.js";import"./index-f6c8e49c.js";import"./index-fbaf698f.js";import"./input-79bff17c.js";import"./index.esm-a025e82b.js";import"./Checkbox-da7e107c.js";import"./Loading-dd9671cb.js";import"./transition-d80bb77d.js";import"./JenisNasabah-eb71e6a9.js";import"./InputError-ff1ce2b5.js";import"./InputLabel-7e6bf775.js";import"./PrimaryButton-24a1d2b3.js";import"./SelectList-5a93a8d5.js";import"./DeleteAngsuran-27b6ef83.js";import"./DeleteLoan-be1b2074.js";import"./useFrontEndPermission-e97f7be2.js";import"./NoEditOverlay-92680984.js";import"./createLucideIcon-0dc67ecd.js";const xe=({dateOfWeek:N,datas:f})=>{const[u,b]=c.useState([]),[m,g]=c.useState("");c.useEffect(()=>{if(f){const i=(a=>a.map(n=>({...n,data:n.data.filter(d=>!(d.lunas&&!d.is_paid)&&(!m||d.nama.toLowerCase().includes(m.toLowerCase())))})))(f);b(i)}},[f,m]);const p=(t,i)=>t.reduce((n,d)=>n+parseInt(d[i]??0),0),[y,v]=c.useState(null),[T,x]=c.useState(!1),j=t=>{v(t),x(!0)},C=()=>{x(!1),v(null)},[z,S]=c.useState([]),k=t=>{S(i=>i.includes(t)?i.filter(a=>a!==t):[...i,t])};return l("div",{className:"relative overflow-auto h-[70vh] lg:h-[85vh] scrollbar-thin",children:[l("div",{className:"relative w-full mb-2 lg:w-auto lg:max-w-60",children:[e(O,{type:"text",placeholder:"Cari Nama",value:m,onChange:t=>g(t.target.value),className:"w-full text-xs"}),e(w,{className:"absolute right-0 w-auto h-5 text-gray-400 -translate-x-1/2 -translate-y-1/2 top-1/2",onClick:t=>g("")})]}),l(D,{className:"text-xs rounded-lg",children:[e(I,{className:"sticky top-0 left-0 z-10",children:l(o,{className:"bg-gray-200",children:[e(h,{className:"text-center",children:"No"}),e(h,{className:"text-center",children:"Tanggal"}),e(h,{className:"text-center",children:"Nasabah"}),e(h,{className:"text-center border-x border-x-black",children:"Nominal"})]})}),e(A,{children:u?u.map((t,i)=>l(_.Fragment,{children:[e(o,{children:e(r,{colSpan:17+(N.length??0),children:l("div",{className:"flex items-center gap-3",children:[e(M,{value:t.type2})," ",e("div",{children:t.month})]})})}),t.data.map((a,n)=>l(o,{className:`${a.is_paid?"bg-green-200 hover:bg-green-50":""}}`,children:[e(r,{onClick:()=>k(a.id),children:n+1}),e(r,{children:l("div",{className:"space-y-2 text-center",children:[e("div",{children:B(a.tanggal_drop).format("DD-MM")}),e("div",{children:e(F,{size:"xs",variant:a.lunas?"green":a.is_paid?"blue":"default",onClick:()=>j(a.id),children:a.lunas?"Lunas":a.is_paid?"Dibayar":"Bayar"})})]})}),l(r,{children:[e("div",{className:"font-semibold",children:a.nama}),e("div",{children:a.nik}),e("div",{children:a.alamat})]}),l(r,{className:"border-x border-x-black",children:[l("div",{className:"flex justify-between gap-6",children:[e("div",{children:"P"}),e(s,{value:a.pinjaman})]}),l("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e("div",{children:"A"}),l("div",{className:"flex gap-3",children:[e("div",{className:"italic whitespace-nowrap",children:e(s,{value:a.angs_today,prefix:"(",suffix:")"})}),e(s,{value:a.angsuran})]})]}),l("div",{className:"flex justify-between gap-6",children:[e("div",{children:"S"}),e(s,{value:a.saldo})]})]})]},n)),l(o,{className:"bg-gray-100",children:[e(r,{className:"py-3",colSpan:3,children:"TOTAL"}),l(r,{className:"border-x border-x-black",children:[l("div",{className:"flex justify-between gap-6",children:[e("div",{children:"P"}),e(s,{value:p(t.data,"pinjaman")})]}),l("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e("div",{children:"A"}),l("div",{className:"flex gap-3",children:[e("div",{className:"italic whitespace-nowrap",children:e(s,{value:p(t.data,"angs_today"),prefix:"(",suffix:")"})}),e(s,{value:p(t.data,"angsuran")})]})]}),l("div",{className:"flex justify-between gap-6",children:[e("div",{children:"S"}),e(s,{value:p(t.data,"saldo")})]})]})]})]},i)):e(o,{children:e(r,{children:"a"})})})]}),e(L,{datas:u,show:T,onClosed:C,triggeredId:y})]})};export{xe as default};
