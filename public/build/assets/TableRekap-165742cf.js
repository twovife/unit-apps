import{r as c,a,c as m,F as x,j as C,R as S}from"./app-a3b3d9df.js";import{T,a as N,b as i,c as v,d as k,e as b,f as R}from"./table-ae1bfb85.js";import{u as j,f as d,g as V}from"./index-334fec83.js";import{F as l}from"./FormatNumbering-a989250f.js";import{B}from"./BargeStatus-3fc8f490.js";import"./button-39f64595.js";import"./utils-36e2ef84.js";import"./react-number-format.es-1250ecaa.js";const I=({setOnShowModal:F,setTriggeredData:A,datas:g})=>{const[h,y]=c.useState([]);c.useEffect(()=>{y(g)},[g]);const o=(e=>e.reduce((t,r)=>(Object.keys(r).forEach(n=>{t[n]=(t[n]||0)+(r[n]||0)}),t),{}))(h),s=(e,t)=>{var f,p,_;const r=e.table.getRowModel().rows;if(((p=(f=r[r.length-1])==null?void 0:f.original)==null?void 0:p.type)==="permantri")return(_=r[r.length-1])==null?void 0:_.getValue(t)},M=c.useMemo(()=>[{header:"Kelompok",accessorKey:"kelompok",cell:({getValue:e,cell:t})=>a("div",{className:"flex items-center justify-center gap-3",children:a("div",{children:t.row.original.type=="daily"?e():m(t.row.original.tanggal).format("DD-MM")})})},{header:"Drop",accessorKey:"drop",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.drop})},{header:"Jumlah Drop",accessorKey:"total_drop",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>(s(e,"total_drop"),a(l,{value:o.total_drop}))},{header:"Storting",accessorKey:"storting",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.storting})},{header:"Jumlah Storting",accessorKey:"total_storting",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_storting");return a(l,{value:t??o.total_storting})}},{header:"Sirkulasi",accessorKey:"sirkulasi",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"sirkulasi");return a(l,{value:t??o.sirkulasi})}},{header:"Angsuran CM",accessorKey:"angsuran_cm",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.angsuran_cm})},{header:"Jumlah CM",accessorKey:"total_angsuran_cm",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_angsuran_cm");return a(l,{value:t??o.total_angsuran_cm})}},{header:"Saldo CM",accessorKey:"saldo_cm",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"saldo_cm");return a(l,{value:t??o.saldo_cm})}},{header:"Angsuran MB",accessorKey:"angsuran_mb",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.angsuran_mb})},{header:"Jumlah MB",accessorKey:"total_angsuran_mb",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_angsuran_mb");return a(l,{value:t??o.total_angsuran_mb})}},{header:"Saldo MB",accessorKey:"saldo_mb",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"saldo_mb");return a(l,{value:t??o.saldo_mb})}},{header:"Angsuran ML",accessorKey:"angsuran_ml",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>a(l,{value:o.angsuran_ml})},{header:"Jumlah ML",accessorKey:"total_angsuran_ml",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"total_angsuran_ml");return a(l,{value:t??o.total_angsuran_ml})}},{header:"Saldo ML",accessorKey:"saldo_ml",cell:({getValue:e})=>a(l,{value:e()}),footer:e=>{const t=s(e,"saldo_ml");return a(l,{value:t??o.saldo_ml})}},{header:"Kasir",accessorKey:"status_approve_kasir",cell:({getValue:e,cell:t})=>a("div",{className:"flex items-center justify-center gap-3",children:a("div",{children:e()?m(e()).format("DD-MM-YY"):""})})},{header:"Pimp",accessorKey:"status_approve_kepala",cell:({getValue:e,cell:t})=>a("div",{className:"flex items-center justify-center gap-3",children:a("div",{children:e()?m(e()).format("DD-MM-YY"):""})})}],[o]),u=j({data:h,columns:M,getCoreRowModel:V(),debugTable:!0}),[O,w]=c.useState(!1),[L,K]=c.useState(),D=e=>{w(!0),K(e)};return a(x,{children:C(T,{className:"w-full mb-3 table-auto",children:[a(N,{className:"sticky top-0 z-10 bg-gray-100",children:u.getHeaderGroups().map((e,t)=>a(i,{children:e.headers.map((r,n)=>a(v,{className:"text-center",children:d(r.column.columnDef.header,r.getContext())},n))},t))}),a(k,{children:u.getRowModel().rows.length?u.getRowModel().rows.map((e,t)=>a(S.Fragment,{children:a(i,{className:"text-center",children:e.getVisibleCells().map(r=>a(b,{className:`${r.column.columnDef.className}`,children:r.column.columnDef.type=="show"?a("div",{className:"flex items-center justify-center gap-2",children:a(B,{value:r.row.original.status,onClick:()=>D(r.row.original)})}):d(r.column.columnDef.cell,r.getContext())},r.id))},t)},t)):a(i,{children:a(b,{colSpan:"4",children:"Belum Ada Catatan Pinjaman"})})}),a(R,{children:u.getFooterGroups().map(e=>a(i,{children:e.headers.map(t=>a(v,{className:"text-center text-black bg-gray-100",children:d(t.column.columnDef.footer,t.getContext())},t.id))},e.id))})]})})};export{I as default};
