import{W as k,j as e,a,b as j}from"./app-6b585921.js";import{L as C}from"./LinkButton-c9056cd4.js";import{d as f}from"./dayjs.min-942ea124.js";import{N as m}from"./react-number-format.es-6f2b9be6.js";import{M as S}from"./MobileLayout-406b2ee4.js";import{I as h}from"./InputLabel-154c94a4.js";import{T}from"./TextInput-224ad6be.js";import{C as D}from"./index.esm-85c0bb3b.js";import{S as I}from"./SelectList-dede01fb.js";import{u as M}from"./useServerFilter-3c1998d8.js";import{P as _}from"./PrimaryButton-474421f3.js";import{C as B}from"./Checkbox-9c149753.js";import{I as o}from"./InputError-436fcbc2.js";import"./Loading-4ff51d81.js";import"./transition-3dfdf4ec.js";import"./index-f259ebd8.js";const Q=({loan:l,...t})=>{var p;const{status_angsuran:v}=M(),x=v.filter(s=>s.value>=l.status),{data:r,setData:u,post:N,processing:g,errors:i,reset:b}=k({danatitipan:!1,jumlah:0,status:l.status,pembayaran_date:""});console.log(i);const n=s=>{u(s.target.name,s.target.type==="checkbox"?s.target.checked:s.target.value)},y=(s,d)=>{u(d,parseInt(s))},w=s=>{s.preventDefault(),N(route("mantriapps.bayarpost",l.id),{onSuccess:()=>b()})};let c=l.pinjaman;return e(S,{auth:t.auth,errors:t.errors,header:"Buku Transaksi",loading:g,children:[a(j,{title:"Buku Transaksi"}),e("div",{className:"bg-white/30 rounded shadow w-full p-3",children:[e("div",{className:"flex w-full justify-between items-center",children:[a("div",{className:"font-semibold",children:"Bayar Angsuran"}),a("div",{className:"font-semibold",children:a(C,{as:"a",href:t.back_button,color:"blue",title:"Back"})})]}),e("div",{className:"overflow-auto",children:[e("div",{children:[e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Nasabah"}),a("div",{children:":"})]}),a("div",{className:"flex-[2]",children:l.customer.nama})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Alamat"}),a("div",{children:":"})]}),a("div",{className:"flex-[2]",children:l.customer.alamat})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"NIK"}),a("div",{children:":"})]}),a("div",{className:"flex-[2]",children:l.customer.nik})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Kelompok | Mantri"}),a("div",{children:":"})]}),e("div",{className:"flex-[2]",children:[l.kelompok," | ",l.droper.nama_karyawan]})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Tanggal Drop"}),a("div",{children:":"})]}),a("div",{className:"flex-[2]",children:f(l.customer.tanggal_drop).format("DD-MM-YYYY")})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Pinjaman"}),a("div",{children:":"})]}),e("div",{className:"flex-[2]",children:[a(m,{value:l.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "}),"| ",l.status]})]})]}),a("div",{className:"mt-3",children:a("div",{className:"shadow text-xs rounded overflow-auto border max-h-[50vh]",children:e("table",{className:"w-full bg-white",children:[a("thead",{children:e("tr",{children:[a("th",{className:"p-2",children:"No"}),a("th",{className:"p-2",children:"Tanggal Angsur"}),a("th",{className:"p-2",children:"Jumlah"}),a("th",{className:"p-2",children:"Saldo"}),a("th",{className:"p-2",children:"Status"})]})}),a("tbody",{children:(p=l.angsuran)==null?void 0:p.map((s,d)=>(c=c-s.jumlah,e("tr",{className:"odd:bg-gray-200",children:[a("td",{className:"px-2 py-1",children:d+1}),a("td",{className:"px-2 py-1",children:f(s.pembayaran_date).format("DD-MM-YY")}),a("td",{className:"px-2 py-1",children:a(m,{value:s.jumlah,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-2 py-1",children:a(m,{value:c,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-2 py-1",children:s.status==1?"Normal":s.status==2?"CM":s.status==3?"MB":"ML"})]},d)))})]})})}),e("form",{onSubmit:w,className:"mt-3",children:[a("div",{children:"Input Data"}),e("div",{className:"flex gap-3 flex-wrap",children:[e("div",{className:"flex-1",children:[a(h,{value:"Tanggal"}),a(T,{type:"date",onChange:n,max:t.batasan.maxdate,min:t.batasan.mindate,className:"block mt-1 w-full",id:"pembayaran_date",name:"pembayaran_date",value:r.pembayaran_date}),a(o,{message:i.pembayaran_date,className:"mt-2"})]}),e("div",{className:"flex-1",children:[a(h,{value:"Jumlah"}),a(D,{name:"jumlah",id:"jumlah",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full mt-1",allowDecimals:!1,prefix:"Rp. ",required:!0,onValueChange:y,value:r.jumlah,placeholder:"Inputkan angka tanpa sparator"}),a(o,{message:i.jumlah,className:"mt-2"})]})]}),e("div",{className:"mt-3",children:[a(h,{value:"Status"}),e("div",{className:"flex gap-3 items-center",children:[e("div",{className:"flex-[2]",children:[a(I,{onChange:n,options:x,className:"block mt-1 w-full",id:"status",name:"status",value:r.status}),a(o,{message:i.status,className:"mt-2"})]}),a("div",{className:"flex-1",children:e("label",{className:"flex items-center",children:[a(B,{name:"danatitipan",value:r.danatitipan,onChange:n}),a("span",{className:"ml-2 text-sm text-gray-600",children:"Dana Titipan?"})]})})]})]}),a("div",{className:"mt-3",children:a(_,{title:"Submit",type:"submit"})})]})]})]})]})};export{Q as default};
