import{r,j as a,e as k}from"./app-DGVigBOE.js";import{D as L,a as S,b as D,c as E,d as _}from"./dialog-C4jeo3FK.js";import{A as M,a as P,b as R,c as K}from"./accordion-C-TZ5SUE.js";import{C as o,a as c,b as m,d}from"./card-DeWa8pWk.js";import{T as U,a as H,b as h,c as u}from"./tabs-C1C762Hu.js";import j from"./RiwayatPengajuan-D0cK5_qO.js";import q from"./Acc-D3kme_yh.js";import J from"./ActionTable-CDWcYUdo.js";import O from"./RemoveLoan-DAVNBDh8.js";import"./Loading-DMtMfGcu.js";import"./index-BtqdhX95.js";import"./button-rS3_Wmdu.js";import"./label-BShTYR7D.js";import B from"./ChangeDetail-CgPUj7Xz.js";import{N}from"./NoEditOverlay-BcscZA4l.js";import{u as F}from"./useFrontEndPermission-DYpEjkbr.js";import"./index-DucQBsmP.js";import"./index-DFy29xkF.js";import"./index-CVVN396G.js";import"./Combination-wEBvMC1Q.js";import"./index-BKUnDlkJ.js";import"./react-icons.esm-P3OC-ayT.js";import"./utils-CytzSlOG.js";import"./index-CJvcXCxt.js";import"./index-DMEyqTyB.js";import"./table-DXdUzG_0.js";import"./index-eWaeB2e8.js";import"./BadgeStatus-CeZOEIeB.js";import"./badge-z741yAix.js";import"./index.esm-DtkwdLfj.js";import"./FormatNumbering-DXF1Jz9T.js";import"./react-number-format.es-cARkYdxq.js";import"./transition-CfosE7Eq.js";import"./index-BHSBDpLv.js";import"./input-hiXsNSZw.js";const Aa=({show:C=!1,onClosed:l,triggeredData:s})=>{const[e,y]=r.useState([]),{isCreator:p}=F(),[x,T]=r.useState([]),[I,w]=r.useState(),[n,b]=r.useState(!1),[V,g]=r.useState(!1);r.useEffect(()=>{y(s),w(s==null?void 0:s.request)},[s]);const A=async i=>{var f,v;b(!0),g();try{const{data:t}=await k.post(route("transaction.nasabah_buku_transaksi"),{nik:s.nik},{signal:i});T(t.data??[])}catch(t){k.isCancel(t)?console.log("Request dibatalkan"):g(((v=(f=t.response)==null?void 0:f.data)==null?void 0:v.message)||"Terjadi kesalahan")}finally{b(!1)}};return r.useEffect(()=>{if(!(s!=null&&s.nik))return;const i=new AbortController;return A(i.signal),()=>{i.abort()}},[s]),a.jsx(a.Fragment,{children:a.jsx(L,{open:C,onOpenChange:i=>i?"":l(),children:a.jsx(S,{className:"w-[98vw] p-2",children:a.jsxs(D,{children:[a.jsx(E,{className:"p-2",children:"Check Transaksi Mantri"}),a.jsx(_,{children:a.jsxs(U,{defaultValue:"account",className:"w-full",children:[a.jsxs(H,{className:"grid w-full grid-cols-4",children:[a.jsx(h,{value:"account",children:"Action"}),a.jsx(h,{disabled:n,value:"history",children:n?"Loading...":"Crash Kantor"}),a.jsx(h,{disabled:n,value:"crashubmml",children:n?"Loading...":"Crash (NT)"}),a.jsx(h,{disabled:n,value:"crashubm",children:n?"Loading...":"Crash (T)"})]}),a.jsxs(u,{value:"account",className:"h-[80vh] overflow-auto scrollbar-thin",children:[a.jsxs(o,{children:[a.jsx(c,{children:a.jsx(m,{children:"Detail Pengajuan"})}),a.jsx(d,{className:"space-y-2",children:a.jsx("div",{className:"overflow-auto border rounded-lg scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:a.jsx(J,{datas:e})})})]}),a.jsxs("div",{className:"flex flex-col gap-3 mt-3 lg:flex-row",children:[a.jsxs("div",{className:"w-full",children:[a.jsxs(o,{className:"relative mb-3",children:[a.jsx(c,{children:a.jsx(m,{children:"ACC / DROP"})}),a.jsx(d,{className:"space-y-2",children:a.jsx("div",{className:"flex items-end justify-center gap-2 mx-auto mb-3",children:a.jsx(q,{id:e==null?void 0:e.nomor_pengajuan,triggeredData:e,onClosed:l})})})]}),a.jsxs(o,{className:"relative",children:[!p&&a.jsx(N,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),a.jsx(c,{children:a.jsx(m,{children:"Admin Edit"})}),a.jsx(d,{className:"space-y-2",children:a.jsx("div",{children:e&&a.jsx(B,{onClosed:l,triggeredData:s})})})]})]}),a.jsxs(o,{className:"relative w-full",children:[!p&&a.jsx(N,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),a.jsx(c,{children:a.jsx(m,{children:"Remove Loan"})}),a.jsxs(d,{className:"space-y-2",children:[a.jsxs("div",{className:"w-full mt-6 mb-3 text-start",children:[a.jsx("p",{className:"text-lg font-semibold text-red-500",children:"Hapus Pinjaman"}),a.jsxs("p",{className:"mb-1 text-xs italic font-light text-red-500",children:["Perhatian !!!, Jika pengajuan berstatus sukses, maka pengajuan sudah masuk dalam daftar angsuran, jika tetap dihapus akan mempengaruhi data pada angsuran, dan angsuran akan ikut terhapus.",a.jsx("br",{})," ( Penghapusan hanya bisa dilakukan 2hari dari tanggal drop (Mantri) dan 2bulan (Admin & Kepala))"]}),a.jsx("div",{className:"text-right",children:a.jsx(O,{triggeredId:e==null?void 0:e.nomor_pengajuan,onClosed:l})})]}),a.jsx(M,{className:"mb-3",type:"single",collapsible:!0,children:a.jsxs(P,{value:"item-1",children:[a.jsx(R,{children:"Tambahan"}),a.jsx(K,{children:a.jsx("div",{className:"text-sm",children:a.jsxs("ul",{className:"list-disc list-outside",children:[a.jsx("li",{children:"1. Jika ada kesalahan pada angsuran baru ( angsuran hari ini ) utamakan menghapus, dan buat angsuran lagi."}),a.jsx("li",{children:"2. Jika terjadi kesalahan Status * Tanggal, usahakan untuk ganti tanggal ( tanggal drop / tanggal request ) dan dan reset status setelah itu"}),a.jsx("li",{children:"3. Setelah mengganti Detail pada angsuran, dimohon untuk cek ulang, storting & dan transaksi lagi, dikarenakan perubahan pada detail, akan mempengaruhi laporan lainnya"}),a.jsx("li",{className:"text-red-500",children:"4. Reset Status Hanya Tersedia jika pinjaman adalah drop lama / pengajuan"})]})})})]})})]})]})]})]}),a.jsx(u,{value:"history",className:"h-[80vh] overflow-auto scrollbar-thin",children:a.jsxs("div",{className:"overflow-auto scrollbar-thin h-max",children:[a.jsx("div",{className:"mb-1",children:"Crash Antar Kelompok Dalam 1 Kantor"}),a.jsx(j,{data:x.history_branch})]})}),a.jsx(u,{value:"crashubmml",className:"h-[80vh] overflow-auto scrollbar-thin",children:a.jsxs("div",{className:"overflow-auto scrollbar-thin h-max",children:[a.jsx("div",{className:"mb-1",children:"Crash Kantor Lain Dalam UBM (Macet)"}),a.jsx(j,{data:x.history_macet_lain})]})}),a.jsx(u,{value:"crashubm",className:"h-[80vh] overflow-auto scrollbar-thin",children:a.jsxs("div",{className:"overflow-auto scrollbar-thin h-max",children:[a.jsx("div",{className:"mb-1",children:"Crash Kantor Lain Dalam UBM (Target)"}),a.jsx(j,{data:x.history_target})]})})]})})]})})})})};export{Aa as default};
