import{r as i,j as s,a,b as w,d as m,c as S}from"./app-bc49b9b5.js";import{I as j}from"./InputError-23db058a.js";import{I as C}from"./InputLabel-2c4d0bec.js";import{P as D}from"./PrimaryButton-53a83fcf.js";import{T as I}from"./TextInput-4318b4f4.js";import{A as _}from"./AuthenticatedLayout-a1610468.js";import{d as B}from"./dayjs.min-108f6cc1.js";import{u as T}from"./useServerFilter-7188db22.js";import{N as A}from"./react-number-format.es-f25a8ca3.js";import E from"./OldCustomer-a0986a6d.js";import F from"./NewCustomer-ec76956c.js";import"./transition-32251c01.js";import"./index-180230b8.js";import"./Loading-4d239ecc.js";import"./Checkbox-28421b4b.js";import"./SelectList-28cfc2d1.js";import"./index.esm-3940be48.js";const Z=({max_date:u,min_date:h,...c})=>{const{emps:x,status_angsuran:N}=T(null,null,null,c.mantri),[b,e]=i.useState(!1),[g,y]=i.useState(),[f,n]=i.useState(),[o,k]=i.useState(),[d,p]=i.useState(),v=t=>{const r=document.getElementById("nik").value;e(!0),y(),n(),p(),S({method:"post",url:route("transaction.getnik"),data:{nik:r}}).then(function({data:l}){n(l.data),k(l.reqistered_customer),p(r),e(!1)}).catch(function({response:l}){y(l.data.message),n(),p(),e(!1)})};return s(_,{auth:c.auth,errors:c.errors,header:"Buku Transaksi",loading:b,children:[a(w,{title:"Batch Upload"}),a("div",{className:"relative",children:s("div",{className:"p-4 flex",children:[s("div",{className:"flex-[2]",children:[s("div",{className:"mb-3",children:[a(C,{htmlFor:"nik",value:"Input Nik Customer"}),s("div",{className:"flex items-center justify-start gap-3 mt-1",children:[a(I,{id:"nik",type:"text",name:"nik",required:!0,className:"block",autoComplete:"nik"}),a(D,{title:"Cek",as:"button",type:"button",onClick:v})]}),a(j,{message:g,className:"mt-2"})]}),d?o?a(E,{status:N,setLoading:e,max_date:u,min_date:h,emps:x,nik:d,url:route("batchupdate.batch_post"),customer_id:o==null?void 0:o.id}):a(F,{status:N,setLoading:e,max_date:u,min_date:h,emps:x,nik:d,url:route("batchupdate.batch_post")}):"",a("div",{className:"mb-3"})]}),a("div",{className:"flex-[3]",children:s("div",{className:"mb-3",children:[a("div",{className:"text-lg font-semibold",children:"History Pinjaman Customer"}),a("div",{className:"overflow-hidden mb-3 rounded shadow p-4",children:s("table",{className:"w-full text-sm text-left text-gray-500",children:[a("thead",{className:"text-xs text-gray-900 uppercase bg-gray-200 sticky top-0 whitespace-nowrap",children:s("tr",{children:[a("th",{className:"px-3 py-2",children:"No"}),a("th",{className:"px-3 py-2",children:"Tanggal Drop"}),a("th",{className:"px-3 py-2",children:"Unit"}),a("th",{className:"px-3 py-2",children:"Kelompok"}),a("th",{className:"px-3 py-2",children:"Mantri"}),a("th",{className:"px-3 py-2",children:"Nama Customer"}),a("th",{className:"px-3 py-2",children:"Drop"}),a("th",{className:"px-3 py-2",children:"Lunas"}),a("th",{className:"px-3 py-2",children:"Status"})]})}),a("tbody",{children:f?f.map((t,r)=>s("tr",{children:[a("td",{className:"px-3 py-2",children:r+1}),a("td",{className:"px-3 py-2",children:B(t.tanggal_drop).format("DD-MM-YYYY")}),a("td",{className:"px-3 py-2",children:t.unit}),a("td",{className:"px-3 py-2",children:t.kelompok}),a("td",{className:"px-3 py-2",children:t.mantri_name}),a("td",{className:"px-3 py-2",children:t.customer_name}),a("td",{className:"px-3 py-2",children:a(A,{value:t.drop,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-3 py-2",children:t.lunas}),a("td",{className:"px-3 py-2",children:t.status=="normal"||t.status=="cm"?a(m,{as:"a",href:route("pinjaman.normal.show",t.id),className:"bg-green-400 px-5 py-1 uppercase rounded-lg text-white font-semibold",children:t.status}):t.status=="mb"?a(m,{as:"a",href:route("pinjaman.normal.show",t.id),className:"bg-yellow-400 px-5 py-1 uppercase rounded-lg text-white font-semibold",children:t.status}):a(m,{as:"a",href:route("pinjaman.normal.show",t.id),className:"bg-red-400 px-5 py-1 uppercase rounded-lg text-white font-semibold",children:t.status})})]},r)):a("tr",{children:a("td",{colSpan:3,children:"Data tidak ditemukan"})})})]})})]})})]})})]})};export{Z as default};
