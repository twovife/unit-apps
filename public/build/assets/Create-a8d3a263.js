import{W as H,r as m,j as a,a as e,F as V,e as F}from"./app-b58b93b4.js";import{I as r}from"./InputError-66e07ae4.js";import{L as U}from"./Loading-40bcc598.js";import{B as u}from"./button-43f09e73.js";import{C as w,a as C,b as y,c as _,d as D}from"./card-b3da9105.js";import{D as W,a as $,b as J,c as Q,d as X}from"./dialog-a24bd46e.js";import{T as Y,a as Z,b as j,c as q}from"./tabs-f8f10d76.js";import{I as c}from"./input-344963a2.js";import{L as i}from"./label-407096e5.js";import{C as ee}from"./index.esm-3abafde0.js";import{u as ae,S as te}from"./SelectComponent-fce4d620.js";import ne from"./RiwayatPengajuan-4e468278.js";import{c as le}from"./createLucideIcon-2919c283.js";import"./transition-13d01d1a.js";import"./utils-36e2ef84.js";import"./index-a4918a2f.js";import"./react-icons.esm-422e8e58.js";import"./index-012bbd11.js";import"./index-a1c00ca5.js";import"./FormatNumbering-8eb1706e.js";import"./react-number-format.es-9de8134e.js";import"./DetailRiwayat-f61a0cce.js";/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),qe=({show:S=!1,onClosed:v})=>{const{optKelompok:I}=ae(),{data:t,setData:h,post:P,errors:s,processing:T,reset:f}=H({isActiveMember:!1,nik:""}),[d,A]=m.useState(""),[L,b]=m.useState(!1),[k,N]=m.useState(),[R,x]=m.useState([]),[K,z]=m.useState();m.useEffect(()=>{z(t.request_date),h(n=>({...n,tanggal_drop:""}))},[t.request_date]);const B=(n,l)=>{h(l,n)},o=n=>{const{name:l,value:p}=n.target;h(l,p)},E=n=>{const{name:l,value:p}=n.target;A(p)},M=async n=>{n.preventDefault(),f(),b(!0),N(),await F({method:"post",url:route("transaction.nasabah_buku_transaksi"),data:{nik:d}}).then(function({data:l}){b(!1),h(p=>({...p,nik:l.return_nik,isActiveMember:l.falidate_nik})),l.falidate_nik?x(l.data):x([])}).catch(function({response:l}){N(l.data.message),b(!1)})},O=n=>{v(),f()},G=n=>{n.preventDefault(),P(route("transaction.store_buku_transaksi"),{onSuccess:()=>{v(),f()}})},g=n=>{const l=n.target.getAttribute("data-value");h("request_nominal",l)};return console.log(t),a(W,{open:S,onOpenChange:n=>n?"":O(),children:[e(U,{show:L||T}),a($,{className:"w-[90vw] h-[90vh] overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[e(J,{className:"max-h-10",children:e(Q,{children:"Buat Pinjaman Baru"})}),e(X,{children:a("div",{className:"flex flex-col w-full gap-3 lg:flex-row",children:[a("div",{className:"w-auto",children:[a("fieldset",{className:"w-full p-4 mb-3 border rounded-lg",children:[e("legend",{className:"px-1 -ml-1 text-sm font-medium",children:"Cari Nasabah"}),a("form",{className:"w-full mb-3",onSubmit:M,children:[e(i,{optional:!0,children:"NIK"}),a("div",{className:"flex items-center gap-3",children:[e(c,{type:"text",name:"nik",value:d,onChange:E,placeholder:"Cek NIK"}),a(u,{className:"text-xs",size:"sm",children:[e(re,{className:"w-auto h-4 mr-1"}),"Cari"]})]}),k&&e(r,{message:k,className:"mt-1"}),a("div",{className:`font-semibold mt-1 ${d.length==16?"text-green-500":"text-red-500"}`,children:[d.length," Digit"]})]})]}),d&&t.nik==d&&a("fieldset",{className:"w-full p-4 border rounded-lg",children:[e("legend",{className:"px-1 -ml-1 text-sm font-medium",children:"Detail Pinjaman"}),a("form",{className:"w-full mb-3",onSubmit:G,children:[a("div",{className:"flex gap-3",children:[a("div",{className:"w-full mb-3",children:[e(i,{children:"Tanggal Pengajuan"}),e(c,{type:"date",name:"request_date",required:!0,value:t.request_date,onChange:o}),e(r,{value:s.request_date})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Tanggal Drop"}),e(c,{type:"date",name:"tanggal_drop",min:K,required:!0,value:t.tanggal_drop,onChange:o}),e(r,{value:s.tanggal_drop})]})]}),t.request_date&&t.request_date==t.tanggal_drop&&e("div",{className:"w-full mb-3 font-semibold text-red-500",children:"DROP LANGSUNG"}),a("div",{className:"w-full mb-3",children:[e(i,{optional:!0,children:"NIK"}),e(c,{type:"text",name:"nik",value:t.nik,disabled:!0,onChange:o}),e(r,{value:s.nik})]}),!t.isActiveMember&&a(V,{children:[a("div",{className:"w-full mb-3",children:[e(i,{optional:!0,children:"NO KK"}),e(c,{type:"text",name:"no_kk",value:t.no_kk,onChange:o}),e(r,{value:s.no_kk})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Nama"}),e(c,{type:"text",name:"nama",value:t.nama,onChange:o,required:!0}),e(r,{value:s.nama})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Alamat"}),e(c,{type:"text",name:"alamat",value:t.alamat,onChange:o,required:!0}),e(r,{value:s.alamat})]})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Kelompok"}),e(te,{value:t.kelompok,options:I,name:"kelompok",nullvalue:!0,onChange:o,required:!0}),e(r,{value:s.kelompok})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Nominal Pinjaman"}),e(ee,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"request_nominal",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:B,value:t.request_nominal,placeholder:"Inputkan angka tanpa sparator"}),e(r,{value:s.request_nominal})]}),a("div",{className:"flex flex-wrap w-full gap-2 mb-3",children:[e(u,{type:"button",variant:"outline",size:"xs",onClick:g,"data-value":"500000",children:"500.000"}),e(u,{type:"button",variant:"outline",size:"xs",onClick:g,"data-value":"700000",children:"700.000"}),e(u,{type:"button",variant:"outline",size:"xs",onClick:g,"data-value":"1000000",children:"1.000.000"}),e(u,{type:"button",variant:"destructive",size:"xs",onClick:g,"data-value":"0",children:"reset"})]}),e("div",{className:"text-end",children:e(u,{children:"Submit"})})]})]})]}),e("div",{className:"w-auto lg:w-3/4",children:a(Y,{defaultValue:"pengajuan",className:"w-auto",children:[a(Z,{className:"grid w-full grid-cols-2",children:[e(j,{value:"pengajuan",children:"Riwayat Pinjaman"}),e(j,{value:"pinjaman",children:"Ringkasan Pinjaman"})]}),e(q,{value:"pengajuan",children:a(w,{children:[a(C,{children:[e(y,{children:"Riwayat Pengajuan"}),e(_,{children:"Riwayat Pengajuan Nasabah dilihat berdasarkan NIK yang tertera dari semua cabang"})]}),e(D,{className:"space-y-2",children:e("div",{className:"h-[50vh] border rounded-lg overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(ne,{data:R})})})]})}),e(q,{value:"pinjaman",children:a(w,{children:[a(C,{children:[e(y,{children:"Ringkasan Pinjaman"}),e(_,{children:"Ringkasan Analisa Nasabah"})]}),e(D,{className:"space-y-2",children:e("div",{children:"masih belum ada, update secara berkala"})})]})})]})})]})})]})]})};export{qe as default};
