import{c as ee}from"./createLucideIcon-BlIz8y7D.js";import{X as ae,r as m,G as se,d as D,j as e,A as le}from"./app-VW9K5PiD.js";import{u as te,S as o}from"./SelectComponent-DD_ZotPA.js";import{B as F}from"./button-Jb1Mg5XD.js";import{I as Y}from"./input-BwjtA_PL.js";import{M as ne,R as ie}from"./react-icons.esm-D8crrwah.js";import{L as oe}from"./Loading-yHSvM36d.js";import{L as t}from"./label-Cc2EXSn0.js";/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),xe=({urlLink:j=route("home"),localState:_,searchDate:B=!1,labelDate:L="Date",searchMonth:M=!1,labelMonth:R="Bulan",searchPlanText:W=!1,planTextName:f="search",searchHari:E=!1,searchWilayah:G=!1,searchGroupingBranch:q=!1,searchBranch:A=!1,searchKelompok:K=!1,children:U,nexOrPrevious:r=null,setNexOrPrevious:H})=>{const{selectedSearchParam:x,optWilayah:w,optBranch:J,selectedWilayah:g,setSelectedWilayah:X,filteredBranch:z,optKelompok:O,dayOpt:Q}=te(),{server_filter:{hari:y,branch_id:N,month:v,date:k,wilayah:b,kelompok:S}}=ae().props,h=m.useRef(null),{data:n,setData:l,get:T,processing:d}=se({}),[V,u]=m.useState(!1),i=a=>{const{name:s,value:c}=a.target;W?s==f?l(p=>{const C={[s]:c};for(const I in p)I!==s&&(C[I]="");return C}):l(p=>({...p,[s]:c,[f]:""})):isNaN(c)?l(s,c):l(s,parseInt(c))},Z=a=>{const{value:s}=a.target;X(s),l({branch_id:""})},$=a=>{a.preventDefault(),T(j)},P=a=>{a.preventDefault(),le.visit(j,{onStart:s=>u(!0),onFinish:s=>u(!1)}),localStorage.setItem(_,JSON.stringify({oldFilter:[],oldPage:1}))};return m.useEffect(()=>{const a={};x?a[f]=x:(N&&(a.branch_id=parseInt(N)),k&&(a.date=k),v&&(a.month=v),b&&(a.wilayah=parseInt(b)),S&&(a.kelompok=parseInt(S)),y&&(a.hari=y)),Object.keys(a).length>0&&l(a)},[]),m.useEffect(()=>{u(d)},[d]),m.useEffect(()=>(r&&(r=="next"?(l(a=>({...a,date:D(a.date).add(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{h.current.click()},500)):r=="previous"&&(l(a=>({...a,date:D(a.date).subtract(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{h.current.click()},500))),()=>{r&&H(null)}),[r]),e.jsxs(e.Fragment,{children:[e.jsx(oe,{show:d||V}),e.jsxs("form",{className:"flex flex-col items-end w-full gap-3 lg:w-auto lg:flex-row",onSubmit:$,children:[B&&e.jsxs("div",{className:"w-full",children:[e.jsx(t,{children:L}),e.jsx(Y,{className:"w-full",type:"date",name:"date",value:n.date,onChange:i,placeholder:"Name of your project"})]}),M&&e.jsxs("div",{className:"w-full",children:[e.jsx(t,{children:R}),e.jsx(Y,{className:"w-full",type:"month",name:"month",value:n.month,onChange:i,placeholder:"Name of your project"})]}),K&&e.jsxs("div",{className:"w-full",children:[e.jsx(t,{children:"Kelompok"}),e.jsx(o,{className:"w-full",value:n.kelompok,options:O,name:"kelompok",onChange:i})]}),G&&e.jsxs("div",{className:"w-full",children:[e.jsx(t,{children:"Wilayah"}),e.jsx(o,{className:"w-full",value:n.wilayah,options:w,name:"wilayah",onChange:i})]}),A&&e.jsxs("div",{className:"w-full",children:[e.jsx(t,{children:"Unit"}),e.jsx(o,{className:"w-full",value:n.branch_id,options:J,name:"branch_id",onChange:i})]}),E&&e.jsxs("div",{className:"w-full",children:[e.jsx(t,{children:"Hari"}),e.jsx(o,{className:"w-full",value:n.hari,options:Q,name:"hari",onChange:i})]}),q&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsx(t,{children:"Wilayah"}),e.jsx(o,{className:"w-full",required:"true",value:g,options:w,name:"wilayah",onChange:Z})]}),g!==""&&e.jsxs("div",{className:"w-full",children:[e.jsx(t,{children:"Unit"}),e.jsx(o,{required:"true",className:"w-full",value:n.branch_id,options:z,name:"branch_id",nullvalue:!0,onChange:i})]})]}),e.jsxs("div",{className:"flex items-center justify-end col-span-2 gap-3",children:[e.jsxs(F,{ref:h,variant:"outline",type:"submit",children:[e.jsx(ne,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Cari"})]}),e.jsxs(F,{variant:"outline",type:"button",onClick:P,children:[e.jsx(ie,{}),e.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Reset"})]}),U]})]})]})};export{je as F,xe as S};
