import{r as c,j as t,a as e,R as _,d as B}from"./app-b00eb01f.js";import{T as D,a as I,b as d,c as m,d as A,e as s}from"./table-8aa85b29.js";import{F as r}from"./FormatNumbering-e64be121.js";import{B as F}from"./button-f4666437.js";import L from"./Action-cce6c2a4.js";import{B as M}from"./BargeStatus-874a0f7f.js";import"./input-1f7c6b8e.js";import{T as O}from"./TextInput-b8952964.js";import{X as w}from"./x-8f7f2a14.js";import"./utils-3f044a58.js";import"./react-number-format.es-694e8a4d.js";import"./index-0f3ecbcf.js";import"./dialog-cc288b5a.js";import"./index-02d14211.js";import"./index-2592e2bd.js";import"./Combination-6984d92d.js";import"./index-ac893a70.js";import"./react-icons.esm-10b0ab0b.js";import"./card-4712ad93.js";import"./StatusPinjaman-08ba2385.js";import"./badge-ee4dec29.js";import"./BayarAngsuran-a9879361.js";import"./label-0e9fb9b5.js";import"./index-afb1a50b.js";import"./index.esm-15e423d5.js";import"./Checkbox-7f6e5ba3.js";import"./Loading-52feadd6.js";import"./transition-82b53ea1.js";import"./JenisNasabah-8429caa0.js";import"./InputError-87185630.js";import"./InputLabel-c5b0023f.js";import"./PrimaryButton-57d82d2c.js";import"./SelectList-8181a154.js";import"./DeleteAngsuran-19d45cf4.js";import"./DeleteLoan-65c58d3a.js";import"./useFrontEndPermission-f0910e5a.js";import"./NoEditOverlay-41dba005.js";import"./BadgeStatus-62fdec76.js";import"./Pengajuan-f34cf045.js";import"./accordion-14a6c498.js";import"./index-a6613f97.js";import"./WhiteOff-63746cdc.js";import"./PengajuanLama-b923e6ae.js";import"./createLucideIcon-39bb5dfd.js";const Be=({dateOfWeek:N,datas:f})=>{const[g,b]=c.useState([]),[p,u]=c.useState("");c.useEffect(()=>{if(f){const i=(a=>a.map(n=>({...n,data:n.data.filter(o=>!(o.lunas&&!o.is_paid)&&(!p||o.nama.toLowerCase().includes(p.toLowerCase())))})))(f);b(i)}},[f,p]);const h=(l,i)=>l.reduce((n,o)=>n+parseInt(o[i]??0),0),[y,v]=c.useState(null),[T,x]=c.useState(!1),S=l=>{v(l),x(!0)},j=()=>{x(!1),v(null)},[z,C]=c.useState([]),k=l=>{C(i=>i.includes(l)?i.filter(a=>a!==l):[...i,l])};return t("div",{className:"relative overflow-auto h-[70vh] lg:h-[85vh] scrollbar-none",children:[t(D,{className:"text-xs rounded-lg",children:[t(I,{className:"sticky top-0 left-0 z-10",children:[e(d,{children:e(m,{colSpan:"4",className:"bg-white",children:t("div",{className:"relative w-full mb-2 lg:w-auto lg:max-w-60",children:[e(O,{type:"text",placeholder:"Cari Nama",value:p,onChange:l=>u(l.target.value),className:"w-full text-xs"}),e(w,{className:"absolute right-0 w-auto h-5 text-gray-400 -translate-x-1/2 -translate-y-1/2 top-1/2",onClick:l=>u("")})]})})}),t(d,{className:"bg-gray-200",children:[e(m,{className:"text-center",children:"No"}),e(m,{className:"text-center",children:"Tanggal"}),e(m,{className:"text-center",children:"Nasabah"}),e(m,{className:"text-center border-x border-x-black",children:"Nominal"})]})]}),e(A,{className:"text-tinny",children:g?g.map((l,i)=>t(_.Fragment,{children:[e(d,{children:e(s,{colSpan:17+(N.length??0),children:t("div",{className:"flex items-center gap-3",children:[e(M,{value:l.type2})," ",e("div",{children:l.month})]})})}),l.data.map((a,n)=>t(d,{className:`${a.is_paid?a.angs_today==0?"bg-red-300 hover:bg-red-400":"bg-green-200 hover:bg-green-50":""}}`,children:[e(s,{onClick:()=>k(a.id),children:n+1}),e(s,{children:t("div",{className:"space-y-2 text-center",children:[e("div",{children:B(a.tanggal_drop).format("DD-MM")}),e("div",{children:e(F,{size:"xs",variant:a.lunas?"green":a.is_paid?"blue":"default",onClick:()=>S(a.id),children:a.lunas?"Lunas":a.is_paid?"Dibayar":"Bayar"})})]})}),t(s,{children:[e("div",{className:"text-xs font-semibold",children:a.nama}),e("div",{children:a.nik}),e("div",{children:a.alamat})]}),t(s,{className:"border-x border-x-black",children:[t("div",{className:"flex justify-between gap-6 ",children:[e("div",{children:"P"}),e(r,{value:a.pinjaman})]}),t("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e("div",{children:"A"}),t("div",{className:"flex gap-3",children:[e("div",{className:"italic whitespace-nowrap",children:e(r,{value:a.angs_today,prefix:"(",suffix:")"})}),e(r,{value:a.angsuran})]})]}),t("div",{className:"flex justify-between gap-6",children:[e("div",{children:"S"}),t("div",{className:"flex gap-3",children:[a.pemutihan_today!==0&&e("div",{className:"italic whitespace-nowrap",children:e(r,{value:a.pemutihan_today,prefix:"(",suffix:")"})}),e(r,{value:a.saldo})]})]})]})]},n)),t(d,{className:"bg-gray-100",children:[e(s,{className:"py-3",colSpan:3,children:"TOTAL"}),t(s,{className:"border-x border-x-black",children:[t("div",{className:"flex justify-between gap-6",children:[e("div",{children:"P"}),e(r,{value:h(l.data,"pinjaman")})]}),t("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e("div",{children:"A"}),t("div",{className:"flex gap-3",children:[e("div",{className:"italic whitespace-nowrap",children:e(r,{value:h(l.data,"angs_today"),prefix:"(",suffix:")"})}),e(r,{value:h(l.data,"angsuran")})]})]}),t("div",{className:"flex justify-between gap-6",children:[e("div",{children:"S"}),e(r,{value:h(l.data,"saldo")})]})]})]})]},i)):e(d,{children:e(s,{children:"a"})})})]}),e(L,{datas:g,show:T,onClosed:j,triggeredId:y})]})};export{Be as default};
