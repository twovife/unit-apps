import{W as H,r as m,j as a,a as e,F as V,c as F}from"./app-dcf13033.js";import{I as r}from"./InputError-78cdad1e.js";import{L as U}from"./Loading-056a80f7.js";import{B as u}from"./button-c48722d1.js";import{C as w,a as C,b as y,c as _,d as D}from"./card-424d87bf.js";import{D as W,a as $,b as J,c as Q,d as X}from"./dialog-7a68ec07.js";import{T as Y,a as Z,b as j,c as q}from"./tabs-5e455430.js";import{I as c}from"./input-fec5681b.js";import{L as i}from"./label-08e43d46.js";import{C as ee}from"./index.esm-6d76fe49.js";import{u as ae,S as te}from"./SelectComponent-9a314eb1.js";import ne from"./RiwayatPengajuan-4ebaee20.js";import{c as le}from"./createLucideIcon-7af152b9.js";import"./transition-10f56c81.js";import"./utils-36e2ef84.js";import"./index-3296fce1.js";import"./react-icons.esm-d26aebf6.js";import"./index-b1e70dfa.js";import"./index-73122204.js";import"./table-97108c5f.js";import"./DetailRiwayat-460ac98e.js";import"./dayjs.min-c945927f.js";import"./FormatNumbering-1cc18cbf.js";import"./react-number-format.es-41718927.js";/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ie=({show:S=!1,onClosed:v})=>{const{optKelompok:I}=ae(),{data:n,setData:h,post:P,errors:s,processing:T,reset:f}=H({isActiveMember:!1,nik:""}),[d,A]=m.useState(""),[L,b]=m.useState(!1),[k,N]=m.useState(),[R,x]=m.useState([]),[K,z]=m.useState();m.useEffect(()=>{z(n.request_date),h(t=>({...t,tanggal_drop:""}))},[n.request_date]);const B=(t,l)=>{h(l,t)},o=t=>{const{name:l,value:p}=t.target;h(l,p)},E=t=>{const{name:l,value:p}=t.target;A(p)},M=async t=>{t.preventDefault(),f(),b(!0),N(),await F({method:"post",url:route("transaction.nasabah_buku_transaksi"),data:{nik:d}}).then(function({data:l}){b(!1),h(p=>({...p,nik:l.return_nik,isActiveMember:l.falidate_nik})),l.falidate_nik?x(l.data):x([])}).catch(function({response:l}){N(l.data.message),b(!1)})},O=t=>{v(),f()},G=t=>{t.preventDefault(),P(route("transaction.store_buku_transaksi"),{onSuccess:()=>{v(),f()}})},g=t=>{const l=t.target.getAttribute("data-value");h("request_nominal",l)};return a(W,{open:S,onOpenChange:t=>t?"":O(),children:[e(U,{show:L||T}),a($,{className:"w-[90vw] h-[90vh] overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[e(J,{className:"max-h-10",children:e(Q,{children:"Buat Pinjaman Baru"})}),e(X,{children:a("div",{className:"flex flex-col w-full gap-3 lg:flex-row",children:[a("div",{className:"w-auto",children:[a("fieldset",{className:"w-full p-4 mb-3 border rounded-lg",children:[e("legend",{className:"px-1 -ml-1 text-sm font-medium",children:"Cari Nasabah"}),a("form",{className:"w-full mb-3",onSubmit:M,children:[e(i,{optional:!0,children:"NIK"}),a("div",{className:"flex items-center gap-3",children:[e(c,{type:"text",name:"nik",value:d,onChange:E,placeholder:"Cek NIK"}),a(u,{className:"text-xs",size:"sm",children:[e(re,{className:"w-auto h-4 mr-1"}),"Cari"]})]}),k&&e(r,{message:k,className:"mt-1"}),a("div",{className:`font-semibold mt-1 ${d.length==16?"text-green-500":"text-red-500"}`,children:[d.length," Digit"]})]})]}),d&&n.nik==d&&a("fieldset",{className:"w-full p-4 border rounded-lg",children:[e("legend",{className:"px-1 -ml-1 text-sm font-medium",children:"Detail Pinjaman"}),a("form",{className:"w-full mb-3",onSubmit:G,children:[a("div",{className:"flex gap-3",children:[a("div",{className:"w-full mb-3",children:[e(i,{children:"Tanggal Pengajuan"}),e(c,{type:"date",name:"request_date",required:!0,value:n.request_date,onChange:o}),e(r,{value:s.request_date})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Tanggal Drop"}),e(c,{type:"date",name:"tanggal_drop",min:K,required:!0,value:n.tanggal_drop,onChange:o}),e(r,{value:s.tanggal_drop})]})]}),n.request_date&&n.request_date==n.tanggal_drop&&e("div",{className:"w-full mb-3 font-semibold text-red-500",children:"DROP LANGSUNG"}),a("div",{className:"w-full mb-3",children:[e(i,{optional:!0,children:"NIK"}),e(c,{type:"text",name:"nik",value:n.nik,disabled:!0,onChange:o}),e(r,{value:s.nik})]}),!n.isActiveMember&&a(V,{children:[a("div",{className:"w-full mb-3",children:[e(i,{optional:!0,children:"NO KK"}),e(c,{type:"text",name:"no_kk",value:n.no_kk,onChange:o}),e(r,{value:s.no_kk})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Nama"}),e(c,{type:"text",name:"nama",value:n.nama,onChange:o,required:!0}),e(r,{value:s.nama})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Alamat"}),e(c,{type:"text",name:"alamat",value:n.alamat,onChange:o,required:!0}),e(r,{value:s.alamat})]})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Kelompok"}),e(te,{value:n.kelompok,options:I,name:"kelompok",onChange:o,required:!0}),e(r,{value:s.kelompok})]}),a("div",{className:"w-full mb-3",children:[e(i,{children:"Nominal Pinjaman"}),e(ee,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"request_nominal",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:B,value:n.request_nominal,placeholder:"Inputkan angka tanpa sparator"}),e(r,{value:s.request_nominal})]}),a("div",{className:"flex flex-wrap w-full gap-2 mb-3",children:[e(u,{type:"button",variant:"outline",size:"xs",onClick:g,"data-value":"500000",children:"500.000"}),e(u,{type:"button",variant:"outline",size:"xs",onClick:g,"data-value":"700000",children:"700.000"}),e(u,{type:"button",variant:"outline",size:"xs",onClick:g,"data-value":"1000000",children:"1.000.000"}),e(u,{type:"button",variant:"destructive",size:"xs",onClick:g,"data-value":"0",children:"reset"})]}),e("div",{className:"text-end",children:e(u,{children:"Submit"})})]})]})]}),e("div",{className:"w-auto lg:w-3/4",children:a(Y,{defaultValue:"pengajuan",className:"w-auto",children:[a(Z,{className:"grid w-full grid-cols-2",children:[e(j,{value:"pengajuan",children:"Riwayat Pinjaman"}),e(j,{value:"pinjaman",children:"Ringkasan Pinjaman"})]}),e(q,{value:"pengajuan",children:a(w,{children:[a(C,{children:[e(y,{children:"Riwayat Pengajuan"}),e(_,{children:"Riwayat Pengajuan Nasabah dilihat berdasarkan NIK yang tertera dari semua cabang"})]}),e(D,{className:"space-y-2",children:e("div",{className:"h-[50vh] border rounded-lg overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(ne,{data:R})})})]})}),e(q,{value:"pinjaman",children:a(w,{children:[a(C,{children:[e(y,{children:"Ringkasan Pinjaman"}),e(_,{children:"Ringkasan Analisa Nasabah"})]}),e(D,{className:"space-y-2",children:e("div",{children:"masih belum ada, update secara berkala"})})]})})]})})]})})]})]})};export{Ie as default};
