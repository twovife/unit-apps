import{q as M,r as s,a as e,j as r,d as g,e as _}from"./app-8a1cd623.js";import{D as P,a as H,b as L,c as B}from"./dialog-13a6f50e.js";import{C as b,a as j,b as D,d as v}from"./card-c1a8b1f4.js";import{T as C,a as T,b as i,c as n,d as y,e as a,F as S}from"./FormatNumbering-f743cc6c.js";import{S as d}from"./StatusPinjaman-2bbff3cf.js";import E from"./BayarAngsuran-594934dd.js";import I from"./JenisNasabah-8ea291c1.js";import K from"./DeleteAngsuran-e81fe9f4.js";import O from"./DeleteLoan-a815787b.js";import"./index-1d518dd3.js";import"./react-icons.esm-11f26a71.js";import"./index-3f107355.js";import"./button-a41c56e8.js";import"./index-f96983da.js";import"./utils-46f1eee5.js";import"./react-number-format.es-c2d1c126.js";import"./badge-7956c2ed.js";import"./label-0e94fe95.js";import"./index-849b1451.js";import"./input-6fa5ec28.js";import"./index.esm-549f52e0.js";import"./Checkbox-8ec290c7.js";import"./Loading-4435e883.js";import"./transition-1f108fba.js";import"./InputError-d41c15a7.js";import"./InputLabel-81478d26.js";import"./PrimaryButton-a0cf119c.js";import"./SelectList-709aeae0.js";import"./TextInput-a16c5cbe.js";const ge=({datas:Y,show:k=!1,onClosed:w,triggeredId:c})=>{const{server_filter:{closed_transaction:m}}=M().props,[R,h]=s.useState(!1),[F,p]=s.useState(!1),[t,u]=s.useState({}),[N,x]=s.useState([]),A=async l=>{h(!0),p(),await _({method:"get",url:route("pinjaman.get_loan_pinjaman",l)}).then(function({data:o}){h(!1),u(o.pinjaman),x(o.instalment)}).catch(function({response:o}){p()})};s.useEffect(()=>{c&&A(c)},[c,Y]);const f=()=>{w(),u({}),x([])};return e(P,{open:k,onOpenChange:l=>l?"":f(),children:r(H,{className:"w-[90vw] h-[90vh] overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[e(L,{className:"max-h-10",children:e(B,{children:"Isi Angsuran"})}),r(b,{className:"w-full",children:[e(j,{children:e(D,{children:"Rincian Pinjaman"})}),e(v,{children:r(C,{children:[e(T,{className:"bg-gray-200",children:r(i,{children:[e(n,{className:"text-center",children:"Nomor"}),e(n,{className:"text-center",children:"Nasabah"}),e(n,{className:"text-center",children:"NIK"}),e(n,{className:"text-center",children:"Alamat"}),e(n,{className:"text-center",children:"Unit"}),e(n,{className:"text-center",children:"Kelompok"}),e(n,{className:"text-center",children:"Hari"}),e(n,{className:"text-center",children:"Tanggal Drop"}),e(n,{className:"text-center",children:"Pinjaman"}),e(n,{className:"text-center",children:"Nama Mantri"}),e(n,{className:"text-center",children:"Status"}),e(n,{className:"text-center",children:"Ket"}),e(n,{className:"text-center",children:"Lunas"})]})}),e(y,{children:Object.keys(t).length!==0?r(i,{className:"text-center",children:[e(a,{children:t.id}),e(a,{children:t.nama}),e(a,{children:t.nik}),e(a,{children:t.alamat}),e(a,{children:t.branch}),e(a,{children:t.kelompok}),e(a,{children:t.hari}),e(a,{children:g(t.tanggal_drop).format("DD-MM-YYYY")}),e(a,{children:e(S,{value:t.pinjaman})}),e(a,{children:t.mantri}),e(a,{children:e(d,{value:t.status_pinjaman})}),e(a,{children:t.notes}),e(a,{children:e(d,{value:t.lunas?"Lunas":"Belum"})})]}):e(i,{children:e(a,{children:"Menunggu data . . ."})})})]})})]}),r("div",{className:"flex flex-col w-full gap-3 mt-3 lg:flex-row",children:[r(b,{className:"flex-[5]",children:[e(j,{children:e(D,{children:"Rincian Pinjaman"})}),e(v,{children:r(C,{children:[e(T,{className:"bg-gray-200",children:r(i,{children:[e(n,{className:"text-center",children:"Action"}),e(n,{className:"text-center",children:"Tanggal Pembayaran"}),e(n,{className:"text-center",children:"Jumlah"}),e(n,{className:"text-center",children:"Saldo"}),e(n,{className:"text-center",children:"Dana Titipan"}),e(n,{className:"text-center",children:"Mantri"}),e(n,{className:"text-center",children:"Status"})]})}),e(y,{children:Object.keys(t).length!==0?N.map(l=>r(i,{className:"text-center",children:[e(a,{children:(!m||m<l.transaction_date)&&e(K,{id:l.id})}),e(a,{children:g(l.transaction_date).format("DD-MM-YYYY")}),e(a,{children:e(S,{value:l.nominal})}),e(a,{children:l.saldo}),e(a,{children:l.danatitipan=="true"?"Yes":""}),e(a,{children:l.mantri}),r(a,{children:[" ",e(d,{value:l.status})]})]})):e(i,{children:e(a,{children:"Menunggu data . . ."})})})]})})]}),r("div",{className:"flex-[2]",children:[e(E,{triggeredId:t.id,triggeredPinjaman:t.pinjaman,instalment:N}),e(I,{loan:t}),r("div",{className:"flex items-center justify-end gap-3 p-3",children:[e("div",{className:"font-semibold",children:"Hapus Pinjaman"}),e(O,{id:t.id,onClosed:f})]})]})]})]})})};export{ge as default};
