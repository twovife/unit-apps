import{G as N,r as p,j as a}from"./app-CqcR4o-I.js";import{C as S}from"./Checkbox-BuJfmuZ4.js";import{I}from"./InputLabel-DDkR-8mN.js";import{L as F}from"./Loading-Gaw3zRP9.js";import{B as T}from"./BadgeStatus-CSjOmD9N.js";import{B as h}from"./button-C3Yf6trC.js";import{D as _,a as K,b as L,c as B,d as R}from"./dialog-DScv0ViO.js";import{I as q}from"./input-CkHiLFyH.js";import{L as u}from"./index-Dif-k1Vk.js";import{C as c}from"./index.esm-CXWYZSXO.js";import"./index-BVWlmGlD.js";import"./transition-PZ5ySWFT.js";import"./badge-kaDeqtLs.js";import"./utils-CytzSlOG.js";import"./index-C4zUF3DV.js";import"./index-DV-8cY1o.js";import"./index-lp8A8aSq.js";import"./Combination-Cz5CLeMm.js";import"./index-B1bOsdhx.js";import"./react-icons.esm-BLUH-Sw-.js";const oa=({show:x=!1,onClosed:m,triggeredData:s,type:r})=>{const{data:t,setData:l,post:k,reset:d,processing:j}=N({id:"",kelompok:"",date:"",kasbon:"",transport:"",type:"1",tunai:""}),[f,E]=p.useState(!1),i=p.useRef(null);p.useEffect(()=>{i.current&&i.current.focus()},[i.current]),p.useEffect(()=>{s&&l({id:s.id,kelompok:s.kelompok,date:s.tanggal,kasbon:s.kasbon,transport:s.transport,type:r,tunai:s.tunai})},[s]);const v=e=>{l(o=>({...o,[e.target.name]:e.target.type==="checkbox"?e.target.checked:e.target.value}))},w=e=>{const o=e;l(n=>({...n,kasbon:o,tunai:b(o,n.transport)}))},g=e=>{const o=e;l(n=>({...n,transport:o,tunai:b(n.kasbon,o)}))},b=(e,o)=>{const n=s.tunai-s.kasbon+s.transport;return parseFloat(n)+parseFloat(e)-parseFloat(o)},y=()=>{m(),d()},C=e=>{e.preventDefault(),k(route("kasir.rekap.rekap_post"),{onSuccess:()=>{d(),m()}})};return a.jsxs(_,{open:x,onOpenChange:e=>e?"":y(),children:[a.jsx(F,{show:f||j}),a.jsx(K,{className:"w-[90vw] h-[90vh] lg:h-auto lg:max-w-xl overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:f?a.jsx("div",{children:"Data Sedang Dimuat"}):a.jsxs(L,{children:[a.jsx(B,{children:r==1?"Input Kasbon & Transport":"Cek Tunai Mantri"}),a.jsx(R,{children:a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(u,{htmlFor:"date",children:"Tanggal"}),a.jsx(q,{readOnly:!0,name:"date",type:"date",required:!0,onChange:v,value:t.date})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(u,{htmlFor:"kasbon",children:"Kasbon"}),a.jsx(c,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-xs h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"kasbon",allowDecimals:!1,ref:i,prefix:"Rp. ",min:1,required:!0,onValueChange:w,value:t.kasbon,placeholder:"Inputkan angka tanpa sparator"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(u,{htmlFor:"transport",children:"Transport"}),a.jsx(c,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-xs h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"transport",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:g,value:t.transport,placeholder:"Inputkan angka tanpa sparator"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(u,{htmlFor:"tunai",children:"Tunai"}),a.jsx(c,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-xs h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"tunai",allowDecimals:!1,readOnly:!0,prefix:"Rp. ",min:1,value:t.tunai,placeholder:"Inputkan angka tanpa sparator"})]}),(s==null?void 0:s.status_approve_kepala)&&a.jsx(T,{className:"mb-3",value:"acc",children:"Kepala Sudah Aprov"}),(s==null?void 0:s.status_approve_kepala)&&r==2&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-start flex-1 gap-3 mb-1 whitespace-nowrap",children:[a.jsx(S,{placeholder:"Select Permission",id:"daily_kepala_approval",required:!0}),a.jsx(I,{htmlFor:"daily_kepala_approval",children:"Konfirmasi Jika Sudah Benar Semua"})]}),a.jsx("div",{className:"mb-3 text-right",children:a.jsx(h,{type:"submit",children:"Submit"})})]}),r==1&&a.jsx("div",{className:"mb-3 text-right",children:a.jsx(h,{type:"submit",children:"Submit"})})]})})]})})]})};export{oa as default};
