import{r as c,a as e,R as v,j as l,F as Re,k as Ie}from"./app-89964f60.js";import{D as Pe,a as _e,b as Te,c as Ee,d as Se}from"./dialog-cd6574bf.js";import{c as ee,a as ae,P as je}from"./index-4f223c39.js";import{c as De,u as Oe}from"./index-0998ba7c.js";import{P as _,u as ne}from"./index-ea477c8f.js";import{e as $,d as oe,c as Me}from"./index-07e776c0.js";import{c as He}from"./react-icons.esm-f5117589.js";import{c as K}from"./utils-aa679991.js";import{C as w,a as R,b as I,d as P,c as W}from"./card-662026ea.js";import{T as Le,a as Ve,b as H,c as L}from"./tabs-d076e04f.js";import X from"./RiwayatPengajuan-e5ea0351.js";import $e from"./Acc-ef81ed52.js";import Ke from"./ActionTable-833c8bc9.js";import Ue from"./RemoveLoan-de7dd104.js";import"./Loading-ceec09d3.js";import"./button-662018a0.js";import"./label-e1be8c98.js";import Fe from"./ChangeDetail-6802771a.js";import{N as Z}from"./NoEditOverlay-b8442ca0.js";import{u as Ge}from"./useFrontEndPermission-3fddc876.js";import"./table-bf376661.js";import"./index-5736d76b.js";import"./FormatNumbering-e171b06a.js";import"./react-number-format.es-33d4ddf3.js";import"./BargeStatus-23854b11.js";import"./ModalShowAngsuran-7ba3ae69.js";import"./badge-cca44c2f.js";import"./index.esm-520ad08f.js";import"./BadgeStatus-4c91a3a0.js";import"./use-mobile-4a7e3d84.js";import"./sonner-87354e32.js";import"./createLucideIcon-6426f9be.js";import"./transition-16898277.js";import"./index-bcb7b51f.js";import"./input-dda9d482.js";var U="Collapsible",[qe,te]=ee(U),[Be,F]=qe(U),re=c.forwardRef((n,t)=>{const{__scopeCollapsible:a,open:o,defaultOpen:i,disabled:r,onOpenChange:s,...d}=n,[u=!1,m]=$({prop:o,defaultProp:i,onChange:s});return e(Be,{scope:a,disabled:r,contentId:oe(),open:u,onOpenToggle:c.useCallback(()=>m(f=>!f),[m]),children:e(_.div,{"data-state":q(u),"data-disabled":r?"":void 0,...d,ref:t})})});re.displayName=U;var ie="CollapsibleTrigger",se=c.forwardRef((n,t)=>{const{__scopeCollapsible:a,...o}=n,i=F(ie,a);return e(_.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":q(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...o,ref:t,onClick:ae(n.onClick,i.onOpenToggle)})});se.displayName=ie;var G="CollapsibleContent",ce=c.forwardRef((n,t)=>{const{forceMount:a,...o}=n,i=F(G,n.__scopeCollapsible);return e(je,{present:a||i.open,children:({present:r})=>e(Je,{...o,ref:t,present:r})})});ce.displayName=G;var Je=c.forwardRef((n,t)=>{const{__scopeCollapsible:a,present:o,children:i,...r}=n,s=F(G,a),[d,u]=c.useState(o),m=c.useRef(null),f=ne(t,m),h=c.useRef(0),A=h.current,b=c.useRef(0),y=b.current,C=s.open||d,g=c.useRef(C),x=c.useRef();return c.useEffect(()=>{const p=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(p)},[]),Me(()=>{const p=m.current;if(p){x.current=x.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const k=p.getBoundingClientRect();h.current=k.height,b.current=k.width,g.current||(p.style.transitionDuration=x.current.transitionDuration,p.style.animationName=x.current.animationName),u(o)}},[s.open,o]),e(_.div,{"data-state":q(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!C,...r,ref:f,style:{"--radix-collapsible-content-height":A?`${A}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:C&&i})});function q(n){return n?"open":"closed"}var ze=re,Ye=se,Qe=ce,N="Accordion",We=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[B,Xe,Ze]=De(N),[E,qa]=ee(N,[Ze,te]),J=te(),le=v.forwardRef((n,t)=>{const{type:a,...o}=n,i=o,r=o;return e(B.Provider,{scope:n.__scopeAccordion,children:a==="multiple"?e(oa,{...r,ref:t}):e(na,{...i,ref:t})})});le.displayName=N;var[de,ea]=E(N),[pe,aa]=E(N,{collapsible:!1}),na=v.forwardRef((n,t)=>{const{value:a,defaultValue:o,onValueChange:i=()=>{},collapsible:r=!1,...s}=n,[d,u]=$({prop:a,defaultProp:o,onChange:i});return e(de,{scope:n.__scopeAccordion,value:d?[d]:[],onItemOpen:u,onItemClose:v.useCallback(()=>r&&u(""),[r,u]),children:e(pe,{scope:n.__scopeAccordion,collapsible:r,children:e(ue,{...s,ref:t})})})}),oa=v.forwardRef((n,t)=>{const{value:a,defaultValue:o,onValueChange:i=()=>{},...r}=n,[s=[],d]=$({prop:a,defaultProp:o,onChange:i}),u=v.useCallback(f=>d((h=[])=>[...h,f]),[d]),m=v.useCallback(f=>d((h=[])=>h.filter(A=>A!==f)),[d]);return e(de,{scope:n.__scopeAccordion,value:s,onItemOpen:u,onItemClose:m,children:e(pe,{scope:n.__scopeAccordion,collapsible:!0,children:e(ue,{...r,ref:t})})})}),[ta,S]=E(N),ue=v.forwardRef((n,t)=>{const{__scopeAccordion:a,disabled:o,dir:i,orientation:r="vertical",...s}=n,d=v.useRef(null),u=ne(d,t),m=Xe(a),h=Oe(i)==="ltr",A=ae(n.onKeyDown,b=>{var Y;if(!We.includes(b.key))return;const y=b.target,C=m().filter(M=>{var Q;return!((Q=M.ref.current)!=null&&Q.disabled)}),g=C.findIndex(M=>M.ref.current===y),x=C.length;if(g===-1)return;b.preventDefault();let p=g;const k=0,j=x-1,D=()=>{p=g+1,p>j&&(p=k)},O=()=>{p=g-1,p<k&&(p=j)};switch(b.key){case"Home":p=k;break;case"End":p=j;break;case"ArrowRight":r==="horizontal"&&(h?D():O());break;case"ArrowDown":r==="vertical"&&D();break;case"ArrowLeft":r==="horizontal"&&(h?O():D());break;case"ArrowUp":r==="vertical"&&O();break}const we=p%x;(Y=C[we].ref.current)==null||Y.focus()});return e(ta,{scope:a,disabled:o,direction:i,orientation:r,children:e(B.Slot,{scope:a,children:e(_.div,{...s,"data-orientation":r,ref:u,onKeyDown:o?void 0:A})})})}),T="AccordionItem",[ra,z]=E(T),me=v.forwardRef((n,t)=>{const{__scopeAccordion:a,value:o,...i}=n,r=S(T,a),s=ea(T,a),d=J(a),u=oe(),m=o&&s.value.includes(o)||!1,f=r.disabled||n.disabled;return e(ra,{scope:a,open:m,disabled:f,triggerId:u,children:e(ze,{"data-orientation":r.orientation,"data-state":Ce(m),...d,...i,ref:t,disabled:f,open:m,onOpenChange:h=>{h?s.onItemOpen(o):s.onItemClose(o)}})})});me.displayName=T;var he="AccordionHeader",fe=v.forwardRef((n,t)=>{const{__scopeAccordion:a,...o}=n,i=S(N,a),r=z(he,a);return e(_.h3,{"data-orientation":i.orientation,"data-state":Ce(r.open),"data-disabled":r.disabled?"":void 0,...o,ref:t})});fe.displayName=he;var V="AccordionTrigger",ge=v.forwardRef((n,t)=>{const{__scopeAccordion:a,...o}=n,i=S(N,a),r=z(V,a),s=aa(V,a),d=J(a);return e(B.ItemSlot,{scope:a,children:e(Ye,{"aria-disabled":r.open&&!s.collapsible||void 0,"data-orientation":i.orientation,id:r.triggerId,...d,...o,ref:t})})});ge.displayName=V;var ve="AccordionContent",be=v.forwardRef((n,t)=>{const{__scopeAccordion:a,...o}=n,i=S(N,a),r=z(ve,a),s=J(a);return e(Qe,{role:"region","aria-labelledby":r.triggerId,"data-orientation":i.orientation,...s,...o,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});be.displayName=ve;function Ce(n){return n?"open":"closed"}var ia=le,sa=me,ca=fe,Ne=ge,Ae=be;const la=ia,xe=c.forwardRef(({className:n,...t},a)=>e(sa,{ref:a,className:K("border-b",n),...t}));xe.displayName="AccordionItem";const ye=c.forwardRef(({className:n,children:t,...a},o)=>e(ca,{className:"flex",children:l(Ne,{ref:o,className:K("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...a,children:[t,e(He,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));ye.displayName=Ne.displayName;const ke=c.forwardRef(({className:n,children:t,...a},o)=>e(Ae,{ref:o,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e("div",{className:K("pb-4 pt-0",n),children:t})}));ke.displayName=Ae.displayName;const Ba=({show:n=!1,onClosed:t,triggeredData:a})=>{const[o,i]=c.useState([]),{isCreator:r}=Ge(),[s,d]=c.useState([]),[u,m]=c.useState(),[f,h]=c.useState(!1),[A,b]=c.useState(!1);c.useEffect(()=>{i(a),m(a==null?void 0:a.request)},[a]);const y=async C=>{h(!0),b(),await Ie({method:"post",url:route("transaction.nasabah_buku_transaksi"),data:{nik:a.nik}}).then(function({data:g}){h(!1),g.data?d(g.data):d([])}).catch(function({response:g}){b(g.data.message),h(!1)})};return c.useEffect(()=>{a!=null&&a.nik&&y()},[a]),e(Re,{children:e(Pe,{open:n,onOpenChange:C=>C?"":t(),children:l(_e,{className:"w-[95vw] h-auto px-1 overflow-hidden",children:[A&&e("div",{children:"terjadi kesalahan saat memuat data"}),f?e("div",{children:"Data Sedang Dimuat"}):l(Te,{children:[e(Ee,{children:"Check Transaksi Mantri"}),e(Se,{children:l(Le,{defaultValue:"account",className:"w-full h-max",children:[l(Ve,{className:"grid w-full grid-cols-3",children:[e(H,{value:"account",children:"Action"}),e(H,{value:"history",children:"Crash Kantor"}),e(H,{value:"historylain",children:"Crash UBM"})]}),l(L,{value:"account",className:"overflow-scroll h-[70vh]",children:[l(w,{children:[e(R,{children:e(I,{children:"Detail Pengajuan"})}),e(P,{className:"p-1 space-y-2",children:e("div",{className:"overflow-auto border rounded-lg scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(Ke,{datas:o})})})]}),l("div",{className:"flex flex-col gap-3 mt-3 lg:flex-row",children:[l("div",{className:"w-full",children:[l(w,{className:"relative mb-3",children:[e(R,{children:e(I,{children:"ACC / DROP"})}),e(P,{className:"space-y-2",children:e("div",{className:"flex items-end justify-center gap-2 mx-auto mb-3",children:e($e,{id:o==null?void 0:o.nomor_pengajuan,triggeredData:o,onClosed:t})})})]}),l(w,{className:"relative",children:[!r&&e(Z,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(R,{children:e(I,{children:"Admin Edit"})}),e(P,{className:"space-y-2",children:e("div",{children:o&&e(Fe,{onClosed:t,triggeredData:a})})})]})]}),l(w,{className:"relative w-full",children:[!r&&e(Z,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(R,{children:e(I,{children:"Remove Loan"})}),l(P,{className:"space-y-2",children:[l("div",{className:"w-full mt-6 mb-3 text-start",children:[e("p",{className:"text-lg font-semibold text-red-500",children:"Hapus Pinjaman"}),l("p",{className:"mb-1 text-xs italic font-light text-red-500",children:["Perhatian !!!, Jika pengajuan berstatus sukses, maka pengajuan sudah masuk dalam daftar angsuran, jika tetap dihapus akan mempengaruhi data pada angsuran, dan angsuran akan ikut terhapus.",e("br",{})," ( Penghapusan hanya bisa dilakukan 2hari dari tanggal drop (Mantri) dan 2bulan (Admin & Kepala))"]}),e("div",{className:"text-right",children:e(Ue,{triggeredId:o==null?void 0:o.nomor_pengajuan,onClosed:t})})]}),e(la,{className:"mb-3",type:"single",collapsible:!0,children:l(xe,{value:"item-1",children:[e(ye,{children:"Tambahan"}),e(ke,{children:e("div",{className:"text-sm",children:l("ul",{className:"list-disc list-outside",children:[e("li",{children:"1. Jika ada kesalahan pada angsuran baru ( angsuran hari ini ) utamakan menghapus, dan buat angsuran lagi."}),e("li",{children:"2. Jika terjadi kesalahan Status * Tanggal, usahakan untuk ganti tanggal ( tanggal drop / tanggal request ) dan dan reset status setelah itu"}),e("li",{children:"3. Setelah mengganti Detail pada angsuran, dimohon untuk cek ulang, storting & dan transaksi lagi, dikarenakan perubahan pada detail, akan mempengaruhi laporan lainnya"}),e("li",{className:"text-red-500",children:"4. Reset Status Hanya Tersedia jika pinjaman adalah drop lama / pengajuan"})]})})})]})})]})]})]})]}),e(L,{value:"history",children:l(w,{children:[l(R,{children:[e(I,{children:"Riwayat Pengajuan"}),e(W,{children:"Riwayat Pengajuan Nasabah dilihat berdasarkan NIK yang tertera dari semua cabang"})]}),e(P,{className:"p-1 space-y-2",children:e("div",{className:"h-[50vh] border rounded-lg overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(X,{data:s==null?void 0:s.history_branch})})})]})}),e(L,{value:"historylain",children:l(w,{children:[l(R,{children:[e(I,{children:"Riwayat Pengajuan"}),e(W,{children:"Riwayat Pengajuan Nasabah dilihat berdasarkan NIK yang tertera dari semua cabang"})]}),e(P,{className:"p-1 space-y-2",children:e("div",{className:"h-[50vh] border rounded-lg overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(X,{data:s==null?void 0:s.history_lain})})})]})})]})})]})]})})})};export{Ba as default};
