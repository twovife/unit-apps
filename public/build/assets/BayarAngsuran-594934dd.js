import{q as w,W as j,r as m,d as D,j as o,a}from"./app-8a1cd623.js";import{C as I,a as S,b as A,d as L}from"./card-c1a8b1f4.js";import{L as x}from"./label-0e94fe95.js";import{I as Y}from"./input-6fa5ec28.js";import{C as B}from"./index.esm-549f52e0.js";import{C as E}from"./Checkbox-8ec290c7.js";import{B as t}from"./button-a41c56e8.js";import{L as F}from"./Loading-4435e883.js";import"./utils-46f1eee5.js";import"./index-849b1451.js";import"./index-3f107355.js";import"./index-f96983da.js";import"./transition-1f108fba.js";const $=({triggeredId:p,triggeredPinjaman:P,instalment:r})=>{const{server_filter:{closed_transaction:C}}=w().props,{data:s,setData:l,post:g,errors:T,processing:y,reset:k,recentlySuccessful:_}=j({type_transaksi:"bayar",transaction_date:"",nominal:0,id:""});m.useEffect(()=>{l("id",p)},[p,_]);const z=(e,i)=>{l(i,e)},b=e=>{l(e.target.name,e.target.type==="checkbox"?e.target.checked:e.target.value)},n=e=>{const i=e.target.getAttribute("data-value");l("nominal",i)},v=e=>{const i=parseInt(s.nominal),d=parseInt(e.target.getAttribute("data-value"));l("nominal",d+i)},R=e=>{e.preventDefault(),g(route("pinjaman.bayar_pinjaman",s.id),{preserveScroll:!0,onSuccess:()=>{k("transaction_date","nominal")}})},[h,N]=m.useState(0);return m.useEffect(()=>{var d,f;const e=((d=r==null?void 0:r.sort((c,u)=>c.saldo-u.saldo)[0])==null?void 0:d.saldo)??0,i=((f=r==null?void 0:r.sort((c,u)=>c.transaction_date-u.transaction_date)[0])==null?void 0:f.transaction_date)??null;l(c=>({...c,transaction_date:i?D(i).add(1,"week").format("YYYY-MM-DD"):""})),N(e)},[r]),o(I,{className:"relative w-full mb-3",children:[a(F,{show:y}),a(S,{children:a(A,{children:"Isi Angsuran"})}),a(L,{children:o("form",{onSubmit:R,children:[o("div",{className:"mb-3",children:[a(x,{htmlFor:"transaction_date",children:"Tanggal Pembayaran"}),a(Y,{type:"date",min:C,name:"transaction_date",id:"transaction_date",className:"w-full",value:s.transaction_date,onChange:b})]}),o("div",{className:"mb-3",children:[a(x,{htmlFor:"nominal",children:"Nominal"}),a(B,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"nominal",allowDecimals:!1,prefix:"Rp. ",min:0,required:!0,onValueChange:z,value:s.nominal,placeholder:"Inputkan angka tanpa sparator"})]}),o("div",{className:"flex flex-wrap gap-3",children:[a(t,{type:"button",variant:"outline",size:"xs",onClick:v,"data-value":5e3,children:"+5 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:v,"data-value":1e4,children:"+10 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":5e4,children:"50 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":52e3,children:"52 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":6e4,children:"60 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":65e3,children:"65 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":1e5,children:"100 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":13e4,children:"130 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":195e3,children:"195 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":26e4,children:"260 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":39e4,children:"390 Rb"}),a(t,{type:"button",variant:"outline",size:"xs",onClick:n,"data-value":h,children:h})]}),o("div",{className:"flex items-center justify-between mt-6",children:[o("label",{className:"flex items-center",children:[a(E,{name:"danatitipan",value:s.danatitipan,onChange:b}),a("span",{className:"ml-2 text-sm text-gray-600",children:"Dana Titipan?"})]}),a(t,{type:"submit",children:"Submit"})]})]})})]})};export{$ as default};
