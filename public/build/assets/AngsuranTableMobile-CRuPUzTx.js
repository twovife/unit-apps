import{r as n,j as e,R as k,d as _}from"./app-CiLROors.js";import{T as B,a as D,b as c,c as o,d as I,e as l}from"./table--kZ2lymi.js";import{F as i}from"./FormatNumbering-CF0mG64G.js";import{B as A}from"./button-B-_ZI9JP.js";import F from"./Action-Bpc3A1ml.js";import{B as L}from"./BargeStatus-eKkaHgdy.js";import"./input-i9p7pOmK.js";import{T as E}from"./TextInput-DGdDYcrj.js";import{B as M}from"./BadgeStatus-BdSqHbSC.js";import{X as O}from"./x-BvPCVFaB.js";import"./utils-CytzSlOG.js";import"./react-number-format.es-BetPfe2h.js";import"./index-CNeZ6nCW.js";import"./dialog-DDFWZ_jw.js";import"./index-CuQQkl3E.js";import"./index-BQ-jIUZW.js";import"./Combination-DaDLpYmH.js";import"./index-wjHrwwr2.js";import"./index-mJOGoI4y.js";import"./index-CafNyFL5.js";import"./react-icons.esm-DLSmXl2m.js";import"./card-WB0Dmft6.js";import"./StatusPinjaman-DtHtpihP.js";import"./badge-CkznCjTU.js";import"./BayarAngsuran-DITGgO9a.js";import"./label-Sm4jSIme.js";import"./index-D2LLDp0i.js";import"./index.esm-CtFEp_IL.js";import"./Checkbox-DGR8S4Ul.js";import"./Loading-B9XM0ZiZ.js";import"./transition-uE1NqY_f.js";import"./JenisNasabah-DtsuPU7S.js";import"./InputError-xqAHFV6l.js";import"./InputLabel-Cq94cAbI.js";import"./PrimaryButton-D-LuwDzO.js";import"./SelectList-DxErZVM-.js";import"./DeleteAngsuran-n1kuYX6F.js";import"./DeleteLoan-vUNXwPao.js";import"./useFrontEndPermission-BVHYbysE.js";import"./NoEditOverlay-C3NLlkmh.js";import"./Pengajuan-CUwgcnpw.js";import"./accordion-BbXy6ha1.js";import"./index-BKCvhXd4.js";import"./WhiteOff-BrrssZg-.js";import"./PengajuanLama-C8Y8EmUV.js";import"./createLucideIcon-Kds7SzkS.js";const Ie=({dateOfWeek:u,datas:p})=>{const[j,v]=n.useState([]),[m,h]=n.useState("");n.useEffect(()=>{if(p){const t=(a=>a.map(r=>({...r,data:r.data.filter(d=>!(d.lunas&&!d.is_paid)&&(!m||d.nama.toLowerCase().includes(m.toLowerCase())))})))(p);v(t)}},[p,m]);const x=(s,t)=>s.reduce((r,d)=>r+parseInt(d[t]??0),0),[N,f]=n.useState(null),[b,g]=n.useState(!1),y=s=>{f(s),g(!0)},T=()=>{g(!1),f(null)},[R,S]=n.useState([]),C=s=>{S(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])};return e.jsxs("div",{className:"relative overflow-auto h-[70vh] lg:h-[85vh] scrollbar-none",children:[e.jsxs(B,{className:"text-xs rounded-lg",children:[e.jsxs(D,{className:"sticky top-0 left-0 z-10",children:[e.jsx(c,{children:e.jsx(o,{colSpan:"4",className:"bg-white",children:e.jsxs("div",{className:"relative w-full mb-2 lg:w-auto lg:max-w-60",children:[e.jsx(E,{type:"text",placeholder:"Cari Nama",value:m,onChange:s=>h(s.target.value),className:"w-full text-xs"}),e.jsx(O,{className:"absolute right-0 w-auto h-5 text-gray-400 -translate-x-1/2 -translate-y-1/2 top-1/2",onClick:s=>h("")})]})})}),e.jsxs(c,{className:"bg-gray-200",children:[e.jsx(o,{className:"text-center",children:"No"}),e.jsx(o,{className:"text-center",children:"Tanggal"}),e.jsx(o,{className:"text-center",children:"Nasabah"}),e.jsx(o,{className:"text-center border-x border-x-black",children:"Nominal"})]})]}),e.jsx(I,{className:"text-tinny",children:j?j.map((s,t)=>e.jsxs(k.Fragment,{children:[e.jsx(c,{children:e.jsx(l,{colSpan:17+(u.length??0),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{value:s.type2})," ",e.jsx("div",{children:s.month})]})})}),s.data.map((a,r)=>e.jsxs(c,{className:`${a.is_paid?a.angs_today==0?"bg-red-300 hover:bg-red-400":"bg-green-200 hover:bg-green-50":""}}`,children:[e.jsx(l,{onClick:()=>C(a.id),children:r+1}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("div",{children:_(a.tanggal_drop).format("DD-MM")}),e.jsx("div",{children:e.jsx(A,{size:"xs",variant:a.lunas?"green":a.is_paid?"blue":"default",onClick:()=>y(a.id),children:a.lunas?"Lunas":a.is_paid?"Dibayar":"Bayar"})})]})}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-xs font-semibold",children:[a.nama,a.notes&&e.jsx(M,{className:"ml-2",children:a.notes})]}),e.jsx("div",{children:a.nik}),e.jsx("div",{children:a.alamat})]}),e.jsxs(l,{className:"border-x border-x-black",children:[e.jsxs("div",{className:"flex justify-between gap-6 ",children:[e.jsx("div",{children:"P"}),e.jsx(i,{value:a.pinjaman})]}),e.jsxs("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e.jsx("div",{children:"A"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"italic whitespace-nowrap",children:e.jsx(i,{value:a.angs_today,prefix:"(",suffix:")"})}),e.jsx(i,{value:a.angsuran})]})]}),e.jsxs("div",{className:"flex justify-between gap-6",children:[e.jsx("div",{children:"S"}),e.jsxs("div",{className:"flex gap-3",children:[a.pemutihan_today!==0&&e.jsx("div",{className:"italic whitespace-nowrap",children:e.jsx(i,{value:a.pemutihan_today,prefix:"(",suffix:")"})}),e.jsx(i,{value:a.saldo})]})]})]})]},r)),e.jsxs(c,{className:"bg-gray-100",children:[e.jsx(l,{className:"py-3",colSpan:3,children:"TOTAL"}),e.jsxs(l,{className:"border-x border-x-black",children:[e.jsxs("div",{className:"flex justify-between gap-6",children:[e.jsx("div",{children:"P"}),e.jsx(i,{value:x(s.data,"pinjaman")})]}),e.jsxs("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e.jsx("div",{children:"A"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"italic whitespace-nowrap",children:e.jsx(i,{value:x(s.data,"angs_today"),prefix:"(",suffix:")"})}),e.jsx(i,{value:x(s.data,"angsuran")})]})]}),e.jsxs("div",{className:"flex justify-between gap-6",children:[e.jsx("div",{children:"S"}),e.jsx(i,{value:x(s.data,"saldo")})]})]})]})]},t)):e.jsx(c,{children:e.jsx(l,{children:"a"})})})]}),e.jsx(F,{datas:j,show:b,onClosed:T,triggeredId:N})]})};export{Ie as default};
