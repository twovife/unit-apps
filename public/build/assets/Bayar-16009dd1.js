import{W as w,j as a,a as e,b as j}from"./app-7f0443ce.js";import{L as C}from"./LinkButton-5fed96b4.js";import{d as f}from"./dayjs.min-4bdb8594.js";import{N as m}from"./react-number-format.es-355056a3.js";import{M}from"./MobileLayout-79f5a5da.js";import{I as h}from"./InputLabel-3c490949.js";import{T as S}from"./TextInput-e36d5c48.js";import{C as T}from"./index.esm-3b957411.js";import{S as _}from"./SelectList-a69b7c8c.js";import{u as D}from"./useServerFilter-cfee4573.js";import{P as I}from"./PrimaryButton-bde87748.js";import{C as B}from"./Checkbox-9cbe921a.js";import{I as o}from"./InputError-36c86eaf.js";import"./Loading-248af7c1.js";import"./transition-a6bea26b.js";import"./index-b05e510f.js";const Q=({loan:t,...l})=>{var p;console.log(l.back_button);const{status_angsuran:x}=D(),N=x.filter(s=>s.value>=t.status),{data:r,setData:u,post:v,processing:g,errors:i,reset:b}=w({danatitipan:!1,jumlah:0,status:t.status,pembayaran_date:""});console.log(i);const d=s=>{u(s.target.name,s.target.type==="checkbox"?s.target.checked:s.target.value)},y=(s,n)=>{u(n,parseInt(s))},k=s=>{s.preventDefault(),v(route("mantriapps.bayarpost",t.id),{onSuccess:()=>b()})};let c=t.pinjaman;return a(M,{auth:l.auth,errors:l.errors,header:"Buku Transaksi",loading:g,children:[e(j,{title:"Buku Transaksi"}),a("div",{className:"bg-white/30 rounded shadow w-full p-3",children:[a("div",{className:"flex w-full justify-between items-center",children:[e("div",{className:"font-semibold",children:"Bayar Angsuran"}),e("div",{className:"font-semibold",children:e(C,{as:"a",href:l.back_button,color:"blue",title:"Back"})})]}),a("div",{className:"overflow-auto",children:[a("div",{children:[a("div",{className:"flex gap-3",children:[a("div",{className:"flex-1 flex justify-between items-center",children:[e("div",{children:"Nasabah"}),e("div",{children:":"})]}),e("div",{className:"flex-[2]",children:t.customer.nama})]}),a("div",{className:"flex gap-3",children:[a("div",{className:"flex-1 flex justify-between items-center",children:[e("div",{children:"Alamat"}),e("div",{children:":"})]}),e("div",{className:"flex-[2]",children:t.customer.alamat})]}),a("div",{className:"flex gap-3",children:[a("div",{className:"flex-1 flex justify-between items-center",children:[e("div",{children:"NIK"}),e("div",{children:":"})]}),e("div",{className:"flex-[2]",children:t.customer.nik})]}),a("div",{className:"flex gap-3",children:[a("div",{className:"flex-1 flex justify-between items-center",children:[e("div",{children:"Kelompok | Mantri"}),e("div",{children:":"})]}),a("div",{className:"flex-[2]",children:[t.kelompok," | ",t.droper.nama_karyawan]})]}),a("div",{className:"flex gap-3",children:[a("div",{className:"flex-1 flex justify-between items-center",children:[e("div",{children:"Tanggal Drop"}),e("div",{children:":"})]}),a("div",{className:"flex-[2]",children:[t.hari," |"," ",f(t.tanggal_drop).format("DD-MM-YYYY")]})]}),a("div",{className:"flex gap-3",children:[a("div",{className:"flex-1 flex justify-between items-center",children:[e("div",{children:"Pinjaman"}),e("div",{children:":"})]}),a("div",{className:"flex-[2]",children:[e(m,{value:t.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "})," ","|"," ",t.status==1?e("span",{className:"text-green-500",children:"Normal"}):t.status==2?e("span",{className:"text-amber-500",children:"CM"}):t.status==3?e("span",{className:"text-red-500",children:"MB"}):e("span",{className:"text-white bg-black p-1",children:"ML"})]})]})]}),e("div",{className:"mt-3",children:e("div",{className:"shadow text-xs rounded overflow-auto border max-h-[50vh]",children:a("table",{className:"w-full bg-white",children:[e("thead",{children:a("tr",{className:"text-center",children:[e("th",{className:"p-2",children:"No"}),e("th",{className:"p-2",children:"Tanggal Angsur"}),e("th",{className:"p-2",children:"Jumlah"}),e("th",{className:"p-2",children:"Saldo"})]})}),e("tbody",{className:"text-center",children:(p=t.angsuran)==null?void 0:p.map((s,n)=>(c=c-s.jumlah,a("tr",{className:"odd:bg-gray-200",children:[e("td",{className:"px-2 py-1",children:n+1}),e("td",{className:"px-2 py-1",children:f(s.pembayaran_date).format("DD-MM-YY")}),e("td",{className:"px-2 py-1",children:e(m,{value:s.jumlah,displayType:"text",thousandSeparator:","})}),e("td",{className:"px-2 py-1",children:a("div",{className:"flex justify-center gap-2",children:[e("div",{className:"text-end flex-1",children:e(m,{value:c,displayType:"text",thousandSeparator:","})}),e("div",{className:"text-start flex-1",children:s.status==1?e("span",{className:"text-green-500",children:"Normal"}):s.status==2?e("span",{className:"text-amber-500",children:"CM"}):s.status==3?e("span",{className:"text-red-500",children:"MB"}):e("span",{className:"text-white bg-black p-1",children:"ML"})})]})})]},n)))})]})})}),a("form",{onSubmit:k,className:"mt-3",children:[e("div",{children:"Input Data"}),a("div",{className:"flex gap-3 flex-wrap",children:[a("div",{className:"flex-1",children:[e(h,{value:"Tanggal"}),e(S,{type:"date",onChange:d,max:l.batasan.maxdate,min:l.batasan.mindate,className:"block mt-1 w-full",id:"pembayaran_date",name:"pembayaran_date",value:r.pembayaran_date}),e(o,{message:i.pembayaran_date,className:"mt-2"})]}),a("div",{className:"flex-1",children:[e(h,{value:"Jumlah"}),e(T,{name:"jumlah",id:"jumlah",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full mt-1",allowDecimals:!1,prefix:"Rp. ",required:!0,onValueChange:y,value:r.jumlah,placeholder:"Inputkan angka tanpa sparator"}),e(o,{message:i.jumlah,className:"mt-2"})]})]}),a("div",{className:"mt-3",children:[e(h,{value:"Status"}),a("div",{className:"flex gap-3 items-center",children:[a("div",{className:"flex-[2]",children:[e(_,{onChange:d,options:N,className:"block mt-1 w-full",id:"status",name:"status",value:r.status}),e(o,{message:i.status,className:"mt-2"})]}),e("div",{className:"flex-1",children:a("label",{className:"flex items-center",children:[e(B,{name:"danatitipan",value:r.danatitipan,onChange:d}),e("span",{className:"ml-2 text-sm text-gray-600",children:"Dana Titipan?"})]})})]})]}),e("div",{className:"mt-3",children:e(I,{title:"Submit",type:"submit"})})]})]})]})]})};export{Q as default};
