import{r as c,a as e,R as v,j as u,q as ye,F as we,l as ke}from"./app-1dba9351.js";import{D as Re,a as Ie,b as _e,c as Pe,d as Te}from"./dialog-54f4b0aa.js";import{c as W,b as L,d as X,a as Z,P as Se,e as Ee}from"./index-fde572c1.js";import{c as Oe,u as je}from"./index-5649da3f.js";import{u as ee}from"./button-f157f404.js";import{P}from"./index-8e703f61.js";import{c as De}from"./react-icons.esm-f4f0808a.js";import{c as V}from"./utils-36e2ef84.js";import{C as k,a as R,b as I,d as _,c as Me}from"./card-89e16e77.js";import{T as He,a as Le,b as Y,c as Q}from"./tabs-0c3e9642.js";import Ve from"./RiwayatPengajuan-30748ebc.js";import $e from"./Acc-2cdf4e40.js";import Fe from"./ActionTable-479bd30e.js";import Ke from"./RemoveLoan-c02b7cc4.js";import"./Loading-e8037743.js";import"./label-a4aeba48.js";import qe from"./ChangeDetail-187ce52a.js";import"./index-c0dd9ecd.js";import"./FormatNumbering-d3eb1c6d.js";import"./react-number-format.es-08d37f9d.js";import"./index-5c4228d0.js";import"./BadgeStatus-be8d1a73.js";import"./badge-bcbfa6d6.js";import"./index.esm-5a1b3ab9.js";import"./transition-35d14a90.js";import"./index-a2f41169.js";import"./input-eaed37ea.js";var $="Collapsible",[Ge,ae]=W($),[Be,F]=Ge($),ne=c.forwardRef((n,r)=>{const{__scopeCollapsible:a,open:t,defaultOpen:i,disabled:o,onOpenChange:s,...d}=n,[p=!1,m]=L({prop:t,defaultProp:i,onChange:s});return e(Be,{scope:a,disabled:o,contentId:X(),open:p,onOpenToggle:c.useCallback(()=>m(h=>!h),[m]),children:e(P.div,{"data-state":q(p),"data-disabled":o?"":void 0,...d,ref:r})})});ne.displayName=$;var oe="CollapsibleTrigger",te=c.forwardRef((n,r)=>{const{__scopeCollapsible:a,...t}=n,i=F(oe,a);return e(P.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":q(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...t,ref:r,onClick:Z(n.onClick,i.onOpenToggle)})});te.displayName=oe;var K="CollapsibleContent",re=c.forwardRef((n,r)=>{const{forceMount:a,...t}=n,i=F(K,n.__scopeCollapsible);return e(Se,{present:a||i.open,children:({present:o})=>e(Je,{...t,ref:r,present:o})})});re.displayName=K;var Je=c.forwardRef((n,r)=>{const{__scopeCollapsible:a,present:t,children:i,...o}=n,s=F(K,a),[d,p]=c.useState(t),m=c.useRef(null),h=ee(r,m),f=c.useRef(0),g=f.current,A=c.useRef(0),y=A.current,N=s.open||d,C=c.useRef(N),b=c.useRef();return c.useEffect(()=>{const l=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(l)},[]),Ee(()=>{const l=m.current;if(l){b.current=b.current||{transitionDuration:l.style.transitionDuration,animationName:l.style.animationName},l.style.transitionDuration="0s",l.style.animationName="none";const w=l.getBoundingClientRect();f.current=w.height,A.current=w.width,C.current||(l.style.transitionDuration=b.current.transitionDuration,l.style.animationName=b.current.animationName),p(t)}},[s.open,t]),e(P.div,{"data-state":q(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!N,...o,ref:h,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:N&&i})});function q(n){return n?"open":"closed"}var ze=ne,Ue=te,Ye=re,x="Accordion",Qe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[G,We,Xe]=Oe(x),[S,Ma]=W(x,[Xe,ae]),B=ae(),ie=v.forwardRef((n,r)=>{const{type:a,...t}=n,i=t,o=t;return e(G.Provider,{scope:n.__scopeAccordion,children:a==="multiple"?e(na,{...o,ref:r}):e(aa,{...i,ref:r})})});ie.displayName=x;var[se,Ze]=S(x),[ce,ea]=S(x,{collapsible:!1}),aa=v.forwardRef((n,r)=>{const{value:a,defaultValue:t,onValueChange:i=()=>{},collapsible:o=!1,...s}=n,[d,p]=L({prop:a,defaultProp:t,onChange:i});return e(se,{scope:n.__scopeAccordion,value:d?[d]:[],onItemOpen:p,onItemClose:v.useCallback(()=>o&&p(""),[o,p]),children:e(ce,{scope:n.__scopeAccordion,collapsible:o,children:e(le,{...s,ref:r})})})}),na=v.forwardRef((n,r)=>{const{value:a,defaultValue:t,onValueChange:i=()=>{},...o}=n,[s=[],d]=L({prop:a,defaultProp:t,onChange:i}),p=v.useCallback(h=>d((f=[])=>[...f,h]),[d]),m=v.useCallback(h=>d((f=[])=>f.filter(g=>g!==h)),[d]);return e(se,{scope:n.__scopeAccordion,value:s,onItemOpen:p,onItemClose:m,children:e(ce,{scope:n.__scopeAccordion,collapsible:!0,children:e(le,{...o,ref:r})})})}),[oa,E]=S(x),le=v.forwardRef((n,r)=>{const{__scopeAccordion:a,disabled:t,dir:i,orientation:o="vertical",...s}=n,d=v.useRef(null),p=ee(d,r),m=We(a),f=je(i)==="ltr",g=Z(n.onKeyDown,A=>{var z;if(!Qe.includes(A.key))return;const y=A.target,N=m().filter(M=>{var U;return!((U=M.ref.current)!=null&&U.disabled)}),C=N.findIndex(M=>M.ref.current===y),b=N.length;if(C===-1)return;A.preventDefault();let l=C;const w=0,O=b-1,j=()=>{l=C+1,l>O&&(l=w)},D=()=>{l=C-1,l<w&&(l=O)};switch(A.key){case"Home":l=w;break;case"End":l=O;break;case"ArrowRight":o==="horizontal"&&(f?j():D());break;case"ArrowDown":o==="vertical"&&j();break;case"ArrowLeft":o==="horizontal"&&(f?D():j());break;case"ArrowUp":o==="vertical"&&D();break}const xe=l%b;(z=N[xe].ref.current)==null||z.focus()});return e(oa,{scope:a,disabled:t,direction:i,orientation:o,children:e(G.Slot,{scope:a,children:e(P.div,{...s,"data-orientation":o,ref:p,onKeyDown:t?void 0:g})})})}),T="AccordionItem",[ta,J]=S(T),de=v.forwardRef((n,r)=>{const{__scopeAccordion:a,value:t,...i}=n,o=E(T,a),s=Ze(T,a),d=B(a),p=X(),m=t&&s.value.includes(t)||!1,h=o.disabled||n.disabled;return e(ta,{scope:a,open:m,disabled:h,triggerId:p,children:e(ze,{"data-orientation":o.orientation,"data-state":be(m),...d,...i,ref:r,disabled:h,open:m,onOpenChange:f=>{f?s.onItemOpen(t):s.onItemClose(t)}})})});de.displayName=T;var ue="AccordionHeader",pe=v.forwardRef((n,r)=>{const{__scopeAccordion:a,...t}=n,i=E(x,a),o=J(ue,a);return e(P.h3,{"data-orientation":i.orientation,"data-state":be(o.open),"data-disabled":o.disabled?"":void 0,...t,ref:r})});pe.displayName=ue;var H="AccordionTrigger",me=v.forwardRef((n,r)=>{const{__scopeAccordion:a,...t}=n,i=E(x,a),o=J(H,a),s=ea(H,a),d=B(a);return e(G.ItemSlot,{scope:a,children:e(Ue,{"aria-disabled":o.open&&!s.collapsible||void 0,"data-orientation":i.orientation,id:o.triggerId,...d,...t,ref:r})})});me.displayName=H;var he="AccordionContent",fe=v.forwardRef((n,r)=>{const{__scopeAccordion:a,...t}=n,i=E(x,a),o=J(he,a),s=B(a);return e(Ye,{role:"region","aria-labelledby":o.triggerId,"data-orientation":i.orientation,...s,...t,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});fe.displayName=he;function be(n){return n?"open":"closed"}var ra=ie,ia=de,sa=pe,ve=me,ge=fe;const ca=ra,Ce=c.forwardRef(({className:n,...r},a)=>e(ia,{ref:a,className:V("border-b",n),...r}));Ce.displayName="AccordionItem";const Ae=c.forwardRef(({className:n,children:r,...a},t)=>e(sa,{className:"flex",children:u(ve,{ref:t,className:V("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...a,children:[r,e(De,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));Ae.displayName=ve.displayName;const Ne=c.forwardRef(({className:n,children:r,...a},t)=>e(ge,{ref:t,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e("div",{className:V("pb-4 pt-0",n),children:r})}));Ne.displayName=ge.displayName;const Ha=({show:n=!1,onClosed:r,triggeredData:a})=>{const{server_filter:{closed_transaction:t},auth:i}=ye().props,[o,s]=c.useState([]),[d,p]=c.useState([]),[m,h]=c.useState(),[f,g]=c.useState(!1),[A,y]=c.useState(!1);c.useEffect(()=>{s(a),h(a==null?void 0:a.request)},[a]);const N=async C=>{g(!0),y(),await ke({method:"post",url:route("transaction.nasabah_buku_transaksi"),data:{nik:a.nik}}).then(function({data:b}){g(!1),b.data?p(b.data):p([])}).catch(function({response:b}){y(b.data.message),g(!1)})};return c.useEffect(()=>{a!=null&&a.nik&&N()},[a]),e(we,{children:e(Re,{open:n,onOpenChange:C=>C?"":r(),children:u(Ie,{className:"w-[90vw] h-[90vh] lg:h-auto overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[A&&e("div",{children:"terjadi kesalahan saat memuat data"}),f?e("div",{children:"Data Sedang Dimuat"}):u(_e,{children:[e(Pe,{children:"Check Transaksi Mantri"}),e(Te,{children:u(He,{defaultValue:"account",className:"w-full",children:[u(Le,{className:"grid w-full grid-cols-2",children:[e(Y,{value:"account",children:"Action"}),e(Y,{value:"history",children:"Riwayat"})]}),u(Q,{value:"account",children:[u(k,{children:[e(R,{children:e(I,{children:"Detail Pengajuan"})}),e(_,{className:"space-y-2",children:e("div",{className:"overflow-auto border rounded-lg scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(Fe,{datas:o})})})]}),u("div",{className:"flex flex-col gap-3 mt-3 lg:flex-row",children:[u("div",{className:"w-full",children:[u(k,{className:"mb-3",children:[e(R,{children:e(I,{children:"ACC / DROP"})}),e(_,{className:"space-y-2",children:e("div",{className:"flex items-end justify-center gap-2 mx-auto mb-3",children:e($e,{id:o==null?void 0:o.nomor_pengajuan,triggeredData:o,onClosed:r})})})]}),i.permissions.includes("can update")&&u(k,{children:[e(R,{children:e(I,{children:"Admin Edit"})}),e(_,{className:"space-y-2",children:(a==null?void 0:a.tanggal_drop)<=t?e("div",{children:"Data Sudah Di Approve Oleh Pimpinan, Tidak Bisa Diubah, Hubungi IT untuk mengubah"}):e("div",{children:o&&e(qe,{onClosed:r,triggeredData:a})})})]})]}),u(k,{className:"w-full",children:[e(R,{children:e(I,{children:"Remove Loan"})}),u(_,{className:"space-y-2",children:[u("div",{className:"w-full mt-6 mb-3 text-start",children:[e("p",{className:"text-lg font-semibold text-red-500",children:"Hapus Pinjaman"}),e("p",{className:"mb-1 text-xs italic font-light text-red-500",children:"Perhatian !!!, Jika pengajuan berstatus sukses, maka pengajuan sudah masuk dalam daftar angsuran, jika tetap dihapus akan mempengaruhi data pada angsuran, dan angsuran akan ikut terhapus"}),e("div",{className:"text-right",children:e(Ke,{triggeredId:o==null?void 0:o.nomor_pengajuan,onClosed:r})})]}),i.permissions.includes("can update")&&e(ca,{className:"mb-3",type:"single",collapsible:!0,children:u(Ce,{value:"item-1",children:[e(Ae,{children:"Tambahan"}),e(Ne,{children:e("div",{className:"text-sm",children:u("ul",{className:"list-disc list-outside",children:[e("li",{children:"1. Jika ada kesalahan pada angsuran baru ( angsuran hari ini ) utamakan menghapus, dan buat angsuran lagi."}),e("li",{children:"2. Jika terjadi kesalahan Status * Tanggal, usahakan untuk ganti tanggal ( tanggal drop / tanggal request ) dan dan reset status setelah itu"}),e("li",{children:"3. Setelah mengganti Detail pada angsuran, dimohon untuk cek ulang, storting & dan transaksi lagi, dikarenakan perubahan pada detail, akan mempengaruhi laporan lainnya"}),e("li",{className:"text-red-500",children:"4. Reset Status Hanya Tersedia jika pinjaman adalah drop lama / pengajuan"})]})})})]})})]})]})]})]}),e(Q,{value:"history",children:u(k,{children:[u(R,{children:[e(I,{children:"Riwayat Pengajuan"}),e(Me,{children:"Riwayat Pengajuan Nasabah dilihat berdasarkan NIK yang tertera dari semua cabang"})]}),e(_,{className:"space-y-2",children:e("div",{className:"h-[50vh] border rounded-lg overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(Ve,{data:d.history_branch})})})]})})]})})]})]})})})};export{Ha as default};
