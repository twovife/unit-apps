import{q as ee,r as f,W as ae,d as W,j as l,F as M,a,y as le}from"./app-d0c32e8e.js";import{u as te,S as m}from"./SelectComponent-13a31218.js";import{B as _}from"./button-17a62d66.js";import{I as B}from"./input-487391ce.js";import{M as se,R as ne}from"./react-icons.esm-a170a26c.js";import{L as ie}from"./Loading-caf0f109.js";import{L as n}from"./label-34e21a78.js";const ue=({urlLink:y=route("home"),localState:F,searchDate:L=!1,labelDate:R="Date",searchMonth:E=!1,labelMonth:q="Bulan",searchPlanText:x=!1,planTextName:h="search",searchHari:G=!1,searchWilayah:K=!1,searchGroupingBranch:H=!1,searchKelompok:J=!1,children:U,nexOrPrevious:r=null,setNexOrPrevious:z})=>{const{selectedSearchParam:g,optWilayah:N,selectedWilayah:v,setSelectedWilayah:A,filteredBranch:O,optKelompok:Q,dayOpt:T}=te(),{server_filter:{hari:k,branch_id:S,month:b,date:C,wilayah:I,kelompok:j}}=ee().props,d=f.useRef(null),{data:i,setData:s,get:V,processing:u}=ae({}),[X,p]=f.useState(!1),o=e=>{const{name:t,value:c}=e.target;x?t==h?s(w=>{const D={[t]:c};for(const Y in w)Y!==t&&(D[Y]="");return D}):s(w=>({...w,[t]:c,[h]:""})):isNaN(c)?s(t,c):s(t,parseInt(c))},Z=e=>{const{value:t}=e.target;A(t),s({branch_id:""})},$=e=>{e.preventDefault(),V(y)},P=e=>{e.preventDefault(),le.visit(y,{onStart:t=>p(!0),onFinish:t=>p(!1)}),localStorage.setItem(F,JSON.stringify({oldFilter:[],oldPage:1}))};return f.useEffect(()=>{const e={};g?e[h]=g:(S&&(e.branch_id=parseInt(S)),C&&(e.date=C),b&&(e.month=b),I&&(e.wilayah=parseInt(I)),j&&(e.kelompok=parseInt(j)),k&&(e.hari=k)),Object.keys(e).length>0&&s(e)},[]),f.useEffect(()=>{p(u)},[u]),f.useEffect(()=>(r&&(r=="next"?(s(e=>({...e,date:W(e.date).add(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{d.current.click()},500)):r=="previous"&&(s(e=>({...e,date:W(e.date).subtract(1,"week").format("YYYY-MM-DD")})),setTimeout(()=>{d.current.click()},500))),()=>{r&&z(null)}),[r]),l(M,{children:[a(ie,{show:u||X}),l("form",{className:"flex flex-col items-end w-full gap-3 lg:w-auto lg:flex-row",onSubmit:$,children:[L&&l("div",{className:"w-full",children:[a(n,{children:R}),a(B,{className:"w-full",type:"date",name:"date",value:i.date,onChange:o,placeholder:"Name of your project"})]}),E&&l("div",{className:"w-full",children:[a(n,{children:q}),a(B,{className:"w-full",type:"month",name:"month",value:i.month,onChange:o,placeholder:"Name of your project"})]}),J&&l("div",{className:"w-full",children:[a(n,{children:"Kelompok"}),a(m,{className:"w-full",value:i.kelompok,options:Q,name:"kelompok",onChange:o})]}),K&&l("div",{className:"w-full",children:[a(n,{children:"Wilayah"}),a(m,{className:"w-full",value:i.wilayah,options:N,name:"wilayah",onChange:o})]}),G&&l("div",{className:"w-full",children:[a(n,{children:"Hari"}),a(m,{className:"w-full",value:i.hari,options:T,name:"hari",onChange:o})]}),H&&l(M,{children:[l("div",{className:"w-full",children:[a(n,{children:"Wilayah"}),a(m,{className:"w-full",required:"true",value:v,options:N,name:"wilayah",onChange:Z})]}),v!==""&&l("div",{className:"w-full",children:[a(n,{children:"Unit"}),a(m,{required:"true",className:"w-full",value:i.branch_id,options:O,name:"branch_id",nullvalue:!0,onChange:o})]})]}),l("div",{className:"flex items-center justify-end col-span-2 gap-3",children:[l(_,{ref:d,variant:"outline",type:"submit",children:[a(se,{className:"h-3.5 w-3.5"}),a("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Cari"})]}),l(_,{variant:"outline",type:"button",onClick:P,children:[a(ne,{}),a("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Reset"})]}),U]})]})]})};export{ue as S};
