import{r as n,a as m,F as Z,R as E}from"./app-9f0c20ba.js";import{c as L,a as T}from"./index-1dedb023.js";import{c as $,u as N,P as K}from"./index-598efb9f.js";import{a as J,u as Q,b as X}from"./index-ba8f6734.js";var P=n.forwardRef((e,t)=>{const{children:r,...o}=e,c=n.Children.toArray(r),a=c.find(te);if(a){const d=a.props.children,I=c.map(v=>v===a?n.Children.count(d)>1?n.Children.only(null):n.isValidElement(d)?d.props.children:null:v);return m(O,{...o,ref:t,children:n.isValidElement(d)?n.cloneElement(d,void 0,I):null})}return m(O,{...o,ref:t,children:r})});P.displayName="Slot";var O=n.forwardRef((e,t)=>{const{children:r,...o}=e;if(n.isValidElement(r)){const c=re(r);return n.cloneElement(r,{...oe(o,r.props),ref:t?$(t,c):c})}return n.Children.count(r)>1?n.Children.only(null):null});O.displayName="SlotClone";var ee=({children:e})=>m(Z,{children:e});function te(e){return n.isValidElement(e)&&e.type===ee}function oe(e,t){const r={...t};for(const o in t){const c=e[o],a=t[o];/^on[A-Z]/.test(o)?c&&a?r[o]=(...I)=>{a(...I),c(...I)}:c&&(r[o]=c):o==="style"?r[o]={...c,...a}:o==="className"&&(r[o]=[c,a].filter(Boolean).join(" "))}return{...e,...r}}function re(e){var o,c;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ne(e){const t=e+"CollectionProvider",[r,o]=L(t),[c,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=R=>{const{scope:s,children:u}=R,C=E.useRef(null),i=E.useRef(new Map).current;return m(c,{scope:s,itemMap:i,collectionRef:C,children:u})};d.displayName=t;const I=e+"CollectionSlot",v=E.forwardRef((R,s)=>{const{scope:u,children:C}=R,i=a(I,u),l=N(s,i.collectionRef);return m(P,{ref:l,children:C})});v.displayName=I;const f=e+"CollectionItemSlot",S="data-radix-collection-item",F=E.forwardRef((R,s)=>{const{scope:u,children:C,...i}=R,l=E.useRef(null),w=N(s,l),y=a(f,u);return E.useEffect(()=>(y.itemMap.set(l,{ref:l,...i}),()=>void y.itemMap.delete(l))),m(P,{[S]:"",ref:w,children:C})});F.displayName=f;function g(R){const s=a(e+"CollectionConsumer",R);return E.useCallback(()=>{const C=s.collectionRef.current;if(!C)return[];const i=Array.from(C.querySelectorAll(`[${S}]`));return Array.from(s.itemMap.values()).sort((y,h)=>i.indexOf(y.ref.current)-i.indexOf(h.ref.current))},[s.collectionRef,s.itemMap])}return[{Provider:d,Slot:v,ItemSlot:F},g,o]}var se=n.createContext(void 0);function ce(e){const t=n.useContext(se);return e||t||"ltr"}var x="rovingFocusGroup.onEntryFocus",ie={bubbles:!1,cancelable:!0},A="RovingFocusGroup",[M,k,le]=ne(A),[ae,Se]=L(A,[le]),[ue,fe]=ae(A),V=n.forwardRef((e,t)=>m(M.Provider,{scope:e.__scopeRovingFocusGroup,children:m(M.Slot,{scope:e.__scopeRovingFocusGroup,children:m(de,{...e,ref:t})})}));V.displayName=A;var de=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:c=!1,dir:a,currentTabStopId:d,defaultCurrentTabStopId:I,onCurrentTabStopIdChange:v,onEntryFocus:f,preventScrollOnEntryFocus:S=!1,...F}=e,g=n.useRef(null),R=N(t,g),s=ce(a),[u=null,C]=J({prop:d,defaultProp:I,onChange:v}),[i,l]=n.useState(!1),w=Q(f),y=k(r),h=n.useRef(!1),[j,D]=n.useState(0);return n.useEffect(()=>{const p=g.current;if(p)return p.addEventListener(x,w),()=>p.removeEventListener(x,w)},[w]),m(ue,{scope:r,orientation:o,dir:s,loop:c,currentTabStopId:u,onItemFocus:n.useCallback(p=>C(p),[C]),onItemShiftTab:n.useCallback(()=>l(!0),[]),onFocusableItemAdd:n.useCallback(()=>D(p=>p+1),[]),onFocusableItemRemove:n.useCallback(()=>D(p=>p-1),[]),children:m(K.div,{tabIndex:i||j===0?-1:0,"data-orientation":o,...F,ref:R,style:{outline:"none",...e.style},onMouseDown:T(e.onMouseDown,()=>{h.current=!0}),onFocus:T(e.onFocus,p=>{const H=!h.current;if(p.target===p.currentTarget&&H&&!i){const G=new CustomEvent(x,ie);if(p.currentTarget.dispatchEvent(G),!G.defaultPrevented){const _=y().filter(b=>b.focusable),Y=_.find(b=>b.active),q=_.find(b=>b.id===u),z=[Y,q,..._].filter(Boolean).map(b=>b.ref.current);W(z,S)}}h.current=!1}),onBlur:T(e.onBlur,()=>l(!1))})})}),U="RovingFocusGroupItem",B=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:c=!1,tabStopId:a,...d}=e,I=X(),v=a||I,f=fe(U,r),S=f.currentTabStopId===v,F=k(r),{onFocusableItemAdd:g,onFocusableItemRemove:R}=f;return n.useEffect(()=>{if(o)return g(),()=>R()},[o,g,R]),m(M.ItemSlot,{scope:r,id:v,focusable:o,active:c,children:m(K.span,{tabIndex:S?0:-1,"data-orientation":f.orientation,...d,ref:t,onMouseDown:T(e.onMouseDown,s=>{o?f.onItemFocus(v):s.preventDefault()}),onFocus:T(e.onFocus,()=>f.onItemFocus(v)),onKeyDown:T(e.onKeyDown,s=>{if(s.key==="Tab"&&s.shiftKey){f.onItemShiftTab();return}if(s.target!==s.currentTarget)return;const u=ve(s,f.orientation,f.dir);if(u!==void 0){if(s.metaKey||s.ctrlKey||s.altKey||s.shiftKey)return;s.preventDefault();let i=F().filter(l=>l.focusable).map(l=>l.ref.current);if(u==="last")i.reverse();else if(u==="prev"||u==="next"){u==="prev"&&i.reverse();const l=i.indexOf(s.currentTarget);i=f.loop?Re(i,l+1):i.slice(l+1)}setTimeout(()=>W(i))}})})})});B.displayName=U;var pe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function me(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ve(e,t,r){const o=me(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return pe[o]}function W(e,t=!1){const r=document.activeElement;for(const o of e)if(o===r||(o.focus({preventScroll:t}),document.activeElement!==r))return}function Re(e,t){return e.map((r,o)=>e[(t+o)%e.length])}var Fe=V,we=B;export{we as I,Fe as R,Se as a,ne as c,ce as u};
