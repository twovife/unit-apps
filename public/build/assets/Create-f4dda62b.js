import{r as i,j as a,a as t,b,d as v,e as w}from"./app-46702308.js";import{I as S}from"./InputError-3a21dcb6.js";import{I as C}from"./InputLabel-8c3f05d5.js";import{L as j}from"./LinkButton-a9c59433.js";import{P as D}from"./PrimaryButton-1db30701.js";import{T as I}from"./TextInput-3064a0ed.js";import{A as B}from"./AuthenticatedLayout-ff980fd7.js";import T from"./NewCustomer-393ccb95.js";import L from"./OldCustomer-f10f5b43.js";import{u as _}from"./useServerFilter-83ee4b5d.js";import{N as A}from"./react-number-format.es-3123ebc9.js";import"./Navbar-c3a58eec.js";import"./button-8a24cc1b.js";import"./index-f96983da.js";import"./utils-46f1eee5.js";import"./index-ff2a653e.js";import"./createLucideIcon-5c4fd079.js";import"./SweetAlert-9ac18bd6.js";import"./react-icons.esm-ffbe828b.js";import"./index-456a55a4.js";import"./index-2633d15f.js";import"./index-c1ba9f78.js";import"./Loading-384dbda5.js";import"./transition-c9987eb0.js";import"./SelectList-15128e2c.js";import"./index.esm-ffbb0be3.js";const lt=({max_date:d,min_date:u,...o})=>{const{emps:E,kolompokMantri:h}=_(null,null,null,o.mantri),[y,s]=i.useState(!1),[f,x]=i.useState(),[N,m]=i.useState(),[l,k]=i.useState(),[c,p]=i.useState(),g=e=>{const r=document.getElementById("nik").value;s(!0),x(),m(),p(),w({method:"post",url:route("transaction.getnik"),data:{nik:r}}).then(function({data:n}){m(n.data),k(n.reqistered_customer),p(r),s(!1)}).catch(function({response:n}){x(n.data.message),m(),p(),s(!1)})};return a(B,{auth:o.auth,errors:o.errors,header:"Buku Transaksi",loading:y,children:[t(b,{title:"Buku Transaksi"}),a("div",{className:"relative",children:[t("div",{className:"flex items-center justify-end px-6 py-4",children:t(j,{color:"outline",as:"a",href:o.back_to_index,title:"Back"})}),t("div",{className:"px-6 py-4 bg-white rounded-md shadow text-slate-700 ring-1 ring-slate-700 ring-opacity-5",children:a("div",{className:"flex items-start justify-between",children:[a("div",{className:"flex-[2]",children:[a("div",{className:"mb-3",children:[t(C,{htmlFor:"nik",value:"Input Nik Customer"}),a("div",{className:"flex items-center justify-start gap-3",children:[t(I,{id:"nik",type:"text",name:"nik",required:!0,className:"block mt-1",autoComplete:"nik"}),t(D,{title:"Submit",as:"button",type:"button",onClick:g})]}),t(S,{message:f,className:"mt-2"})]}),a("div",{className:"mb-3",children:[t("div",{className:"text-lg font-semibold",children:"History Pinjaman Customer"}),t("div",{className:"p-4 mb-3 overflow-hidden rounded shadow",children:a("table",{className:"w-full text-sm text-left text-gray-500",children:[t("thead",{className:"sticky top-0 text-xs text-gray-900 uppercase bg-gray-200 whitespace-nowrap",children:a("tr",{children:[t("th",{className:"px-3 py-2",children:"No"}),t("th",{className:"px-3 py-2",children:"Tanggal Drop"}),t("th",{className:"px-3 py-2",children:"Unit"}),t("th",{className:"px-3 py-2",children:"Kelompok"}),t("th",{className:"px-3 py-2",children:"Mantri"}),t("th",{className:"px-3 py-2",children:"Nama Customer"}),t("th",{className:"px-3 py-2",children:"Drop"}),t("th",{className:"px-3 py-2",children:"Lunas"}),t("th",{className:"px-3 py-2",children:"Status"})]})}),t("tbody",{children:N?N.map((e,r)=>a("tr",{children:[t("td",{className:"px-3 py-2",children:r+1}),t("td",{className:"px-3 py-2",children:v(e.tanggal_drop).format("DD-MM-YYYY")}),t("td",{className:"px-3 py-2",children:e.unit}),t("td",{className:"px-3 py-2",children:e.kelompok}),t("td",{className:"px-3 py-2",children:e.mantri_name}),t("td",{className:"px-3 py-2",children:e.customer_name}),t("td",{className:"px-3 py-2",children:t(A,{value:e.drop,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),t("td",{className:"px-3 py-2",children:e.lunas}),t("td",{className:"px-3 py-2",children:e.status=="normal"||e.status=="cm"?t("span",{className:"px-5 py-1 font-semibold text-white uppercase bg-green-400 rounded-lg",children:e.status}):e.status=="mb"?t("span",{className:"px-5 py-1 font-semibold text-white uppercase bg-yellow-400 rounded-lg",children:e.status}):t("span",{className:"px-5 py-1 font-semibold text-white uppercase bg-red-400 rounded-lg",children:e.status})})]},r)):t("tr",{children:t("td",{colSpan:3,children:"Data tidak ditemukan"})})})]})})]})]}),c?l?t(L,{setLoading:s,max_date:d,min_date:u,emps:h,nik:c,customer_id:l==null?void 0:l.id}):t(T,{setLoading:s,max_date:d,min_date:u,emps:h,nik:c}):""]})})]})]})};export{lt as default};
