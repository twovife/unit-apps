import{W as k,j as e,a,b as j}from"./app-5a7300cb.js";import{L as C}from"./LinkButton-a49eb556.js";import{d as f}from"./dayjs.min-b1a71238.js";import{N as m}from"./react-number-format.es-eef72c33.js";import{M as S}from"./MobileLayout-a34efac7.js";import{I as o}from"./InputLabel-92e2172f.js";import{T}from"./TextInput-c917ee66.js";import{C as D}from"./index.esm-63891647.js";import{S as I}from"./SelectList-63bb4abc.js";import{u as M}from"./useServerFilter-913c9e93.js";import{P as _}from"./PrimaryButton-385df188.js";import{C as B}from"./Checkbox-c2d7a417.js";import{I as h}from"./InputError-33922d74.js";import"./Loading-df1e59df.js";import"./transition-5c4cc82b.js";import"./index-22f60453.js";const Q=({loan:l,...t})=>{var p;const{status_angsuran:v}=M(),x=v.filter(s=>s.value>=l.status);console.log(l);const{data:r,setData:u,post:N,processing:g,errors:i,reset:b}=k({danatitipan:!1,jumlah:0,status:l.status,pembayaran_date:""});console.log(i);const n=s=>{u(s.target.name,s.target.type==="checkbox"?s.target.checked:s.target.value)},y=(s,d)=>{u(d,parseInt(s))},w=s=>{s.preventDefault(),N(route("mantriapps.bayarpost",l.id),{onSuccess:()=>b()})};let c=l.pinjaman;return e(S,{auth:t.auth,errors:t.errors,header:"Buku Transaksi",loading:g,children:[a(j,{title:"Buku Transaksi"}),e("div",{className:"bg-white/30 rounded shadow w-full p-3",children:[e("div",{className:"flex w-full justify-between items-center",children:[a("div",{className:"font-semibold",children:"Bayar Angsuran"}),a("div",{className:"font-semibold",children:a(C,{as:"a",href:t.back_button,color:"blue",title:"Back"})})]}),e("div",{className:"overflow-auto",children:[e("div",{children:[e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Nasabah"}),a("div",{children:":"})]}),a("div",{className:"flex-[2]",children:l.customer.nama})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Alamat"}),a("div",{children:":"})]}),a("div",{className:"flex-[2]",children:l.customer.alamat})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"NIK"}),a("div",{children:":"})]}),a("div",{className:"flex-[2]",children:l.customer.nik})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Kelompok | Mantri"}),a("div",{children:":"})]}),e("div",{className:"flex-[2]",children:[l.kelompok," | ",l.droper.nama_karyawan]})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Tanggal Drop"}),a("div",{children:":"})]}),a("div",{className:"flex-[2]",children:f(l.customer.tanggal_drop).format("DD-MM-YYYY")})]}),e("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 flex justify-between items-center",children:[a("div",{children:"Pinjaman"}),a("div",{children:":"})]}),e("div",{className:"flex-[2]",children:[a(m,{value:l.pinjaman,displayType:"text",thousandSeparator:",",prefix:"Rp. "}),"| ",l.status]})]})]}),a("div",{className:"mt-3",children:a("div",{className:"shadow text-xs rounded overflow-auto border max-h-[50vh]",children:e("table",{className:"w-full bg-white",children:[a("thead",{children:e("tr",{children:[a("th",{className:"p-2",children:"No"}),a("th",{className:"p-2",children:"Tanggal Angsur"}),a("th",{className:"p-2",children:"Jumlah"}),a("th",{className:"p-2",children:"Saldo"}),a("th",{className:"p-2",children:"Status"})]})}),a("tbody",{children:(p=l.angsuran)==null?void 0:p.map((s,d)=>(c=c-s.jumlah,e("tr",{className:"odd:bg-gray-200",children:[a("td",{className:"px-2 py-1",children:d+1}),a("td",{className:"px-2 py-1",children:f(s.pembayaran_date).format("DD-MM-YY")}),a("td",{className:"px-2 py-1",children:a(m,{value:s.jumlah,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-2 py-1",children:a(m,{value:c,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),a("td",{className:"px-2 py-1",children:s.status==1?"Normal":s.status==2?"CM":s.status==3?"MB":"ML"})]},d)))})]})})}),e("form",{onSubmit:w,className:"mt-3",children:[a("div",{children:"Input Data"}),e("div",{className:"flex gap-3 flex-wrap",children:[e("div",{className:"flex-1",children:[a(o,{value:"Tanggal"}),a(T,{type:"date",onChange:n,max:t.batasan.maxdate,min:t.batasan.mindate,className:"block mt-1 w-full",id:"pembayaran_date",name:"pembayaran_date",value:r.pembayaran_date}),a(h,{message:i.pembayaran_date,className:"mt-2"})]}),e("div",{className:"flex-1",children:[a(o,{value:"Jumlah"}),a(D,{name:"jumlah",id:"jumlah",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full mt-1",allowDecimals:!1,prefix:"Rp. ",required:!0,onValueChange:y,value:r.jumlah,placeholder:"Inputkan angka tanpa sparator"}),a(h,{message:i.jumlah,className:"mt-2"})]})]}),e("div",{className:"mt-3",children:[a(o,{value:"Status"}),e("div",{className:"flex gap-3 items-center",children:[e("div",{className:"flex-[2]",children:[a(I,{onChange:n,options:x,className:"block mt-1 w-full",id:"status",name:"status",value:r.status}),a(h,{message:i.status,className:"mt-2"})]}),a("div",{className:"flex-1",children:e("label",{className:"flex items-center",children:[a(B,{name:"danatitipan",value:r.danatitipan,onChange:n}),a("span",{className:"ml-2 text-sm text-gray-600",children:"Dana Titipan?"})]})})]})]}),a("div",{className:"mt-3",children:a(_,{title:"Submit",type:"submit"})})]})]})]})]})};export{Q as default};
