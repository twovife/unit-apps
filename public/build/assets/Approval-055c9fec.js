import{W as S,r as f,j as n,a as e,d as j,F as v}from"./app-82bbe0b0.js";import{C as L}from"./Checkbox-15329615.js";import{I as V}from"./InputLabel-afdf390f.js";import{L as H}from"./Loading-3230b6d6.js";import{F as s}from"./FormatNumbering-49f98b23.js";import{B}from"./button-3be5c09f.js";import{D as K,a as P,b as Y,c as A}from"./dialog-047534ba.js";import{I as E}from"./input-f3255846.js";import{T as N,a as w,b as p,c as i,d as T,e as t}from"./table-9a53cfe8.js";import{L as o}from"./index-cb4a205d.js";import{C as d}from"./index.esm-5be6ad7f.js";import"./transition-b51353d8.js";import"./react-number-format.es-67185123.js";import"./index-f96983da.js";import"./utils-46f1eee5.js";import"./index-e3094076.js";import"./react-icons.esm-2bdefa19.js";import"./index-a74a8613.js";const me=({show:x=!1,onClosed:k,triggeredData:a,staticData:h})=>{const{data:l,setData:b,post:C,reset:_,errors:G,processing:I}=S({id:"",date:"",kasbon:"",transport:"",masuk:"",keluar:"",target:"",baru:"",lama:"",storting:"",drop:"",rencana:"",tanggal_rencana_minggu_depan:"",rencana_minggu_depan:"",target_minggu_depan:""}),[W,F]=f.useState([]);f.useEffect(()=>{const r=(h==null?void 0:h.flat(2))??[];if(a){const u=r.filter(m=>m.request_date===a.tanggal&&m.tanggal_drop!=m.request_date),q=u.reduce((m,M)=>m+M.acc,0);b({id:a.grouping_id??null,date:a.tanggal,kasbon:a.kasbon,transport:a.transport,target:a.target,masuk:a.masuk==0?a.drop*.13:a.masuk,keluar:a.keluar==0?a.rencana*.13:a.keluar,baru:a.baru,lama:a.lama,storting:a.storting,drop:a.drop,rencana:a.rencana,tanggal_rencana_minggu_depan:(a==null?void 0:a.tanggal)??"",rencana_minggu_depan:q??0,target_minggu_depan:a.target+a.masuk-a.keluar}),F(u)}},[a,x]);const[g,z]=f.useState(!1),y=r=>{b(r.target.name,r.target.type==="checkbox"?r.target.checked:r.target.value)},c=(r,u)=>{b(u,r)},O=()=>{k(),_()},R=r=>{r.preventDefault(),C(route("kasir.rekap.ceklist_kepala"),{onSuccess:()=>{_(),k()}})};return n(K,{open:x,onOpenChange:r=>r?"":O(),children:[e(H,{show:g||I}),n(P,{className:"w-[90vw] h-[90vh] lg:h-auto lg:max-w-xl overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[e(Y,{children:e(A,{children:"Cek Transaksi"})}),g?e("div",{children:"Data Sedang Dimuat"}):n("div",{children:[a&&n("div",{children:[n(N,{className:"mb-3",children:[e(w,{children:n(p,{children:[e(i,{className:"text-center",children:"Total Transaksi"}),e(i,{className:"text-center",children:"Transaksi Open"}),e(i,{className:"text-center",children:"Transaksi Tolak"}),e(i,{className:"text-center",children:"Transaksi Gagal"}),e(i,{className:"text-center",children:"Transaksi Berhasil"})]})}),e(T,{children:n(p,{children:[e(t,{children:e(s,{className:"text-center",value:l.target})}),e(t,{children:e(s,{className:"text-center",value:a.drop})}),e(t,{children:e(s,{className:"text-center",value:a.storting})}),e(t,{children:e(s,{className:"text-center",value:a.baru})}),e(t,{children:e(s,{className:"text-center",value:a.baru})})]})})]}),e("br",{}),e("h1",{className:"mb-1",children:"Transaksi Hari Ini"}),n(N,{children:[e(w,{children:n(p,{children:[e(i,{className:"text-center",children:"Target"}),e(i,{className:"text-center",children:"Drop"}),e(i,{className:"text-center",children:"Storting"}),e(i,{className:"text-center",children:"Baru"}),e(i,{className:"text-center",children:"Lama"}),e(i,{className:"text-center",children:"Rencana"})]})}),e(T,{children:n(p,{children:[e(t,{children:e(s,{className:"text-center",value:l.target})}),e(t,{children:e(s,{className:"text-center",value:a.drop})}),e(t,{children:e(s,{className:"text-center",value:a.storting})}),e(t,{children:e(s,{className:"text-center",value:a.baru})}),e(t,{children:e(s,{className:"text-center",value:a.lama})}),e(t,{children:e(s,{className:"text-center",value:a.rencana})})]})})]})]}),n("form",{onSubmit:R,children:[n("div",{className:"max-h-[60vh] overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[!(a!=null&&a.is_generated)&&n("div",{className:"mb-3",children:[e(o,{htmlFor:"target",children:"Target"}),e(d,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"target",readOnly:l.status_dayly_approval,allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:c,value:l.target,placeholder:"Inputkan angka tanpa sparator"})]}),e("p",{className:"mb-1 italic font-thin text-gray-500",children:"di isi jika kasir belum mengisi"}),n("div",{className:"mb-3",children:[e(o,{htmlFor:"kasbon",children:"Kasbon"}),e(d,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"kasbon",readOnly:l.status_dayly_approval,allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:c,value:l.kasbon,placeholder:"Inputkan angka tanpa sparator"})]}),n("div",{className:"mb-3",children:[e(o,{htmlFor:"transport",children:"Transport"}),e(d,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"transport",readOnly:l.status_dayly_approval,allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:c,value:l.transport,placeholder:"Inputkan angka tanpa sparator"})]}),e("br",{}),e("p",{className:"mb-1 italic font-thin text-gray-500",children:"di isi saat Approval / Cek Transaksi Mantri"}),n("div",{className:"mb-3",children:[e(o,{htmlFor:"masuk",children:"Masuk"}),e(d,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"masuk",readOnly:l.status_dayly_approval,allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:c,value:l.masuk,placeholder:"Inputkan angka tanpa sparator"})]}),n("div",{className:"mb-3",children:[e(o,{htmlFor:"keluar",children:"Keluar"}),e(d,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"keluar",readOnly:l.status_dayly_approval,allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:c,value:l.keluar,placeholder:"Inputkan angka tanpa sparator"})]}),e("p",{className:"mb-3 font-semibold underline",children:"Transaksi Minggu Depan"}),n("div",{className:"mb-3",children:[e(o,{htmlFor:"tanggal_minggu_depan",children:"Tanggal Rencana Drop Minggu Depan"}),e(E,{name:"tanggal_rencana_minggu_depan",readOnly:l.tanggal_rencana_minggu_depan,min:j(l.date).add("1","week").format("YYYY-MM-DD"),required:!0,onChange:y,type:"date",value:l.tanggal_rencana_minggu_depan,placeholder:"Inputkan angka tanpa sparator"})]}),n("div",{className:"mb-3",children:[e(o,{htmlFor:"rencana_minggu_depan",children:"Rencana Drop Minggu Depan"}),e(d,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"rencana_minggu_depan",allowDecimals:!1,readOnly:l.status_dayly_approval,prefix:"Rp. ",min:1,required:!0,onValueChange:c,value:l.rencana_minggu_depan,placeholder:"Inputkan angka tanpa sparator"})]}),n("div",{className:"mb-3",children:[e(o,{htmlFor:"target_minggu_depan",children:"Target Minggu Depan"}),e(d,{className:"flex w-full px-3 py-1 text-sm transition-colors bg-transparent border rounded-md shadow-sm h-9 border-input file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",name:"target_minggu_depan",allowDecimals:!1,readOnly:l.status_dayly_approval,prefix:"Rp. ",min:1,required:!0,onValueChange:c,value:parseInt(l.target)+(parseInt(l.masuk)-parseInt(l.keluar)),placeholder:"Inputkan angka tanpa sparator"})]}),n("div",{className:"flex gap-3",children:[e("div",{className:"flex-1 text-center",children:e("div",{className:"mb-3",children:a!=null&&a.is_kasir?n(v,{children:[e("div",{children:"Telah Dicek Oleh Kepala"}),n("div",{children:["Pada Tanggal : ",a==null?void 0:a.at_approved]})]}):""})}),e("div",{className:"flex-1 text-center",children:e("div",{className:"mb-3",children:a!=null&&a.is_approved?n(v,{children:[e("div",{children:"Telah Dicek Oleh Kepala"}),n("div",{children:["Pada Tanggal : ",a==null?void 0:a.at_approved]})]}):n(v,{children:[n("div",{className:"flex items-center justify-center flex-1 gap-3 mb-1 whitespace-nowrap",children:[e(L,{readOnly:l.status_dayly_approval,name:"daily_kepala_approval",placeholder:"Select Permission",id:"daily_kepala_approval",onChange:y}),e(V,{htmlFor:"daily_kepala_approval",children:"Ceklist Pimpinan"})]}),e("div",{className:"italic font-light",children:"Dicentang jika Kepala Sudah Melakukan Ceklist Terhadap Transaksi Hari ini, setelah ceklist data angsuran dan transaksi tidak dapat diubah"})]})})})]})]}),e("div",{className:"mb-3 text-right",children:e(B,{type:"submit",children:"Submit"})})]})]})]})]})};export{me as default};
