import{X as I,r as l,j as e,d as u,e as _}from"./app-CqcR4o-I.js";import{D as H,a as P,b as R,c as O}from"./dialog-DScv0ViO.js";import{C as N,a as g,b as f,d as A}from"./card-DHWPA8Sm.js";import{T as b,a as v,b as r,c as n,d as D,e as a}from"./table-CNqJIfia.js";import{F as k}from"./FormatNumbering-CbzwBviE.js";import{S as o}from"./StatusPinjaman-BI6wF2NB.js";import B from"./BayarAngsuran-CXPpQMd8.js";import K from"./JenisNasabah-DCRTkJRZ.js";import Y from"./DeleteAngsuran-CfssmFUG.js";import"./TextInput-b504AXue.js";import"./button-C3Yf6trC.js";import"./Loading-Gaw3zRP9.js";import"./index-BVWlmGlD.js";import{u as U}from"./useFrontEndPermission-CNw0hFKA.js";import{N as w}from"./NoEditOverlay-Rde-VDlX.js";import"./index-DV-8cY1o.js";import"./index-lp8A8aSq.js";import"./index-C4zUF3DV.js";import"./Combination-Cz5CLeMm.js";import"./index-B1bOsdhx.js";import"./react-icons.esm-BLUH-Sw-.js";import"./utils-CytzSlOG.js";import"./react-number-format.es-CP72o4yg.js";import"./badge-kaDeqtLs.js";import"./label-BIauyaOn.js";import"./index-Dif-k1Vk.js";import"./input-CkHiLFyH.js";import"./index.esm-CXWYZSXO.js";import"./Checkbox-BuJfmuZ4.js";import"./InputError-C1zG0ETX.js";import"./InputLabel-DDkR-8mN.js";import"./PrimaryButton-Nnl1WI6N.js";import"./SelectList-o44vhy_v.js";import"./transition-PZ5ySWFT.js";const we=({datas:T,show:S=!1,onClosed:C,triggeredId:i})=>{const{server_filter:{closed_transaction:m}}=I().props,[J,x]=l.useState(!1),[F,d]=l.useState(!1),{isCreator:y}=U(),[s,j]=l.useState({}),[h,p]=l.useState([]),L=async t=>{x(!0),d(),await _({method:"get",url:route("pinjaman.get_loan_pinjaman",t)}).then(function({data:c}){x(!1),j(c.pinjaman),p(c.instalment)}).catch(function({response:c}){d()})};l.useEffect(()=>{i&&L(i)},[i,T]);const M=()=>{C(),j({}),p([])},E=`https://api.whatsapp.com/send?phone=6281233302284&text=saya%20dari%20%3A%20(%20ganti%20nama%20dan%20dari%20kantor%20mana%20)%0Aminta%20tolong%20untuk%20revisi%20data%20dengan%20nomor%20${i??null}.%0A(%20jangan%20hapus%20nomor%2C%20sebutkan%20revisi%20setelah%20nomor%20)`;return e.jsx(H,{open:S,onOpenChange:t=>t?"":M(),children:e.jsxs(P,{className:"w-[97vw] p-1 lg:p-6",children:[e.jsx(R,{className:"max-h-10",children:e.jsx(O,{className:"p-2",children:"Isi Angsuransxx"})}),e.jsxs("div",{className:" h-[90vh] overflow-auto lg:scrollbar-thin scrollbar-none",children:[e.jsxs(N,{className:"w-full",children:[e.jsx(g,{children:e.jsx(f,{children:"Rincian Pinjaman"})}),e.jsx(A,{className:"p-1 lg:p-5",children:e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs(b,{children:[e.jsx(v,{className:"bg-gray-200",children:e.jsxs(r,{children:[e.jsx(n,{className:"text-center",children:"Nomor"}),e.jsx(n,{className:"text-center",children:"Nasabah"}),e.jsx(n,{className:"text-center",children:"NIK"}),e.jsx(n,{className:"text-center",children:"Alamat"}),e.jsx(n,{className:"text-center",children:"Unit"}),e.jsx(n,{className:"text-center",children:"Kelompok"}),e.jsx(n,{className:"text-center",children:"Hari"}),e.jsx(n,{className:"text-center",children:"Tanggal Drop"}),e.jsx(n,{className:"text-center",children:"Pinjaman"}),e.jsx(n,{className:"text-center",children:"Nama Mantri"}),e.jsx(n,{className:"text-center",children:"Status"}),e.jsx(n,{className:"text-center",children:"Ket"}),e.jsx(n,{className:"text-center",children:"Lunas"})]})}),e.jsx(D,{children:Object.keys(s).length!==0?e.jsxs(r,{className:"text-center",children:[e.jsx(a,{children:s.id}),e.jsx(a,{children:s.nama}),e.jsx(a,{children:s.nik}),e.jsx(a,{children:s.alamat}),e.jsx(a,{children:s.branch}),e.jsx(a,{children:s.kelompok}),e.jsx(a,{children:s.hari}),e.jsx(a,{children:u(s.tanggal_drop).format("DD-MM-YYYY")}),e.jsx(a,{children:e.jsx(k,{value:s.pinjaman})}),e.jsx(a,{children:s.mantri}),e.jsx(a,{children:e.jsx(o,{value:s.status_pinjaman})}),e.jsx(a,{children:s.notes}),e.jsx(a,{children:e.jsx(o,{value:s.lunas?"Lunas":"Belum"})})]}):e.jsx(r,{children:e.jsx(a,{children:"Menunggu data . . ."})})})]})})})]}),e.jsxs("div",{className:"flex flex-col w-full gap-3 mt-3 lg:flex-row",children:[e.jsxs(N,{className:"flex-5",children:[e.jsx(g,{children:e.jsx(f,{children:"Rincian Angsuran"})}),e.jsx(A,{className:"p-1 lg:p-5",children:e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs(b,{className:"text-xs",children:[e.jsx(v,{className:"bg-gray-200",children:e.jsxs(r,{children:[e.jsx(n,{className:"text-center",children:"Action"}),e.jsx(n,{className:"text-center",children:"Tanggal"}),e.jsx(n,{className:"text-center",children:"Jumlah"}),e.jsx(n,{className:"text-center",children:"Saldo"}),e.jsx(n,{className:"hidden text-center lg:table-cell",children:"Mantri"}),e.jsx(n,{className:"text-center",children:"Status"})]})}),e.jsx(D,{children:Object.keys(s).length!==0?h.map(t=>e.jsxs(r,{className:"text-center",children:[e.jsx(a,{children:(!m||m<=t.transaction_date)&&e.jsx(Y,{id:t.id})}),e.jsx(a,{className:"whitespace-nowrap",children:u(t.transaction_date).format("DD-MM-YY")}),e.jsx(a,{className:`${t.danatitipan==1?"text-red-500 font-semibold":""}`,children:e.jsx(k,{value:t.nominal})}),e.jsx(a,{children:t.saldo}),e.jsx(a,{className:"hidden lg:block",children:t.mantri}),e.jsxs(a,{children:[" ",e.jsx(o,{value:t.status})]})]})):e.jsx(r,{children:e.jsx(a,{children:"Menunggu data . . ."})})})]})})})]}),e.jsxs("div",{className:"flex-2 relative",children:[s.lunas==!0?e.jsx(w,{value:"Pinjaman Sudah Lunas"}):!y&&e.jsx(w,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e.jsx(B,{triggeredId:s.id,triggeredPinjaman:s,instalment:h}),e.jsx(K,{loan:s}),e.jsxs("div",{className:"mt-3 text-red-400 text-tinny text-end",children:["JIKA TERJADI KESALAHAN TERHADAP ANGSURAN INI, BISA LAPORKAN MELALUI TOMBOL DIBAWAH",e.jsx("br",{}),e.jsx("a",{href:E,target:"_blank",className:"text-blue-500 underline",children:"Laporkan"})]})]})]})]})]})})};export{we as default};
