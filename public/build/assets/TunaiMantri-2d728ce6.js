import{r as s,q as R,j as g,a,c as j,F as M,R as F}from"./app-89964f60.js";import{T as k,a as O,b as l,c as f,d as _,e as h,f as B}from"./table-bf376661.js";import{u as H,f as u,g as K}from"./index-5736d76b.js";import{F as c}from"./FormatNumbering-e171b06a.js";import{B as m}from"./BargeStatus-23854b11.js";import"./button-662018a0.js";import"./utils-aa679991.js";import"./react-number-format.es-33d4ddf3.js";const Q=({setOnShowModal:b,setTriggeredData:w,setTriggeredType:y,datas:d})=>{const[p,T]=s.useState([]),{auth:x}=R().props;s.useEffect(()=>{T(d)},[d]);const i=(e=>e.reduce((t,o)=>(Object.keys(o).forEach(r=>{t[r]=(t[r]||0)+(o[r]||0)}),t),{}))(p),C=(e,t)=>{b(!0),w(e),y(t)},v=s.useMemo(()=>[{header:"",accessorKey:"kelompok",cell:({getValue:e,cell:t})=>g("div",{className:"flex items-center justify-center gap-3",children:[a("div",{children:t.row.original.type=="daily"?e():j(t.row.original.tanggal).format("DD-MM")}),x.permissions.includes("can update")&&a(m,{onClick:()=>C(t.row.original,2),value:t.row.original.status_dayly_approval,children:t.row.original.status_dayly_approval?"Approved":"Open"})]})},{header:"Titipan 9%",accessorKey:"titipan9",cell:({getValue:e})=>a(c,{value:e()}),footer:e=>a(c,{value:i.titipan9})},{header:"Tunai",accessorKey:"tunai",cell:({getValue:e})=>a(c,{value:e()}),footer:e=>a(c,{value:i.tunai})},{header:"Status",accessorKey:"is_balance",cell:({getValue:e})=>a(m,{value:e()})}],[i]),n=H({data:p,columns:v,getCoreRowModel:K(),debugTable:!0}),[E,D]=s.useState(!1),[q,N]=s.useState(),S=e=>{D(!0),N(e)};return a(M,{children:g(k,{className:"w-full mb-3 table-auto",children:[a(O,{className:"sticky top-0 z-10 bg-gray-100",children:n.getHeaderGroups().map((e,t)=>a(l,{children:e.headers.map((o,r)=>a(f,{className:"text-center",children:u(o.column.columnDef.header,o.getContext())},r))},t))}),a(_,{children:n.getRowModel().rows.length?n.getRowModel().rows.map((e,t)=>a(F.Fragment,{children:a(l,{className:"text-center",children:e.getVisibleCells().map(o=>a(h,{className:`${o.column.columnDef.className}`,children:o.column.columnDef.type=="show"?a("div",{className:"flex items-center justify-center gap-2",children:a(m,{value:o.row.original.status,onClick:()=>S(o.row.original)})}):u(o.column.columnDef.cell,o.getContext())},o.id))},t)},t)):a(l,{children:a(h,{colSpan:"4",children:"Belum Ada Catatan Pinjaman"})})}),a(B,{children:n.getFooterGroups().map(e=>a(l,{children:e.headers.map(t=>a(f,{className:"text-center text-black bg-gray-100",children:u(t.column.columnDef.footer,t.getContext())},t.id))},e.id))})]})})};export{Q as default};
