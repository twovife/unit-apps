import{X as F,r as e,A as T,j as s,S as A,d as D,x as b,e as I}from"./app-BnAv2Hzl.js";import{I as M}from"./InputError-CwrRepLc.js";import{I as _}from"./InputLabel-dsy3QrID.js";import{P as $}from"./PrimaryButton-CS-KRvNA.js";import{T as B}from"./TextInput-CkscnrDY.js";import{A as E}from"./AuthenticatedLayout-CoiYsQ8b.js";import{N as L}from"./react-number-format.es-BKXXtrFi.js";import Y from"./OldCustomer-Chiw3Lxt.js";import P from"./NewCustomer-Bq_ygG5t.js";import"./Dropdown-D5blTd2_.js";import"./button-DVnFfyYj.js";import"./index-Yx9Orm9B.js";import"./utils-CytzSlOG.js";import"./createLucideIcon-kFXs4s9k.js";import"./sweetalert2.esm.all-DQ3Js4qL.js";import"./index-RC2NLhaa.js";import"./index-C7Kvpxj9.js";import"./index-DO2yxxHC.js";import"./index-CddJaa3A.js";import"./Combination-D3prO9Mv.js";import"./index-C_NtcRp9.js";import"./index-B-rrWyFS.js";import"./react-icons.esm-CjJ5fR3N.js";import"./SweetAlert-fltp_AKX.js";import"./Loading-DSehy3hP.js";import"./transition-D-FqaDGM.js";import"./Checkbox-C32FpV5e.js";import"./SelectList-BYsbpJL1.js";import"./index.esm-C9uqaXne.js";function R(j,y,i,n,N,o=null){var k;const{kelompok:r}=F().props,[f,c]=e.useState(!1),[v,d]=e.useState(o?((k=N[0])==null?void 0:k[o])??null:null),p=a=>{d(a)},[m,x]=e.useState({...y}),h=a=>{const{value:w,name:C}=a.target;x({...m,[C]:w})},g=[{id:1,value:"senin",display:"Senin"},{id:2,value:"selasa",display:"Selasa"},{id:3,value:"rabu",display:"Rabu"},{id:4,value:"kamis",display:"Kamis"},{id:5,value:"jumat",display:"Jumat"},{id:6,value:"sabtu",display:"Sabtu"}],t=[];for(let a=1;a<=10;a++)t.push({id:a,value:a,display:`Mantri ${a}`});const l=r==null?void 0:r.map(a=>({id:a,value:a,display:`Mantri ${a}`})),u=i==null?void 0:i.map(a=>{if(o=="wilayah")return{id:a.id,value:a.wilayah,display:`wilayah ${a.wilayah}`};if(o=="unit")return{id:a.id,value:a.unit,display:`${a.unit}`}}),S=n==null?void 0:n.map(a=>({id:a.id,value:a.id,display:`${a.nama_karyawan} - ${a.jabatan} ${a.area!=0?a.area:""}`}));return{serverFilters:m,onServerFilterChange:h,onServerFilterSubmit:a=>{c(!0),T.get(route(j),m)},branchess:u,loading:f,setLoading:c,activeTab:v,setActiveTab:d,handleTabClick:p,transaction_day:g,emps:S,mantriMantri:t,kolompokMantri:l,status_angsuran:[{id:1,value:1,display:"normal"},{id:2,value:2,display:"cm"},{id:3,value:3,display:"mb"},{id:4,value:4,display:"ml"}]}}const Ns=({max_date:j,min_date:y,...i})=>{const{emps:n,status_angsuran:N}=R(null,null,null,i.mantri),[o,r]=e.useState(!1),[f,c]=e.useState(),[v,d]=e.useState(),[p,m]=e.useState(),[x,h]=e.useState(),g=t=>{const l=document.getElementById("nik").value;r(!0),c(),d(),h(),I({method:"post",url:route("transaction.getnik"),data:{nik:l}}).then(function({data:u}){d(u.data),m(u.reqistered_customer),h(l),r(!1)}).catch(function({response:u}){c(u.data.message),d(),h(),r(!1)})};return s.jsxs(E,{auth:i.auth,errors:i.errors,header:"Buku Transaksi",loading:o,children:[s.jsx(A,{title:"Batch Upload"}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex p-4",children:[s.jsxs("div",{className:"flex-2",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(_,{htmlFor:"nik",value:"Input Nik Customer"}),s.jsxs("div",{className:"flex items-center justify-start gap-3 mt-1",children:[s.jsx(B,{id:"nik",type:"text",name:"nik",required:!0,className:"block",autoComplete:"nik"}),s.jsx($,{title:"Cek",as:"button",type:"button",onClick:g})]}),s.jsx(M,{message:f,className:"mt-2"})]}),x?p?s.jsx(Y,{status:N,setLoading:r,max_date:j,min_date:y,emps:n,nik:x,url:route("batchupdate.batch_post"),customer_id:p==null?void 0:p.id}):s.jsx(P,{status:N,setLoading:r,max_date:j,min_date:y,emps:n,nik:x,url:route("batchupdate.batch_post")}):"",s.jsx("div",{className:"mb-3"})]}),s.jsx("div",{className:"flex-3",children:s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-lg font-semibold",children:"History Pinjaman Customer"}),s.jsx("div",{className:"p-4 mb-3 overflow-hidden rounded shadow-sm",children:s.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[s.jsx("thead",{className:"sticky top-0 text-xs text-gray-900 uppercase bg-gray-200 whitespace-nowrap",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2",children:"No"}),s.jsx("th",{className:"px-3 py-2",children:"Tanggal Drop"}),s.jsx("th",{className:"px-3 py-2",children:"Unit"}),s.jsx("th",{className:"px-3 py-2",children:"Kelompok"}),s.jsx("th",{className:"px-3 py-2",children:"Mantri"}),s.jsx("th",{className:"px-3 py-2",children:"Nama Customer"}),s.jsx("th",{className:"px-3 py-2",children:"Drop"}),s.jsx("th",{className:"px-3 py-2",children:"Lunas"}),s.jsx("th",{className:"px-3 py-2",children:"Status"})]})}),s.jsx("tbody",{children:v?v.map((t,l)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-3 py-2",children:l+1}),s.jsx("td",{className:"px-3 py-2",children:D(t.tanggal_drop).format("DD-MM-YYYY")}),s.jsx("td",{className:"px-3 py-2",children:t.unit}),s.jsx("td",{className:"px-3 py-2",children:t.kelompok}),s.jsx("td",{className:"px-3 py-2",children:t.mantri_name}),s.jsx("td",{className:"px-3 py-2",children:t.customer_name}),s.jsx("td",{className:"px-3 py-2",children:s.jsx(L,{value:t.drop,displayType:"text",thousandSeparator:",",prefix:"Rp. "})}),s.jsx("td",{className:"px-3 py-2",children:t.lunas}),s.jsx("td",{className:"px-3 py-2",children:t.status=="normal"||t.status=="cm"?s.jsx(b,{as:"a",href:route("pinjaman.normal.show",t.id),className:"px-5 py-1 font-semibold text-white uppercase bg-green-400 rounded-lg",children:t.status}):t.status=="mb"?s.jsx(b,{as:"a",href:route("pinjaman.normal.show",t.id),className:"px-5 py-1 font-semibold text-white uppercase bg-yellow-400 rounded-lg",children:t.status}):s.jsx(b,{as:"a",href:route("pinjaman.normal.show",t.id),className:"px-5 py-1 font-semibold text-white uppercase bg-red-400 rounded-lg",children:t.status})})]},l)):s.jsx("tr",{children:s.jsx("td",{colSpan:3,children:"Data tidak ditemukan"})})})]})})]})})]})})]})};export{Ns as default};
