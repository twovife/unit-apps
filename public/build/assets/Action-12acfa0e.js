import{r as c,a as e,R as b,j as u,F as ye,l as we}from"./app-a3b3d9df.js";import{D as Re,a as Ie,b as Pe,c as _e,d as Te}from"./dialog-709fd813.js";import{c as X,b as L,d as Z,a as ee,P as Ee,e as Se}from"./index-fe4ec7cb.js";import{c as De,u as Oe}from"./index-6c8a5bc8.js";import{u as ae}from"./button-39f64595.js";import{P as _}from"./index-a37574d6.js";import{c as je}from"./react-icons.esm-c8ab316a.js";import{c as V}from"./utils-36e2ef84.js";import{C as w,a as R,b as I,d as P,c as Me}from"./card-c39b4da8.js";import{T as He,a as Le,b as Y,c as Q}from"./tabs-e0c13a39.js";import Ve from"./RiwayatPengajuan-ef3f36d6.js";import $e from"./Acc-31fd6cf6.js";import Fe from"./ActionTable-7b533bcb.js";import Ke from"./RemoveLoan-33b70ef0.js";import"./Loading-b27ba1e3.js";import"./label-adcec698.js";import Ue from"./ChangeDetail-03b4448b.js";import{N as W}from"./NoEditOverlay-fa5e4780.js";import{u as Ge}from"./useFrontEndPermission-fc6cbcd8.js";import"./index-457ef76f.js";import"./table-ae1bfb85.js";import"./index-334fec83.js";import"./FormatNumbering-a989250f.js";import"./react-number-format.es-1250ecaa.js";import"./BadgeStatus-b75befc5.js";import"./badge-2ae26ba0.js";import"./index.esm-78e49203.js";import"./transition-c842480c.js";import"./index-a77e83d6.js";import"./input-6086a8f3.js";var $="Collapsible",[qe,ne]=X($),[Je,F]=qe($),te=c.forwardRef((n,o)=>{const{__scopeCollapsible:a,open:t,defaultOpen:i,disabled:r,onOpenChange:s,...l}=n,[p=!1,m]=L({prop:t,defaultProp:i,onChange:s});return e(Je,{scope:a,disabled:r,contentId:Z(),open:p,onOpenToggle:c.useCallback(()=>m(f=>!f),[m]),children:e(_.div,{"data-state":U(p),"data-disabled":r?"":void 0,...l,ref:o})})});te.displayName=$;var oe="CollapsibleTrigger",re=c.forwardRef((n,o)=>{const{__scopeCollapsible:a,...t}=n,i=F(oe,a);return e(_.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":U(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...t,ref:o,onClick:ee(n.onClick,i.onOpenToggle)})});re.displayName=oe;var K="CollapsibleContent",ie=c.forwardRef((n,o)=>{const{forceMount:a,...t}=n,i=F(K,n.__scopeCollapsible);return e(Ee,{present:a||i.open,children:({present:r})=>e(ze,{...t,ref:o,present:r})})});ie.displayName=K;var ze=c.forwardRef((n,o)=>{const{__scopeCollapsible:a,present:t,children:i,...r}=n,s=F(K,a),[l,p]=c.useState(t),m=c.useRef(null),f=ae(o,m),h=c.useRef(0),N=h.current,v=c.useRef(0),k=v.current,C=s.open||l,g=c.useRef(C),x=c.useRef();return c.useEffect(()=>{const d=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(d)},[]),Se(()=>{const d=m.current;if(d){x.current=x.current||{transitionDuration:d.style.transitionDuration,animationName:d.style.animationName},d.style.transitionDuration="0s",d.style.animationName="none";const y=d.getBoundingClientRect();h.current=y.height,v.current=y.width,g.current||(d.style.transitionDuration=x.current.transitionDuration,d.style.animationName=x.current.animationName),p(t)}},[s.open,t]),e(_.div,{"data-state":U(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!C,...r,ref:f,style:{"--radix-collapsible-content-height":N?`${N}px`:void 0,"--radix-collapsible-content-width":k?`${k}px`:void 0,...n.style},children:C&&i})});function U(n){return n?"open":"closed"}var Be=te,Ye=re,Qe=ie,A="Accordion",We=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[G,Xe,Ze]=De(A),[E,$a]=X(A,[Ze,ne]),q=ne(),se=b.forwardRef((n,o)=>{const{type:a,...t}=n,i=t,r=t;return e(G.Provider,{scope:n.__scopeAccordion,children:a==="multiple"?e(ta,{...r,ref:o}):e(na,{...i,ref:o})})});se.displayName=A;var[ce,ea]=E(A),[le,aa]=E(A,{collapsible:!1}),na=b.forwardRef((n,o)=>{const{value:a,defaultValue:t,onValueChange:i=()=>{},collapsible:r=!1,...s}=n,[l,p]=L({prop:a,defaultProp:t,onChange:i});return e(ce,{scope:n.__scopeAccordion,value:l?[l]:[],onItemOpen:p,onItemClose:b.useCallback(()=>r&&p(""),[r,p]),children:e(le,{scope:n.__scopeAccordion,collapsible:r,children:e(de,{...s,ref:o})})})}),ta=b.forwardRef((n,o)=>{const{value:a,defaultValue:t,onValueChange:i=()=>{},...r}=n,[s=[],l]=L({prop:a,defaultProp:t,onChange:i}),p=b.useCallback(f=>l((h=[])=>[...h,f]),[l]),m=b.useCallback(f=>l((h=[])=>h.filter(N=>N!==f)),[l]);return e(ce,{scope:n.__scopeAccordion,value:s,onItemOpen:p,onItemClose:m,children:e(le,{scope:n.__scopeAccordion,collapsible:!0,children:e(de,{...r,ref:o})})})}),[oa,S]=E(A),de=b.forwardRef((n,o)=>{const{__scopeAccordion:a,disabled:t,dir:i,orientation:r="vertical",...s}=n,l=b.useRef(null),p=ae(l,o),m=Xe(a),h=Oe(i)==="ltr",N=ee(n.onKeyDown,v=>{var z;if(!We.includes(v.key))return;const k=v.target,C=m().filter(M=>{var B;return!((B=M.ref.current)!=null&&B.disabled)}),g=C.findIndex(M=>M.ref.current===k),x=C.length;if(g===-1)return;v.preventDefault();let d=g;const y=0,D=x-1,O=()=>{d=g+1,d>D&&(d=y)},j=()=>{d=g-1,d<y&&(d=D)};switch(v.key){case"Home":d=y;break;case"End":d=D;break;case"ArrowRight":r==="horizontal"&&(h?O():j());break;case"ArrowDown":r==="vertical"&&O();break;case"ArrowLeft":r==="horizontal"&&(h?j():O());break;case"ArrowUp":r==="vertical"&&j();break}const ke=d%x;(z=C[ke].ref.current)==null||z.focus()});return e(oa,{scope:a,disabled:t,direction:i,orientation:r,children:e(G.Slot,{scope:a,children:e(_.div,{...s,"data-orientation":r,ref:p,onKeyDown:t?void 0:N})})})}),T="AccordionItem",[ra,J]=E(T),ue=b.forwardRef((n,o)=>{const{__scopeAccordion:a,value:t,...i}=n,r=S(T,a),s=ea(T,a),l=q(a),p=Z(),m=t&&s.value.includes(t)||!1,f=r.disabled||n.disabled;return e(ra,{scope:a,open:m,disabled:f,triggerId:p,children:e(Be,{"data-orientation":r.orientation,"data-state":be(m),...l,...i,ref:o,disabled:f,open:m,onOpenChange:h=>{h?s.onItemOpen(t):s.onItemClose(t)}})})});ue.displayName=T;var pe="AccordionHeader",me=b.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,i=S(A,a),r=J(pe,a);return e(_.h3,{"data-orientation":i.orientation,"data-state":be(r.open),"data-disabled":r.disabled?"":void 0,...t,ref:o})});me.displayName=pe;var H="AccordionTrigger",he=b.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,i=S(A,a),r=J(H,a),s=aa(H,a),l=q(a);return e(G.ItemSlot,{scope:a,children:e(Ye,{"aria-disabled":r.open&&!s.collapsible||void 0,"data-orientation":i.orientation,id:r.triggerId,...l,...t,ref:o})})});he.displayName=H;var fe="AccordionContent",ge=b.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,i=S(A,a),r=J(fe,a),s=q(a);return e(Qe,{role:"region","aria-labelledby":r.triggerId,"data-orientation":i.orientation,...s,...t,ref:o,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});ge.displayName=fe;function be(n){return n?"open":"closed"}var ia=se,sa=ue,ca=me,ve=he,Ce=ge;const la=ia,Ae=c.forwardRef(({className:n,...o},a)=>e(sa,{ref:a,className:V("border-b",n),...o}));Ae.displayName="AccordionItem";const Ne=c.forwardRef(({className:n,children:o,...a},t)=>e(ca,{className:"flex",children:u(ve,{ref:t,className:V("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...a,children:[o,e(je,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));Ne.displayName=ve.displayName;const xe=c.forwardRef(({className:n,children:o,...a},t)=>e(Ce,{ref:t,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e("div",{className:V("pb-4 pt-0",n),children:o})}));xe.displayName=Ce.displayName;const Fa=({show:n=!1,onClosed:o,triggeredData:a})=>{const[t,i]=c.useState([]),{isCreator:r}=Ge(),[s,l]=c.useState([]),[p,m]=c.useState(),[f,h]=c.useState(!1),[N,v]=c.useState(!1);c.useEffect(()=>{i(a),m(a==null?void 0:a.request)},[a]);const k=async C=>{h(!0),v(),await we({method:"post",url:route("transaction.nasabah_buku_transaksi"),data:{nik:a.nik}}).then(function({data:g}){h(!1),g.data?l(g.data):l([])}).catch(function({response:g}){v(g.data.message),h(!1)})};return c.useEffect(()=>{a!=null&&a.nik&&k()},[a]),e(ye,{children:e(Re,{open:n,onOpenChange:C=>C?"":o(),children:u(Ie,{className:"w-[90vw] h-[90vh] lg:h-auto overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:[N&&e("div",{children:"terjadi kesalahan saat memuat data"}),f?e("div",{children:"Data Sedang Dimuat"}):u(Pe,{children:[e(_e,{children:"Check Transaksi Mantri"}),e(Te,{children:u(He,{defaultValue:"account",className:"w-full",children:[u(Le,{className:"grid w-full grid-cols-2",children:[e(Y,{value:"account",children:"Action"}),e(Y,{value:"history",children:"Riwayat"})]}),u(Q,{value:"account",children:[u(w,{children:[e(R,{children:e(I,{children:"Detail Pengajuan"})}),e(P,{className:"space-y-2",children:e("div",{className:"overflow-auto border rounded-lg scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(Fe,{datas:t})})})]}),u("div",{className:"flex flex-col gap-3 mt-3 lg:flex-row",children:[u("div",{className:"w-full",children:[u(w,{className:"relative mb-3",children:[e(R,{children:e(I,{children:"ACC / DROP"})}),e(P,{className:"space-y-2",children:e("div",{className:"flex items-end justify-center gap-2 mx-auto mb-3",children:e($e,{id:t==null?void 0:t.nomor_pengajuan,triggeredData:t,onClosed:o})})})]}),u(w,{className:"relative",children:[!r&&e(W,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(R,{children:e(I,{children:"Admin Edit"})}),e(P,{className:"space-y-2",children:e("div",{children:t&&e(Ue,{onClosed:o,triggeredData:a})})})]})]}),u(w,{className:"relative w-full",children:[!r&&e(W,{value:"User Tidak Dapat Digunakan Untuk Mengedit"}),e(R,{children:e(I,{children:"Remove Loan"})}),u(P,{className:"space-y-2",children:[u("div",{className:"w-full mt-6 mb-3 text-start",children:[e("p",{className:"text-lg font-semibold text-red-500",children:"Hapus Pinjaman"}),u("p",{className:"mb-1 text-xs italic font-light text-red-500",children:["Perhatian !!!, Jika pengajuan berstatus sukses, maka pengajuan sudah masuk dalam daftar angsuran, jika tetap dihapus akan mempengaruhi data pada angsuran, dan angsuran akan ikut terhapus.",e("br",{})," ( Penghapusan hanya bisa dilakukan 2hari dari tanggal drop (Mantri) dan 2bulan (Admin & Kepala))"]}),e("div",{className:"text-right",children:e(Ke,{triggeredId:t==null?void 0:t.nomor_pengajuan,onClosed:o})})]}),e(la,{className:"mb-3",type:"single",collapsible:!0,children:u(Ae,{value:"item-1",children:[e(Ne,{children:"Tambahan"}),e(xe,{children:e("div",{className:"text-sm",children:u("ul",{className:"list-disc list-outside",children:[e("li",{children:"1. Jika ada kesalahan pada angsuran baru ( angsuran hari ini ) utamakan menghapus, dan buat angsuran lagi."}),e("li",{children:"2. Jika terjadi kesalahan Status * Tanggal, usahakan untuk ganti tanggal ( tanggal drop / tanggal request ) dan dan reset status setelah itu"}),e("li",{children:"3. Setelah mengganti Detail pada angsuran, dimohon untuk cek ulang, storting & dan transaksi lagi, dikarenakan perubahan pada detail, akan mempengaruhi laporan lainnya"}),e("li",{className:"text-red-500",children:"4. Reset Status Hanya Tersedia jika pinjaman adalah drop lama / pengajuan"})]})})})]})})]})]})]})]}),e(Q,{value:"history",children:u(w,{children:[u(R,{children:[e(I,{children:"Riwayat Pengajuan"}),e(Me,{children:"Riwayat Pengajuan Nasabah dilihat berdasarkan NIK yang tertera dari semua cabang"})]}),e(P,{className:"space-y-2",children:e("div",{className:"h-[50vh] border rounded-lg overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin",children:e(Ve,{data:s.history_branch})})})]})})]})})]})]})})})};export{Fa as default};
