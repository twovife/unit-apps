import{r as c,j as a,a as e,R as k,c as C}from"./app-89964f60.js";import{T as _,a as w,b as o,c as g,d as A,e as r}from"./table-bf376661.js";import{F as i}from"./FormatNumbering-e171b06a.js";import{B}from"./button-662018a0.js";import D from"./Action-20dd093b.js";import{B as I}from"./BargeStatus-23854b11.js";import{T as F}from"./TextInput-f8fd75ba.js";import{X as L}from"./x-c69ac182.js";import{c as M}from"./createLucideIcon-6426f9be.js";import"./utils-aa679991.js";import"./react-number-format.es-33d4ddf3.js";import"./dialog-cd6574bf.js";import"./index-07e776c0.js";import"./react-icons.esm-f5117589.js";import"./card-662026ea.js";import"./badge-cca44c2f.js";import"./BayarAngsuran-2b3aec43.js";import"./label-e1be8c98.js";import"./index-bcb7b51f.js";import"./index-ea477c8f.js";import"./input-dda9d482.js";import"./index.esm-520ad08f.js";import"./Checkbox-e7d1ea02.js";import"./Loading-ceec09d3.js";import"./transition-16898277.js";import"./JenisNasabah-09254b7f.js";import"./InputError-bf69eb8a.js";import"./InputLabel-518c5e05.js";import"./PrimaryButton-7a0acf8f.js";import"./SelectList-389240a1.js";import"./DeleteAngsuran-177c7766.js";import"./DeleteLoan-8f9dc4c8.js";import"./useFrontEndPermission-3fddc876.js";import"./NoEditOverlay-b8442ca0.js";import"./sonner-87354e32.js";import"./use-mobile-4a7e3d84.js";import"./BadgeStatus-4c91a3a0.js";/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),be=({dateOfWeek:N,datas:h})=>{const[f,b]=c.useState([]),[m,v]=c.useState("");c.useEffect(()=>{if(h){const n=(t=>t.map(s=>({...s,data:s.data.filter(d=>!(d.lunas&&!d.is_paid)&&(!m||d.nama.toLowerCase().includes(m.toLowerCase())))})))(h);b(n)}},[h,m]);const p=(l,n)=>l.reduce((s,d)=>s+parseInt(d[n]??0),0),[y,x]=c.useState(null),[T,u]=c.useState(!1),S=l=>{x(l),u(!0)},j=()=>{u(!1),x(null)};return c.useState([]),a("div",{className:"relative overflow-scroll h-[70vh] lg:h-[85vh] ",children:[a("div",{className:"relative w-full mb-2 lg:w-auto lg:max-w-60",children:[e(F,{type:"text",placeholder:"Cari Nama",value:m,onChange:l=>v(l.target.value),className:"w-full text-xs"}),e(L,{className:"absolute right-0 w-auto h-5 text-gray-400 -translate-x-1/2 -translate-y-1/2 top-1/2",onClick:l=>v("")})]}),a(_,{className:"text-[0.6rem]/tight sm:text-xs/tight",children:[e(w,{className:"sticky top-0 left-0 z-10",children:a(o,{className:"bg-gray-200",children:[e(g,{className:"text-center",children:"Tanggal"}),e(g,{className:"text-center",children:"Nasabah"}),e(g,{className:"text-center border-x border-x-black",children:"Nominal"})]})}),e(A,{children:f?f.map((l,n)=>a(k.Fragment,{children:[e(o,{children:e(r,{colSpan:17+(N.length??0),children:a("div",{className:"flex items-center gap-3",children:[e(I,{value:l.type2})," ",e("div",{children:l.month})]})})}),l.data.map((t,s)=>a(o,{className:`${t.is_paid?"bg-green-200 hover:bg-green-50":""}}`,children:[e(r,{className:"p-1",children:a("div",{className:"space-y-2 text-center",children:[e("div",{children:C(t.tanggal_drop).format("DD-MM")}),e("div",{children:e(B,{size:"xs",variant:t.lunas?"green":t.is_paid?"blue":"default",onClick:()=>S(t.id),children:t.lunas?e(P,{className:"text-xs"}):t.is_paid?"Paid":"Pay"})})]})}),a(r,{className:"p-1",children:[e("div",{className:"text-xs font-semibold",children:t.nama}),e("div",{children:t.nik}),e("div",{className:"text-ellipsis overflow-hidden ...",children:t.alamat})]}),a(r,{className:"p-1 border-x border-x-black",children:[a("div",{className:"flex justify-between gap-6",children:[e("div",{children:"P"}),e(i,{value:t.pinjaman})]}),a("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e("div",{children:"A"}),a("div",{className:"flex gap-3",children:[e("div",{className:"italic whitespace-nowrap",children:e(i,{value:t.angs_today,prefix:"(",suffix:")"})}),e(i,{value:t.angsuran})]})]}),a("div",{className:"flex justify-between gap-6",children:[e("div",{children:"S"}),e(i,{value:t.saldo})]})]})]},s)),a(o,{className:"bg-gray-100",children:[e(r,{className:"py-3",colSpan:2,children:"TOTAL"}),a(r,{className:"border-x border-x-black",children:[a("div",{className:"flex justify-between gap-6",children:[e("div",{children:"P"}),e(i,{value:p(l.data,"pinjaman")})]}),a("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e("div",{children:"A"}),a("div",{className:"flex gap-3",children:[e("div",{className:"italic whitespace-nowrap",children:e(i,{value:p(l.data,"angs_today"),prefix:"(",suffix:")"})}),e(i,{value:p(l.data,"angsuran")})]})]}),a("div",{className:"flex justify-between gap-6",children:[e("div",{children:"S"}),e(i,{value:p(l.data,"saldo")})]})]})]})]},n)):e(o,{children:e(r,{children:"a"})})})]}),e(D,{datas:f,show:T,onClosed:j,triggeredId:y})]})};export{be as default};
