import{G as F,r as S,j as a,d as c}from"./app-CqcR4o-I.js";import{C as P}from"./Checkbox-BuJfmuZ4.js";import{I as r}from"./InputError-C1zG0ETX.js";import{I as i}from"./InputLabel-DDkR-8mN.js";import{P as x}from"./PrimaryButton-Nnl1WI6N.js";import{S as T}from"./SelectList-o44vhy_v.js";import{T as j}from"./TextInput-b504AXue.js";import{C as h}from"./index.esm-CXWYZSXO.js";const K=({status:A,setLoading:b,max_date:E,min_date:_,emps:k,customer_id:N,nik:v,url:y=route("transaction.store")})=>{const{data:s,setData:d,post:C,processing:w,errors:l}=F({tanggal_drop:"",customer_id:N,nik:v,mantri:"",pinjaman:"",type_create:"2",danatitipan_1:!1,tanggal_angsuran_1:"",status_angsuran_:""}),[m,u]=S.useState([{id:1}]),D=()=>{const e=m[m.length-1].id+1;u([...m,{id:e}]),d({...s,[`tanggal_angsuran_${e}`]:c(s.tanggal_drop).add(e,"week").format("YYYY-MM-DD")})},Y=e=>{const n=m.filter(o=>o.id!==e);u(n);const t={...s};delete t[`tanggal_angsuran_${e}`],delete t[`angsuran_${e}`],d(t)},$=e=>{const{name:n,value:t}=e.target,o={...s};Object.keys(o).forEach(p=>{(p.includes("angsuran")||p.includes("danatitipan"))&&delete o[p]}),u([{id:1},{id:2},{id:3}]);const M={...o,[n]:t,tanggal_angsuran_1:c(t).add(1,"week").format("YYYY-MM-DD"),tanggal_angsuran_2:c(t).add(2,"week").format("YYYY-MM-DD"),tanggal_angsuran_3:c(t).add(3,"week").format("YYYY-MM-DD")};d(M)},g=e=>{d(e.target.name,e.target.type==="checkbox"?e.target.checked:e.target.value)},f=(e,n)=>{d(n,e)},I=e=>{e.preventDefault(),C(y),b(w)};return a.jsxs("form",{className:"flex-1",onSubmit:I,children:[a.jsx("div",{className:"text-lg font-semibold",children:"Permintaan Pinjaman Baru (Nasabah Lama)"}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-1",children:[a.jsx(i,{htmlFor:"tanggal_drop",value:"Tanggal Drop"}),a.jsx(j,{id:"tanggal_drop",type:"date",name:"tanggal_drop",min:_,value:s.tanggal_drop,className:"mt-1 block w-full",onChange:$}),a.jsx(r,{message:l.tanggal_drop,className:"mt-2"})]}),a.jsxs("div",{className:"flex w-full gap-2 mb-1",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(i,{htmlFor:"nik",value:"NIK Customer"}),a.jsx(j,{id:"nik",type:"text",name:"nik",value:s.nik,className:"mt-1 block w-full",readOnly:!0,onChange:g}),a.jsx(r,{message:l.nik,className:"mt-2"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(i,{htmlFor:"mantri",value:"Mantri"}),a.jsx(T,{id:"mantri",type:"text",name:"mantri",options:k,nullValue:!0,value:s.mantri,className:"mt-1 block w-full",onChange:g}),a.jsx(r,{message:l.mantri,className:"mt-2"})]})]}),a.jsxs("div",{className:"mb-1",children:[a.jsx(i,{htmlFor:"pinjaman",value:"Nominal Pinjaman",className:"mb-1"}),a.jsx(h,{name:"pinjaman",id:"pinjaman",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-xs text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full text-sm mt-2",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:f,value:s.pinjaman,placeholder:"Inputkan angka tanpa sparator"}),a.jsx(r,{message:l.pinjaman,className:"mt-2"})]}),a.jsx("div",{className:"mt-3 mb-3 font-semibold underline",children:"Input Angsuran"}),m.map((e,n)=>a.jsxs("div",{className:"flex w-full gap-2 mb-1",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(i,{htmlFor:`tanggal_angsuran_${e.id}`,value:"Tanggal Angsuran"}),a.jsx(j,{id:`tanggal_angsuran_${e.id}`,type:"date",name:`tanggal_angsuran_${e.id}`,value:s[`tanggal_angsuran_${e.id}`],className:"mt-1 block w-full",onChange:g}),a.jsx(r,{message:l[`tanggal_angsuran_${e.id}`],className:"mt-2"})]}),a.jsxs("div",{className:"flex-[1.5]",children:[a.jsx(i,{htmlFor:`angsuran_${e.id}`,value:"Nominal Angsuran",className:"mb-1"}),a.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[a.jsx(h,{name:`angsuran_${e.id}`,id:`angsuran_${e.id}`,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-xs text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:f,value:s[`angsuran_${e.id}`],placeholder:"Inputkan angka tanpa sparator"}),a.jsx("div",{className:"block",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx(P,{name:`danatitipan_${e.id}`,value:s[`danatitipan_${e.id}`],onChange:g}),a.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"titipan"})]})}),a.jsx("div",{children:n>=0&&a.jsx(x,{color:"red",type:"button",className:"block",onClick:()=>Y(e.id),children:"X"})})]}),a.jsx(r,{message:l[`angsuran_${n}`],className:"mt-2"})]})]},e.id)),a.jsx(x,{type:"button",onClick:D,title:"Add"}),a.jsx("div",{className:"block mt-4",children:a.jsx(x,{type:"submit",title:"Submit",color:"green"})})]})]})};export{K as default};
