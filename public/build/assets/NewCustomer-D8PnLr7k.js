import{G as F,r as M,j as a,d as u}from"./app-CqcR4o-I.js";import{C as S}from"./Checkbox-BuJfmuZ4.js";import{I as t}from"./InputError-C1zG0ETX.js";import{I as l}from"./InputLabel-DDkR-8mN.js";import{P as j}from"./PrimaryButton-Nnl1WI6N.js";import{S as A}from"./SelectList-o44vhy_v.js";import{T as d}from"./TextInput-b504AXue.js";import{C as b}from"./index.esm-CXWYZSXO.js";const H=({status:P,setLoading:f,max_date:T,min_date:k,emps:_,customer_id:E,nik:N,url:v=route("transaction.store")})=>{const{data:s,setData:o,post:C,processing:y,errors:n}=F({nama:"",no_kk:"",alamat:"",nik:N,tanggal_drop:"",mantri:"",pinjaman:"",type_create:"2",danatitipan_1:!1,tanggal_angsuran_1:"",status_angsuran_:""}),[g,x]=M.useState([{id:1}]),w=()=>{const e=g[g.length-1].id+1;x([...g,{id:e}]),o({...s,[`tanggal_angsuran_${e}`]:u(s.tanggal_drop).add(e,"week").format("YYYY-MM-DD")})},D=e=>{const r=g.filter(c=>c.id!==e);x(r);const m={...s};delete m[`tanggal_angsuran_${e}`],delete m[`angsuran_${e}`],o(m)},Y=e=>{const{name:r,value:m}=e.target,c={...s};Object.keys(c).forEach(p=>{(p.includes("angsuran")||p.includes("danatitipan"))&&delete c[p]}),x([{id:1},{id:2},{id:3}]);const I={...c,[r]:m,tanggal_angsuran_1:u(m).add(1,"week").format("YYYY-MM-DD"),tanggal_angsuran_2:u(m).add(2,"week").format("YYYY-MM-DD"),tanggal_angsuran_3:u(m).add(3,"week").format("YYYY-MM-DD")};o(I)},i=e=>{o(e.target.name,e.target.type==="checkbox"?e.target.checked:e.target.value)},h=(e,r)=>{o(r,e)},$=e=>{e.preventDefault(),C(v),f(y)};return a.jsxs("form",{className:"flex-1",onSubmit:$,children:[a.jsx("div",{className:"text-lg font-semibold",children:"Permintaan Pinjaman Baru (Nasabah Lama)"}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-1",children:[a.jsx(l,{optional:!0,htmlFor:"no_kk",value:"No KK Customer"}),a.jsx(d,{id:"no_kk",type:"text",name:"no_kk",required:!1,value:s.no_kk,className:"mt-1 block w-full",onChange:i}),a.jsx(t,{message:n.no_kk,className:"mt-2"})]}),a.jsxs("div",{className:"mb-1",children:[a.jsx(l,{htmlFor:"nama",value:"Nama Customer"}),a.jsx(d,{id:"nama",type:"text",name:"nama",value:s.nama,className:"mt-1 block w-full",onChange:i}),a.jsx(t,{message:n.nama,className:"mt-2"})]}),a.jsxs("div",{className:"mb-1",children:[a.jsx(l,{htmlFor:"alamat",value:"Alamat Customer"}),a.jsx(d,{id:"alamat",type:"text",name:"alamat",value:s.alamat,className:"mt-1 block w-full",onChange:i}),a.jsx(t,{message:n.alamat,className:"mt-2"})]}),a.jsxs("div",{className:"mb-1",children:[a.jsx(l,{htmlFor:"tanggal_drop",value:"Tanggal Drop"}),a.jsx(d,{id:"tanggal_drop",type:"date",name:"tanggal_drop",min:k,value:s.tanggal_drop,className:"mt-1 block w-full",onChange:Y}),a.jsx(t,{message:n.tanggal_drop,className:"mt-2"})]}),a.jsxs("div",{className:"flex w-full gap-2 mb-1",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(l,{htmlFor:"nik",value:"NIK Customer"}),a.jsx(d,{id:"nik",type:"text",name:"nik",value:s.nik,className:"mt-1 block w-full",readOnly:!0,onChange:i}),a.jsx(t,{message:n.nik,className:"mt-2"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(l,{htmlFor:"mantri",value:"Mantri"}),a.jsx(A,{id:"mantri",type:"text",name:"mantri",options:_,nullValue:!0,value:s.mantri,className:"mt-1 block w-full",onChange:i}),a.jsx(t,{message:n.mantri,className:"mt-2"})]})]}),a.jsxs("div",{className:"mb-1",children:[a.jsx(l,{htmlFor:"pinjaman",value:"Nominal Pinjaman",className:"mb-1"}),a.jsx(b,{name:"pinjaman",id:"pinjaman",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-xs text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full text-sm mt-2",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:h,value:s.pinjaman,placeholder:"Inputkan angka tanpa sparator"}),a.jsx(t,{message:n.pinjaman,className:"mt-2"})]}),a.jsx("div",{className:"mt-3 mb-3 font-semibold underline",children:"Input Angsuran"}),g.map((e,r)=>a.jsxs("div",{className:"flex w-full gap-2 mb-1",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(l,{htmlFor:`tanggal_angsuran_${e.id}`,value:"Tanggal Angsuran"}),a.jsx(d,{id:`tanggal_angsuran_${e.id}`,type:"date",name:`tanggal_angsuran_${e.id}`,value:s[`tanggal_angsuran_${e.id}`],className:"mt-1 block w-full",onChange:i}),a.jsx(t,{message:n[`tanggal_angsuran_${e.id}`],className:"mt-2"})]}),a.jsxs("div",{className:"flex-[1.5]",children:[a.jsx(l,{htmlFor:`angsuran_${e.id}`,value:"Nominal Angsuran",className:"mb-1"}),a.jsxs("div",{className:"flex gap-2 justify-center items-center",children:[a.jsx(b,{name:`angsuran_${e.id}`,id:`angsuran_${e.id}`,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-xs text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:h,value:s[`angsuran_${e.id}`],placeholder:"Inputkan angka tanpa sparator"}),a.jsx("div",{className:"block",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx(S,{name:`danatitipan_${e.id}`,value:s[`danatitipan_${e.id}`],onChange:i}),a.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"titipan"})]})}),a.jsx("div",{children:r>=0&&a.jsx(j,{color:"red",type:"button",className:"block",onClick:()=>D(e.id),children:"X"})})]}),a.jsx(t,{message:n[`angsuran_${r}`],className:"mt-2"})]})]},e.id)),a.jsx(j,{type:"button",onClick:w,title:"Add"}),a.jsx("div",{className:"block mt-4",children:a.jsx(j,{type:"submit",title:"Submit",color:"green"})})]})]})};export{H as default};
