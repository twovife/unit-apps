import{q as P,r as i,a as e,j as r,d as b,F as H,e as Y}from"./app-dbd5aa42.js";import{D as F,a as L,b as B,c as E}from"./dialog-5d25baf1.js";import{C as j,a as v,b as D,d as C}from"./card-c6f73f4f.js";import{T as y,a as T,b as s,c as t,d as S,e as a,F as d}from"./FormatNumbering-f63b45e8.js";import{S as m}from"./StatusPinjaman-def2ca85.js";import I from"./BayarAngsuran-b9f31d89.js";import K from"./JenisNasabah-4dcb4eb8.js";import O from"./DeleteAngsuran-8f1e1be7.js";import R from"./DeleteLoan-399c381e.js";import"./index-b3b7a6c8.js";import"./react-icons.esm-c7a94f5b.js";import"./index-c52ebc70.js";import"./button-203f7698.js";import"./index-f96983da.js";import"./utils-46f1eee5.js";import"./react-number-format.es-961ada85.js";import"./badge-3fb1264d.js";import"./label-23b24721.js";import"./index-f107f275.js";import"./input-4dfcdff2.js";import"./index.esm-960d2765.js";import"./Checkbox-206a6a40.js";import"./Loading-a23c3f64.js";import"./transition-4add167f.js";import"./InputError-3d300547.js";import"./InputLabel-dcaa0a4e.js";import"./PrimaryButton-ac71e020.js";import"./SelectList-b175031b.js";import"./TextInput-58a07cf7.js";const je=({datas:k,show:w=!1,onClosed:A,triggeredId:c})=>{const{server_filter:{closed_transaction:h},auth:_}=P().props,[J,p]=i.useState(!1),[q,u]=i.useState(!1),[n,N]=i.useState({}),[x,f]=i.useState([]),M=async l=>{p(!0),u(),await Y({method:"get",url:route("pinjaman.get_loan_pinjaman",l)}).then(function({data:o}){p(!1),N(o.pinjaman),f(o.instalment)}).catch(function({response:o}){u()})};i.useEffect(()=>{c&&M(c)},[c,k]);const g=()=>{A(),N({}),f([])};return e(F,{open:w,onOpenChange:l=>l?"":g(),children:r(L,{className:"w-[90vw] h-[90vh] overflow-auto scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin p-2",children:[e(B,{className:"max-h-10",children:e(E,{children:"Isi Angsuran"})}),r(j,{className:"w-full",children:[e(v,{children:e(D,{children:"Rincian Pinjaman"})}),e(C,{children:e("div",{className:"overflow-auto scrollbar-thin",children:r(y,{children:[e(T,{className:"bg-gray-200",children:r(s,{children:[e(t,{className:"text-center",children:"Nomor"}),e(t,{className:"text-center",children:"Nasabah"}),e(t,{className:"text-center",children:"NIK"}),e(t,{className:"text-center",children:"Alamat"}),e(t,{className:"text-center",children:"Unit"}),e(t,{className:"text-center",children:"Kelompok"}),e(t,{className:"text-center",children:"Hari"}),e(t,{className:"text-center",children:"Tanggal Drop"}),e(t,{className:"text-center",children:"Pinjaman"}),e(t,{className:"text-center",children:"Nama Mantri"}),e(t,{className:"text-center",children:"Status"}),e(t,{className:"text-center",children:"Ket"}),e(t,{className:"text-center",children:"Lunas"})]})}),e(S,{children:Object.keys(n).length!==0?r(s,{className:"text-center",children:[e(a,{children:n.id}),e(a,{children:n.nama}),e(a,{children:n.nik}),e(a,{children:n.alamat}),e(a,{children:n.branch}),e(a,{children:n.kelompok}),e(a,{children:n.hari}),e(a,{children:b(n.tanggal_drop).format("DD-MM-YYYY")}),e(a,{children:e(d,{value:n.pinjaman})}),e(a,{children:n.mantri}),e(a,{children:e(m,{value:n.status_pinjaman})}),e(a,{children:n.notes}),e(a,{children:e(m,{value:n.lunas?"Lunas":"Belum"})})]}):e(s,{children:e(a,{children:"Menunggu data . . ."})})})]})})})]}),r("div",{className:"flex flex-col w-full gap-3 mt-3 lg:flex-row",children:[r(j,{className:"flex-[5]",children:[e(v,{children:e(D,{children:"Rincian Pinjaman"})}),e(C,{className:"p-2",children:r(y,{className:"text-xs",children:[e(T,{className:"bg-gray-200",children:r(s,{children:[e(t,{className:"text-center",children:"Action"}),e(t,{className:"text-center",children:"Tanggal Pembayaran"}),e(t,{className:"text-center",children:"Jumlah"}),e(t,{className:"text-center",children:"Saldo"}),e(t,{className:"text-center",children:"Status"})]})}),e(S,{children:Object.keys(n).length!==0?x.map(l=>r(s,{className:"text-center",children:[e(a,{children:(!h||h<l.transaction_date)&&e(O,{id:l.id})}),e(a,{children:b(l.transaction_date).format("DD-MM-YY")}),e(a,{children:e("div",{className:`${l.danatitipan=="true"?"text-red-500":"text-black"}`,children:e(d,{value:l.nominal})})}),e(a,{children:e(d,{value:l.saldo})}),e(a,{children:e(m,{value:l.status})})]})):e(s,{children:e(a,{children:"Menunggu data . . ."})})})]})})]}),r("div",{className:"flex-[2]",children:[e(I,{triggeredId:n.id,triggeredPinjaman:n.pinjaman,instalment:x}),_.permissions.includes("can update")&&r(H,{children:[e(K,{loan:n}),r("div",{className:"flex items-center justify-end gap-3 p-3",children:[e("div",{className:"font-semibold",children:"Hapus Pinjaman"}),e(R,{id:n.id,onClosed:g})]})]})]})]})]})})};export{je as default};
