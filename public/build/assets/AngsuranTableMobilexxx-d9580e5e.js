import{r as c,j as t,a as e,R as _,c as B}from"./app-89964f60.js";import{T as D,a as I,b as o,c as h,d as A,e as r}from"./table-bf376661.js";import{F as s}from"./FormatNumbering-e171b06a.js";import{B as F}from"./button-662018a0.js";import L from"./Action-20dd093b.js";import{B as M}from"./BargeStatus-23854b11.js";import{T as O}from"./TextInput-f8fd75ba.js";import{X as w}from"./x-c69ac182.js";import"./utils-aa679991.js";import"./react-number-format.es-33d4ddf3.js";import"./dialog-cd6574bf.js";import"./index-07e776c0.js";import"./react-icons.esm-f5117589.js";import"./card-662026ea.js";import"./badge-cca44c2f.js";import"./BayarAngsuran-2b3aec43.js";import"./label-e1be8c98.js";import"./index-bcb7b51f.js";import"./index-ea477c8f.js";import"./input-dda9d482.js";import"./index.esm-520ad08f.js";import"./Checkbox-e7d1ea02.js";import"./Loading-ceec09d3.js";import"./transition-16898277.js";import"./JenisNasabah-09254b7f.js";import"./InputError-bf69eb8a.js";import"./InputLabel-518c5e05.js";import"./PrimaryButton-7a0acf8f.js";import"./SelectList-389240a1.js";import"./DeleteAngsuran-177c7766.js";import"./DeleteLoan-8f9dc4c8.js";import"./useFrontEndPermission-3fddc876.js";import"./NoEditOverlay-b8442ca0.js";import"./sonner-87354e32.js";import"./createLucideIcon-6426f9be.js";import"./use-mobile-4a7e3d84.js";import"./BadgeStatus-4c91a3a0.js";const ye=({dateOfWeek:N,datas:f})=>{const[u,b]=c.useState([]),[m,g]=c.useState("");c.useEffect(()=>{if(f){const i=(a=>a.map(n=>({...n,data:n.data.filter(d=>!(d.lunas&&!d.is_paid)&&(!m||d.nama.toLowerCase().includes(m.toLowerCase())))})))(f);b(i)}},[f,m]);const p=(l,i)=>l.reduce((n,d)=>n+parseInt(d[i]??0),0),[y,v]=c.useState(null),[T,x]=c.useState(!1),j=l=>{v(l),x(!0)},C=()=>{x(!1),v(null)},[z,S]=c.useState([]),k=l=>{S(i=>i.includes(l)?i.filter(a=>a!==l):[...i,l])};return t("div",{className:"relative overflow-auto h-[70vh] lg:h-[85vh] scrollbar-thin",children:[t("div",{className:"relative w-full mb-2 lg:w-auto lg:max-w-60",children:[e(O,{type:"text",placeholder:"Cari Nama",value:m,onChange:l=>g(l.target.value),className:"w-full text-xs"}),e(w,{className:"absolute right-0 w-auto h-5 text-gray-400 -translate-x-1/2 -translate-y-1/2 top-1/2",onClick:l=>g("")})]}),t(D,{className:"text-xs rounded-lg",children:[e(I,{className:"sticky top-0 left-0 z-10",children:t(o,{className:"bg-gray-200",children:[e(h,{className:"text-center",children:"No"}),e(h,{className:"text-center",children:"Tanggal"}),e(h,{className:"text-center",children:"Nasabah"}),e(h,{className:"text-center border-x border-x-black",children:"Nominal"})]})}),e(A,{children:u?u.map((l,i)=>t(_.Fragment,{children:[e(o,{children:e(r,{colSpan:17+(N.length??0),children:t("div",{className:"flex items-center gap-3",children:[e(M,{value:l.type2})," ",e("div",{children:l.month})]})})}),l.data.map((a,n)=>t(o,{className:`${a.is_paid?"bg-green-200 hover:bg-green-50":""}}`,children:[e(r,{onClick:()=>k(a.id),children:n+1}),e(r,{children:t("div",{className:"space-y-2 text-center",children:[e("div",{children:B(a.tanggal_drop).format("DD-MM")}),e("div",{children:e(F,{size:"xs",variant:a.lunas?"green":a.is_paid?"blue":"default",onClick:()=>j(a.id),children:a.lunas?"Lunas":a.is_paid?"Dibayar":"Bayar"})})]})}),t(r,{children:[e("div",{className:"font-semibold",children:a.nama}),e("div",{children:a.nik}),e("div",{children:a.alamat})]}),t(r,{className:"border-x border-x-black",children:[t("div",{className:"flex justify-between gap-6",children:[e("div",{children:"P"}),e(s,{value:a.pinjaman})]}),t("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e("div",{children:"A"}),t("div",{className:"flex gap-3",children:[e("div",{className:"italic whitespace-nowrap",children:e(s,{value:a.angs_today,prefix:"(",suffix:")"})}),e(s,{value:a.angsuran})]})]}),t("div",{className:"flex justify-between gap-6",children:[e("div",{children:"S"}),e(s,{value:a.saldo})]})]})]},n)),t(o,{className:"bg-gray-100",children:[e(r,{className:"py-3",colSpan:3,children:"TOTAL"}),t(r,{className:"border-x border-x-black",children:[t("div",{className:"flex justify-between gap-6",children:[e("div",{children:"P"}),e(s,{value:p(l.data,"pinjaman")})]}),t("div",{className:"flex justify-between gap-6 border-b-2 border-b-black ",children:[e("div",{children:"A"}),t("div",{className:"flex gap-3",children:[e("div",{className:"italic whitespace-nowrap",children:e(s,{value:p(l.data,"angs_today"),prefix:"(",suffix:")"})}),e(s,{value:p(l.data,"angsuran")})]})]}),t("div",{className:"flex justify-between gap-6",children:[e("div",{children:"S"}),e(s,{value:p(l.data,"saldo")})]})]})]})]},i)):e(o,{children:e(r,{children:"a"})})})]}),e(L,{datas:u,show:T,onClosed:C,triggeredId:y})]})};export{ye as default};
