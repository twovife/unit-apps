import{W as S,r as A,j as n,a}from"./app-2edb1ba6.js";import{C as P}from"./Checkbox-e0f969fc.js";import{I as l}from"./InputError-dfd71c98.js";import{I as r}from"./InputLabel-d34e4baf.js";import{P as f}from"./PrimaryButton-23563e2b.js";import{S as k}from"./SelectList-4128afd9.js";import{T as o}from"./TextInput-cc20b230.js";import{d as p}from"./dayjs.min-1ba8ab1c.js";import{C as N}from"./index.esm-e3d18bf5.js";const z=({status:v,setLoading:x,max_date:T,min_date:C,emps:y,customer_id:V,nik:w,url:$=route("transaction.store")})=>{const{data:t,setData:g,post:D,processing:Y,errors:s}=S({nama:"",no_kk:"",alamat:"",nik:w,tanggal_drop:"",mantri:"",pinjaman:"",type_create:"2",danatitipan_1:!1,tanggal_angsuran_1:"",status_angsuran_:""}),[u,h]=A.useState([{id:1}]);console.log();const j=()=>{const e=u[u.length-1].id+1;h([...u,{id:e}]),g({...t,[`tanggal_angsuran_${e}`]:p(t.tanggal_drop).add(e,"week").format("YYYY-MM-DD")})},I=e=>{const i=u.filter(c=>c.id!==e);h(i);const d={...t};delete d[`tanggal_angsuran_${e}`],delete d[`angsuran_${e}`],g(d)},F=e=>{const{name:i,value:d}=e.target,c={...t};Object.keys(c).forEach(_=>{(_.includes("angsuran")||_.includes("danatitipan"))&&delete c[_]}),h([{id:1},{id:2},{id:3}]);const M={...c,[i]:d,tanggal_angsuran_1:p(d).add(1,"week").format("YYYY-MM-DD"),tanggal_angsuran_2:p(d).add(2,"week").format("YYYY-MM-DD"),tanggal_angsuran_3:p(d).add(3,"week").format("YYYY-MM-DD")};g(M)},m=e=>{g(e.target.name,e.target.type==="checkbox"?e.target.checked:e.target.value)},b=(e,i)=>{g(i,e)};return console.log(t),n("form",{className:"flex-1",onSubmit:e=>{e.preventDefault(),D($),x(Y)},children:[a("div",{className:"text-lg font-semibold",children:"Permintaan Pinjaman Baru (Nasabah Lama)"}),n("div",{className:"p-4",children:[n("div",{className:"mb-1",children:[a(r,{optional:!0,htmlFor:"no_kk",value:"No KK Customer"}),a(o,{id:"no_kk",type:"text",name:"no_kk",required:!1,value:t.no_kk,className:"mt-1 block w-full",onChange:m}),a(l,{message:s.no_kk,className:"mt-2"})]}),n("div",{className:"mb-1",children:[a(r,{htmlFor:"nama",value:"Nama Customer"}),a(o,{id:"nama",type:"text",name:"nama",value:t.nama,className:"mt-1 block w-full",onChange:m}),a(l,{message:s.nama,className:"mt-2"})]}),n("div",{className:"mb-1",children:[a(r,{htmlFor:"alamat",value:"Alamat Customer"}),a(o,{id:"alamat",type:"text",name:"alamat",value:t.alamat,className:"mt-1 block w-full",onChange:m}),a(l,{message:s.alamat,className:"mt-2"})]}),n("div",{className:"mb-1",children:[a(r,{htmlFor:"tanggal_drop",value:"Tanggal Drop"}),a(o,{id:"tanggal_drop",type:"date",name:"tanggal_drop",min:C,value:t.tanggal_drop,className:"mt-1 block w-full",onChange:F}),a(l,{message:s.tanggal_drop,className:"mt-2"})]}),n("div",{className:"flex w-full gap-2 mb-1",children:[n("div",{className:"flex-1",children:[a(r,{htmlFor:"nik",value:"NIK Customer"}),a(o,{id:"nik",type:"text",name:"nik",value:t.nik,className:"mt-1 block w-full",readOnly:!0,onChange:m}),a(l,{message:s.nik,className:"mt-2"})]}),n("div",{className:"flex-1",children:[a(r,{htmlFor:"mantri",value:"Mantri"}),a(k,{id:"mantri",type:"text",name:"mantri",options:y,nullValue:!0,value:t.mantri,className:"mt-1 block w-full",onChange:m}),a(l,{message:s.mantri,className:"mt-2"})]})]}),n("div",{className:"mb-1",children:[a(r,{htmlFor:"pinjaman",value:"Nominal Pinjaman",className:"mb-1"}),a(N,{name:"pinjaman",id:"pinjaman",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full text-sm mt-2",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:b,value:t.pinjaman,placeholder:"Inputkan angka tanpa sparator"}),a(l,{message:s.pinjaman,className:"mt-2"})]}),a("div",{className:"mt-3 mb-3 font-semibold underline",children:"Input Angsuran"}),u.map((e,i)=>n("div",{className:"flex w-full gap-2 mb-1",children:[n("div",{className:"flex-1",children:[a(r,{htmlFor:`tanggal_angsuran_${e.id}`,value:"Tanggal Angsuran"}),a(o,{id:`tanggal_angsuran_${e.id}`,type:"date",name:`tanggal_angsuran_${e.id}`,value:t[`tanggal_angsuran_${e.id}`],className:"mt-1 block w-full",onChange:m}),a(l,{message:s[`tanggal_angsuran_${e.id}`],className:"mt-2"})]}),n("div",{className:"flex-[1.5]",children:[a(r,{htmlFor:`angsuran_${e.id}`,value:"Nominal Angsuran",className:"mb-1"}),n("div",{className:"flex gap-1 justify-center",children:[a(N,{name:`angsuran_${e.id}`,id:`angsuran_${e.id}`,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-gray-800 dark:bg-gray-800 dark:text-gray-200 disabled:bg-black/10 dark:disabled:bg-white/10 block w-full",allowDecimals:!1,prefix:"Rp. ",min:1,required:!0,onValueChange:b,value:t[`angsuran_${e.id}`],placeholder:"Inputkan angka tanpa sparator"}),a("div",{className:"block mt-4",children:n("label",{className:"flex items-center",children:[a(P,{name:`danatitipan_${e.id}`,value:t[`danatitipan_${e.id}`],onChange:m}),a("span",{className:"ml-2 text-xs text-gray-600",children:"titipan"})]})})]}),a(l,{message:s[`angsuran_${i}`],className:"mt-2"})]}),n("div",{className:"flex-1",children:[a(r,{htmlFor:`status_angsuran_${e.id}`,value:"Status"}),n("div",{className:"flex justify-center items-center gap-2",children:[a(k,{id:`status_angsuran_${e.id}`,type:"date",options:v,nullValue:!0,name:`status_angsuran_${e.id}`,value:t[`status_angsuran_${e.id}`],className:"mt-1 block w-full",onChange:m}),i>=0&&a(f,{color:"red",type:"button",className:"block",onClick:()=>I(e.id),children:"X"})]}),a(l,{message:s[`status_angsuran_${e.id}`],className:"mt-2"})]})]},e.id)),a(f,{type:"button",onClick:j,title:"Add"}),a("div",{className:"block mt-4",children:a(f,{type:"submit",title:"Submit",color:"green"})})]})]})};export{z as default};
